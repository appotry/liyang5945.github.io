<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>小米手机不使用第三方recovery ROOT教程</title>
    <url>/2020/11/23/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/root-xiaomi-device-without-recovery/</url>
    <content><![CDATA[<p>上个月我买了一部小米10至尊纪念版，由于小米自带的换机软件不支持一些应用数据的还原，所以我需要使用钛备份来还原应用和数据。但是钛备份需要root才能用，因为机器刚出没多久，第三方的recovery也没有，所以需要找到一种不使用recovery来获取root权限的方法。经过仔细寻找之后，我在一个国外网站找到了不使用recovery获取root权限的方法（<a href="https://www.getdroidtips.com/root-xiaomi-mi-10-ultra/" target="_blank" rel="noopener">原始教程地址</a>），下面是中文详细教程：</p>
<p>1、先去官网申请解锁bootloader，等待168小时后解锁手机，解锁时会清空数据，注意备份应用和文件。<br>2、在电脑上下载和你手机版本号相同的卡刷包rom，版本一定要一致！使用解压软件打开提取里面的boot.img文件，并用数据线传到手机里。官网rom下载地址: <a href="http://www.miui.com/download.html" target="_blank" rel="noopener">http://www.miui.com/download.html</a></p>
<p><img src="https://images.liyangzone.com/article_img/root-xiaomi-device/Image036.png" alt></p>
<p>3、手机上安装<code>Magisk Manager</code>APP ,然后打开<code>安装</code>按钮，之后选择最后一项<code>选择并修补一个文件</code>，然后会弹出文件选择框，选择之前复制到手机上的<code>boot.img</code>文件，选中文件之后点<code>开始</code>，按钮，接下来<code>Magisk Manager</code>APP会下载一个压缩包文件并制作一个打上root补丁的img文件，稍等片刻就会制作好，制作好的文件在如下位置，之后将该文件复制到电脑。</p>
<p><img src="https://images.liyangzone.com/article_img/root-xiaomi-device/Screenshot1.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/root-xiaomi-device/Screenshot2.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/root-xiaomi-device/Screenshot3.jpg" alt></p>
<p>4、按音量减+开机键进入fastboot模式，连接电脑，使用fastboot刷入打好补丁的img文件，命令为 <code>fastboot flash boot magisk_patched.img</code></p>
<p>完成之后使用<code>fastboot reboot</code>命令重启手机，开机之后手机root成功。</p>
<p><img src="https://images.liyangzone.com/article_img/root-xiaomi-device/Image039.png" alt></p>
<p><img src="https://images.liyangzone.com/article_img/root-xiaomi-device/Screenshot4.jpg" alt></p>
<p>PS:</p>
<ul>
<li>Magisk Manager官网下载地址：<a href="https://magiskmanager.com，注意不要使用小米自带浏览器下载，会被替换成其他垃圾软件。" target="_blank" rel="noopener">https://magiskmanager.com，注意不要使用小米自带浏览器下载，会被替换成其他垃圾软件。</a></li>
<li>因为Magisk服务器被墙，步骤三使用<code>Magisk Manager</code>APP制作补丁img文件的过程需要科学上网，不然制作不成功。</li>
<li>fastboot工具在小米解锁软件的目录里可以找到，记得安装驱动。</li>
<li>如果root之后系统有更新的话先不要更新，先刷入原版boot.img文件后才能更新成功，更新成功之后再按本教教程操作一遍即可（下载最新版本ROM&gt;提取boot.img&gt;打补丁&gt;刷入手机）。</li>
<li>理论上此方法适用于所有小米手机，稳定版rom也能root。</li>
</ul>
]]></content>
      <categories>
        <category>其他分享</category>
      </categories>
      <tags>
        <tag>MIUI  小米手机ROOT</tag>
      </tags>
  </entry>
  <entry>
    <title>滴水湖骑行露营记</title>
    <url>/2020/11/16/Drip-lake-riding-notes/</url>
    <content><![CDATA[<p>上周六是阴历二十九，正值月亏，天气晴朗，我又跑到滴水湖进行了一次露营，只为再看一次纯净的星空。</p>
<p><a href="https://imgchr.com/i/DZqBcD" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZqBcD.md.jpg" alt></a></p>
<p>当晚露营在南汇观海公园的广场，旁边就是海，天空偶尔会飘来几片云，不过一会就刮走了</p>
<p><a href="https://imgchr.com/i/DZ6vee" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZ6vee.md.jpg" alt></a></p>
<p>还碰到两个老哥，一个玩单反，一个玩望远镜，这两位老哥都是狠人，跑到这里一宿不睡觉只为拍照、观星。玩单反的老哥给我看了他的朋友以前在这里拍过的照片，我一看，holy shit，竟然拍到了银河，搞得我也想买台相机来玩摄影了。另一位老哥的望远镜我也体验了下，体验了过后我只想说一个字，草！这TM也太清楚了，随便往天空某个方向一指都能看到一堆星星。这老哥还带了个椅子和音响，听着古典音乐看着星星，十分惬意。当天晚上玩望远镜的老哥还看到了流星，我到11点就钻到帐篷里睡觉了，没看到流星，稍有些遗憾。</p>
<p><a href="https://imgchr.com/i/DZcCWt" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZcCWt.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/DZcuYn" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZcuYn.md.jpg" alt></a></p>
<p>第二天一早有很多人跑到海边看日出，不过可惜天公不作美，又有好多云。</p>
<p><a href="https://imgchr.com/i/DZ6zod" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZ6zod.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/DZcRfI" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZcRfI.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/DZcfpt" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZcfpt.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/DZcbkj" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/17/DZcbkj.md.jpg" alt></a></p>
<p>当晚还有几个人也在那个广场上露营，听那个玩望远镜的老哥说，这里到夏天时一晚上最多有上百个帐篷，想看星星的同学也可以去体验下，当然也没必要非得露营，那个公园旁边还有个酒店，房价也不贵，海景房一晚上只要200+。</p>
]]></content>
      <categories>
        <category>生活记录</category>
      </categories>
      <tags>
        <tag>骑行</tag>
        <tag>游记</tag>
      </tags>
  </entry>
  <entry>
    <title>捡垃圾真香，翻新一台 300 块的 iPhone7</title>
    <url>/2020/11/12/renew-a-damaged-iphone7/</url>
    <content><![CDATA[<p>不久前本垃圾佬忽然想买一台iphone7来玩，买来做什么后面会说。本垃圾佬在闲鱼搜寻数日之后，终于发现了完美的目标，一台仅售300块伊拉克成色的iphone7，卖家描述是这样的：</p>
<p><a href="https://imgchr.com/i/BzbLse" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbLse.md.jpg" alt></a><br><a href="https://imgchr.com/i/BzqZon" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqZon.md.jpg" alt></a><br><a href="https://imgchr.com/i/BzbHxO" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbHxO.md.jpg" alt></a></p>
<p>本佬感觉可以买回来折腾一番，并酝酿了一些折腾计划(换壳，换屏)，遂果断拍下，并又在闲鱼上买了一个亮黑色外壳和一个99新的原装拆机屏幕总成</p>
<p><a href="https://imgchr.com/i/BzqiQS" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqiQS.md.jpg" alt></a><br><a href="https://imgchr.com/i/BzqCz8" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqCz8.md.jpg" alt></a></p>
<p>手机收到后确实如卖家描述，是美版卡贴三网机，指纹正常，不过我高估了屏幕的划伤程度，卖家拍的图片看起来划痕很多其实是反光，实际显示区划伤很小，基本不影响使用，不过我嫌麻烦新买的屏幕懒得退货了，还是准备换上新屏。</p>
<p><a href="https://imgchr.com/i/BzboPx" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzboPx.md.jpg" alt></a></p>
<p>卖家所说的缺陷是静音开关键失效，得知更换开机排线可以解决，我又在淘宝购入了iphone7开机排线花费￥18.11。</p>
<p><a href="https://imgchr.com/i/BzqFsg" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqFsg.md.jpg" alt></a></p>
<p>然而我尝试拆机的时候发现尾插附近的一个螺丝滑丝拆不下来了，本佬遂拿出刑具(电磨)伺候它，废了好大的劲终于把这颗螺丝弄了出来。拆开之后我发现里面的螺丝也少了几颗，应该是之前卖家换壳时弄丢的，我又在万能的TB买了一套ip7的螺丝花费￥14.55。</p>
<p><a href="https://imgchr.com/i/Bzqmiq" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/Bzqmiq.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/BzqkLQ" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqkLQ.md.jpg" alt></a></p>
<p>过了两天屏幕和外壳也已经到货了，当我尝试换屏的时候发现HOME键还有主板上的几颗螺丝TMD竟然是三角形的，本佬无奈又在TB购入一把三角螺丝刀花费￥5.9。外壳也给了我一个惊喜，TMD竟然没有按键，本佬又在TB购入亮黑色按键+卡槽一套花费￥12。</p>
<p><a href="https://imgchr.com/i/BzqVds" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqVds.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/BzqEZj" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzqEZj.md.jpg" alt></a></p>
<p>又等了两天快递所有东西都到齐了，我拆开排线和螺丝的快递盒后发现了一个让我哭笑不得的事情，他们竟然都送了一套螺丝刀，包括三角的那种，我自己买的那个算是白买了。他们送的螺丝刀做工没有我自己买的那个做工好，我这样安慰自己。</p>
<p><a href="https://imgchr.com/i/BzbyGV" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbyGV.md.jpg" alt></a></p>
<p>下面是换屏&amp;换壳过程：</p>
<p>几乎全新的屏幕和外壳</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/renew-iphone7/1605185436980.jpg" alt></p>
<p><a href="https://imgchr.com/i/Bzb7RK" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/Bzb7RK.md.jpg" alt></a></p>
<p>更换屏幕总成的小零件，包含光线距离感应器、听筒、前摄像头、HOME键等</p>
<p><a href="https://imgchr.com/i/Bzb4aR" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/Bzb4aR.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/Bzb2MF" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/Bzb2MF.md.jpg" alt></a></p>
<p>更换主板零部件，这个步骤是比较繁琐的，螺丝非常的多，而且规格也不一致，不过卖螺丝那家TB店铺提供了一张螺丝分布图，而且不同规格的螺丝都用单独的自封袋装着并写有编号，照着编号装上去问题不大。不过我发现买到的开机排线的静音开关是磨砂版的，强迫症表示不能接受，于是我又费了好大的劲把它换成了亮黑色的。</p>
<p><a href="https://imgchr.com/i/BzbhZ9" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbhZ9.md.jpg" alt></a><br><a href="https://imgchr.com/i/BzbcxU" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbcxU.md.jpg" alt></a></p>
<p>装上电池之后，顺利开机，经测试一切功能正常。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/renew-iphone7/1605185436945.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/renew-iphone7/1605185436952.jpg" alt></p>
<p>这就折腾完了吗？还没，我收到货时它的电池健康程度为86%，接下来我对它的续航情况进行了测试。具体方法就是充满电后，打开飞行模式、亮度调到最高，打开一个软件持续亮屏，看它能亮屏多长时间，经过测试它坚持了220分钟(约3.7小时)。<br>这样的续航能力可达不到我的要求，我又去TB寻找合适的电池更换，我发现了一些第三方的电池竟然比原装电池容量还高，有一款飞毛腿电池容量竟然做到了2350mAh，不过100+的价格我感觉不是很香。经过仔细的寻找之后我购入了一款德赛高容版电池，容量是2200mAh，价格也很香，￥78。</p>
<p>电池到货之后，我打开包装一看，又GET了一套螺丝刀……………</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/renew-iphone7/1605185436948.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/renew-iphone7/1605185436925.jpg" alt></p>
<p><a href="https://imgchr.com/i/BzbD5q" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbD5q.md.jpg" alt></a></p>
<p>我迫不及待的换了上去，充满电之后也进行了续航测试，保持相同的变量，飞行模式、最高亮度，这次它坚持了313分钟(5.2小时)。续航提升了多少？313/220=1.42，相当于续航提升了42%，这样的成绩已经超出了我的预期。电池放完电后我使用yzx usb电流表测试了它充入的电量，从没电关机到充满，充入了2180mAh，与标称容量少了20mAh，使用电池寿命快捷指令分析容量为2169mAh，与电流表测试的数据相差也不大。</p>
<p><a href="https://imgchr.com/i/BzbOqH" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/BzbOqH.md.png" alt></a></p>
<p><a href="https://imgchr.com/i/DAjLX4" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/16/DAjLX4.md.png" alt></a></p>
<p>这下总算折腾完毕了，最后我算了下总花费：</p>
<p><a href="https://imgchr.com/i/Bzzovt" target="_blank" rel="noopener"><img src="https://s3.ax1x.com/2020/11/12/Bzzovt.png" alt></a></p>
<p>总花费小600了，还没有闲鱼上一些传家宝的价格贵，不过这可是一台成色接近全新，电池效率110%的iphone7，我感觉还是比较值的。<br>折腾完之后，我把它装到了我的自行车上，成为了一块苹果牌的导航仪+码表，这也正是我当初买它的用途，当作导航机来用的。因为目前市面上的码表都没有网络功能，码表的导航功能与手机相比起来基本都是渣渣，约等于没有，又因为在骑车过程中不方便看手机（要从背后口袋里拿出来，而且戴着手套和面巾也不方便解锁），所以我需要第二台手机来当作专用的导航机。其实我已经买了一部一代se，不过因为se屏幕太小，实际体验并不太好，所以我又买了这个7，如果容量再大点，作为主力机使用也是没问题的。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/renew-iphone7/1605185436929.jpg" alt></p>
<p>上面的测试软件用的是高德地图，且开了GPS的情况下，不过这只是极端情况下，实际使用时不需要全程亮屏，仅仅是到路口时才打开看一下。上周六我出外骑车测试了下，全程开数据+GPS、最大音量语音导航、偶尔亮屏看路况，早上9点出门骑到下午5点还有20%的电，依此计算能持续使用10个小时，虽然达不到码表级的续航，不过作为导航使用也足够了。</p>
<p>折腾总结：自己动手，丰衣足食，捡垃圾真香。</p>
]]></content>
      <categories>
        <category>其他分享</category>
      </categories>
      <tags>
        <tag>折腾</tag>
        <tag>捡垃圾</tag>
        <tag>DIY</tag>
      </tags>
  </entry>
  <entry>
    <title>嘉兴九龙山、淀山湖二日游：骑行露营、观海观星、观日出日落</title>
    <url>/2020/10/26/jiulong-mountain-riding-notes/</url>
    <content><![CDATA[<p>骑行+露营的玩法也是我在几年前就有的想法，不过这个想法直到到去年才得以实施，去年10月份我就买了一些露营装备，并于10月底到滴水湖尝试着露营了一次，不过因为阴天并没有看到日出和星空，比较遗憾。</p>
<p><a href="https://imgchr.com/i/BKFXM6" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKFXM6.md.jpg" alt></a></p>
<p>今年因为疫情也没怎么出过远门骑行，上周末我又进行了一次骑行+露营的尝试，目标是嘉兴平湖市的九龙山景区，准备到海边露营去看一次日出，回程再环个淀山湖，到淀山湖东部看日落。整个行程如下图，周六途经金山区到九龙山景区约80KM+，周日绕淀山湖至上海，行程约120KM+。</p>
<p><a href="https://imgchr.com/i/BKEiKP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKEiKP.png" alt></a></p>
<p>以下为流水账记录，图片较多，不建议在摸鱼时观看。</p>
<p><a href="https://imgchr.com/i/BKPNod" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPNod.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPtdH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPtdH.md.jpg" alt></a></p>
<p>因为周六行程较短，我早10点才出发，一路向南而行。</p>
<p><a href="https://imgchr.com/i/BKP8sO" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKP8sO.md.jpg" alt></a></p>
<p>一路上比较荒凉，都是一些村庄，也没找到吃饭的地方，就在一个加油站里吃了桶泡面。</p>
<p><a href="https://imgchr.com/i/BKPlz6" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPlz6.md.jpg" alt></a></p>
<p>下午1点多到达金山区的城市海滩，游人不太多，我也没进去逛，在外面转了下就走了。</p>
<p><a href="https://imgchr.com/i/BKPdJI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPdJI.md.jpg" alt></a></p>
<p>到嘉兴路上途径一块草坪，我在此处睡了个午觉。</p>
<p><a href="https://imgchr.com/i/BKP6eg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKP6eg.md.jpg" alt></a></p>
<p>下午4点到达九龙山景区，门票40元，上山的路很陡，码表显示的坡度有10%左右，回来看地图大概有七八百米的山坡，骑了一半多点我就干不动了，只得下来推车，我表示这是我骑行生涯来第一次推车。推了几分钟后坡度缓了些我就又继续骑了。</p>
<p>景区里也都很多上下坡路段，忽上忽下，骑的也比较吃力。景区里还有高尔夫球场，我先到海边去逛了下，发现了一个观景平台很适合露营。逛了不多久天色也慢慢暗了下来，我到景区里的一个便利店买了点东西吃，吃过东西天已经完全黑了，我在景区的一个公共厕所里洗漱了下，就又回到海边的观景平台，准备露营。</p>
<p>观景平台在下图箭头所指位置</p>
<p><a href="https://imgchr.com/i/BKfUMT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKfUMT.md.png" alt></a></p>
<p>到了平台之后我发现旁边有一个监控摄像头，我想了下，如果我把帐篷搭在了监控的可视范围内，估计晚上会有工作人员来赶我走。我索性直接把帐篷搭在了监控底下，完全的避开了监控的可视范围。搭好帐篷才晚上7点多，不过我也毫无困意，玩手机到10点多才睡。到了晚上海边有点冷，我看了下当地天气预报最低气温只有10°C，我还带了件稍厚的抓绒外套，穿上之后再加上睡袋，已经感受不到寒意。</p>
<p>到了晚上，海风逐渐变大，海浪声也很大，海风也刮的我的帐篷忽忽作响，我戴了隔音耳塞后才能勉强入睡。因为有月亮，整个天空看不到几颗星星，我定了凌晨1点的闹钟，准备待月亮落下去后出来看星星。</p>
<p><a href="https://imgchr.com/i/BKPaFA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPaFA.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/BKPcwQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPcwQ.md.jpg" alt></a></p>
<p>凌晨1点时，月亮已经落下，我如愿的看到了一些星星，不过人类的光污染还是太多，整个天空被照的有点亮，肉眼实际观感比图片稍暗点，肉眼可见的星星也并不是很多，我还隐隐记得猎户座的形状，并成功拍到了它。<br>下面这几张图是用小米10至尊版+三脚架拍摄的，使用了相机的专业模式，快门调到5S+，ISO调到3200+，经过几次尝试后我就拍出了下面几张照片。手机镜头能拍到星空，已经大大超出了我的预期。</p>
<p><a href="https://imgchr.com/i/BKQvLj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKQvLj.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPBSP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPBSP.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPry8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPry8.md.jpg" alt></a></p>
<p>到了5点半我又爬起来看日出，不过因为云比较多，太阳是从云里面升起来的，我理想中的日出是太阳从海平面上升起，我感觉这种想要看到日出还是比较难的，一年365天，有几天能是万里无云的好天气？我起床后不久一个大叔也来到平台上看日出，大叔是从上海驾车过来的，我们互相给对方拍了一些照片。</p>
<p><a href="https://imgchr.com/i/BKPgoj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPgoj.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPRFs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPRFs.md.jpg" alt></a></p>
<p>大叔看完日出便走了，我也把帐篷收了起来，又到便利店里买了点东西吃，之后向淀山湖进发。</p>
<p><a href="https://imgchr.com/i/BKPfWq" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPfWq.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKP4S0" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKP4S0.md.jpg" alt></a></p>
<p>图为我的露营装备，因为自行车带不了多少东西，我买的都是一些轻量化，且占用体积小的装备，从左到右依次为睡袋、蛋巢垫，铝箔垫(未使用)、充气枕。</p>
<p><a href="https://imgchr.com/i/BKPIyT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPIyT.md.jpg" alt></a></p>
<p>一路上穿过许多村庄，风景美如画。11点钟左右，我在路上碰到一些卖橘子的村民，我买了几个橘子吃，我挑了三个最大个的，才三块钱。吃了两个已经六七分饱，我把另一个装到包里，继续前行。</p>
<p><a href="https://imgchr.com/i/BKPoOU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPoOU.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPHw4" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPHw4.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKP7mF" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKP7mF.md.jpg" alt></a></p>
<p>12点左右到达淀山湖，景色也很好，我到湖边拍了几张照。</p>
<p><a href="https://imgchr.com/i/BKPbTJ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPbTJ.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPOYR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPOYR.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKPXf1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPXf1.md.jpg" alt></a></p>
<p>12点半在淀山湖西部的一个小镇吃饭。</p>
<p><a href="https://imgchr.com/i/BKPvSx" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKPvSx.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKi9mD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKi9mD.md.jpg" alt></a></p>
<p>淀山湖并不是很大，即使是环湖一周也才50KM多点，吃过饭后又骑了个小时左右，我又在一个草坪上睡了一觉，睡到了2点多。到了3点多骑到湖东边，湖东风景也很好，还有几片盛开的花海。</p>
<p><a href="https://imgchr.com/i/BKiC0e" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKiC0e.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKiktA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKiktA.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKiSOO" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKiSOO.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKiFkd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKiFkd.md.jpg" alt></a></p>
<p>之后我躺在湖东的草坪上，静待日落，不过还算因为云的原因，也没看到太阳从地平线处落下的完美日落，稍有些遗憾。魔都想去看日落的同学可以挑一个晴朗的天气前往淀山湖观看，地点在彩虹桥附近。</p>
<p><a href="https://imgchr.com/i/BKiZ1P" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKiZ1P.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKiAfI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKiAfI.md.jpg" alt></a><br><a href="https://imgchr.com/i/BKie6f" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/26/BKie6f.md.jpg" alt></a></p>
]]></content>
      <categories>
        <category>生活记录</category>
      </categories>
      <tags>
        <tag>骑行</tag>
        <tag>游记</tag>
      </tags>
  </entry>
  <entry>
    <title>十一长途骑行回家的尝试</title>
    <url>/2020/10/09/ride-bike-go-hometown/</url>
    <content><![CDATA[<p>长途骑行回家的想法，我很早之前就有了，直到九月十几号我才知道今年国庆竟然有8天假。于是我就退掉了回家的车票，准备尝试一下骑行回家。我老家河南周口市，距离上海700km，计划的是四天骑完，不过因为天气原因只骑了两天，后半程乘的高铁。</p>
<p>骑的还是死飞车，这辆车是两个月前新装好的，整车只有7kg。</p>
<p><a href="https://imgchr.com/i/0rdyAH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rdyAH.md.jpg" alt></a></p>
<p>我之前的骑行经历也算丰富，各种装备也都有，这次我买了一个更香的装备————水袋。我去年买的一个骑行背包正好也有预留的水袋位置，配上水袋之后才是完全体。</p>
<p><a href="https://imgchr.com/i/0raztA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0raztA.md.jpg" alt></a></p>
<p>此次骑行所带的东西不多，两套换洗衣物及一些修车装备(内六角、备用内胎、补胎工具、气筒等)，整车+装备10kg多点。</p>
<p><a href="https://imgchr.com/i/0rcShD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rcShD.md.jpg" alt></a></p>
<p>两天骑行的路线：</p>
<p><a href="https://imgchr.com/i/0rwLIH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rwLIH.md.png" alt></a></p>
<p>两天骑行的流水账我也懒得废话说了，你们可以看下面的视频：</p>
<p><a href="https://www.relive.cc/view/vMv8V4mxJN6" target="_blank" rel="noopener">Relive 2020-10-01骑行</a></p>
<p><a href="https://www.relive.cc/view/vLqe1mB88dq" target="_blank" rel="noopener">Relive 2020-10-02骑行</a></p>
<p>出发的前几天，我每天晚上都会进行50km左右的预热训练，以锻炼恢复能力，让身体适应长途骑行的节奏。1号下午骑至太湖边，路过一处草坪，我拿出准备装车用的垃圾袋铺在草坪上，在湖边睡了半个小时。晚上8点多骑行至丹阳市东部，我找了家旅馆住宿，1号当天骑了198km，腿倒是没什么感觉，还是屁股疼的难受，因为新车的坐垫实在是太硬，也没有和我的屁股磨合好。当晚我去旅馆附件的超市买了一包卫生巾，准备垫在骑行裤里面。垫上卫生巾之后屁股的疼痛稍微缓解了点，我垫了两条，两边大腿与坐垫摩擦的位置各垫一条，垫上之后也能有效防止骑行裤变脏。</p>
<p><a href="https://imgchr.com/i/0r53kR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0r53kR.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/0rghJU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rghJU.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/0rc4KA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rc4KA.md.jpg" alt></a></p>
<p>2号下午6点多骑行至滁州市开始下雨，不得不停止骑行，我在一处临街的店铺下躲雨，雨渐渐大了起来，从屋檐下流下的雨水也四处乱溅，我又拿出垃圾袋，索性整个人坐到了里面，弱小可怜又无助。后面雨小了点，我就找地方吃饭住宿，第二天早上雨还在下，因为雨不是大，我又冒雨骑了10km，后面雨又逐渐变大，我的衣服也湿了一半，后面路过一个加油站时，我就在那个加油站里躲雨并停止了整个骑行计划，把车拆了打车至高铁站，然后乘高铁回家。</p>
<p><a href="https://imgchr.com/i/0rr5kD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rr5kD.md.jpg" alt></a><br><a href="https://imgchr.com/i/0rs2CQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rs2CQ.md.jpg" alt></a></p>
<p><a href="https://imgchr.com/i/0r66pQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0r66pQ.md.jpg" alt></a><br><a href="https://imgchr.com/i/0r6Dk8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0r6Dk8.md.jpg" alt></a><br><a href="https://imgchr.com/i/0r6rtS" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0r6rtS.md.jpg" alt></a></p>
<p>晚上7点半到达我家隔壁市的高铁站，此高铁站距我家还有30km，出了站后我花了20分钟把车装好，继续骑车，夜骑1.5h后平安抵达家中。</p>
<p><a href="https://imgchr.com/i/0rRXxe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/10/09/0rRXxe.md.jpg" alt></a></p>
]]></content>
      <categories>
        <category>生活记录</category>
      </categories>
      <tags>
        <tag>骑行</tag>
        <tag>游记</tag>
      </tags>
  </entry>
  <entry>
    <title>sync-player：使用websocket实现异地同步看视频</title>
    <url>/2020/09/20/%E5%89%8D%E7%AB%AF/sync-player/</url>
    <content><![CDATA[<p>前段时间我有这样一个需求，想和一个异地的人一起看电影，先后在网上找了一些方案，不过那几个方案都有一些缺点</p>
<ul>
<li><p><strong>coplay</strong> 一个浏览器插件，只能播放各大视频网站的视频，视频资源有限，我想要看的视频没有，比如一些经典电影和美剧之类</p>
</li>
<li><p><strong>微光APP</strong> 还是上面的问题，而且只有手机端</p>
</li>
<li><p><strong>向日葵等远程桌面</strong> 受限于网络问题，卡顿很严重，体验不好</p>
</li>
</ul>
<p>除了这几个方案之外我也尝试了直播的方案：</p>
<ul>
<li><p><strong>通过B站等直播平台进行直播，</strong> 缺点：有几十秒的延迟，而且不能保证两端播放进度同步，总会差个几秒，而且直播对上传带宽要求较高。</p>
</li>
<li><p><strong>自建直播平台，</strong>，我首先使用了腾讯云上的<code>云直播</code>解决方案，后来我又在自己的云服务器上使用<code>nginx+rtmp</code>搭建了直播服务，两个方案延迟差不多，大概在5-10秒，但还是无法解决两端视频不同步问题。</p>
</li>
</ul>
<p>作为一个切图仔，对用户体验还是有一定追求的，我是一个下载党，看电影必须下载到本地看，基本不看视频网站上的玩意</p>
<p>那么有没有能实现同步播放本地文件的方案呢，答案是肯定的，经过我的一些摸索和研究，我实现了本地文件的同步播放，同时支持PC和手机端，而且还支持外挂字幕等高级功能，如何实现请往下看。</p>
<h1 id="功能介绍-amp-特性："><a href="#功能介绍-amp-特性：" class="headerlink" title="功能介绍&amp;特性："></a>功能介绍&amp;特性：</h1><p>一个可以同步看视频的播放器，可用于异地同步观影、观剧，支持多人同时观看。<br>本项目有两个版本，web版运行在浏览器上，可跨平台，不限操作系统、设备，功能简单适用于要求不高的用户。还有基于SPlayer(射手影音)DIY的客户端版本(windows、MAC)，播放4K高清文件、外挂字幕，统统没问题。</p>
<h1 id="演示demo"><a href="#演示demo" class="headerlink" title="演示demo:"></a>演示demo:</h1><p>web版同步效果</p>
<p><img src="https://s1.ax1x.com/2020/09/19/wI60je.gif" alt="wI60je.gif"></p>
<p>客户端与web版同步效果</p>
<p><img src="https://s1.ax1x.com/2020/09/20/wofbYd.gif" alt="wofbYd.gif"></p>
<h1 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h1><p>基于websocket实现，与一些用websocket实现的聊天室类似，只不过这个聊天室里的消息换成了播放暂停的动作和时间信息，客户端收到消息后执行相应的动作:播放、暂停、快进，以达到同时播放的效果。</p>
<h1 id="项目所用到的"><a href="#项目所用到的" class="headerlink" title="项目所用到的"></a>项目所用到的</h1><ul>
<li>node.js </li>
<li>socket.io</li>
<li>HTML5 video API </li>
<li>vue.js</li>
</ul>
<h1 id="如何使用："><a href="#如何使用：" class="headerlink" title="如何使用："></a>如何使用：</h1><p>本项目的核心是websocket，所以至少需要一台服务器提供websocket服务，websocket服务可以自己部署，可以使用第三方平台GoEasy提供的websocket服务(可免费使用两个月)。</p>
<p>1、自己部署：websocket服务器可以是一台具有公网IP的云服务器，也可以是一台具有公网IP的普通PC，没有公网IP也可以。你也可以使用zerotier或其他VPN工具将两台设备组成一个大局域网，让它们能互相通信。websocket服务器操作系统不限，只要有node.js环境。</p>
<p>websocket服务端部署方法：安装node.js环境，将server目录移动到服务器上，进入server目录，执行以下命令</p>
<p>安装项目依赖包</p>
<pre class="line-numbers language-bash"><code class="language-bash">
<span class="token comment" spellcheck="true"># 安装项目依赖包</span>

<span class="token function">npm</span> <span class="token function">install</span> 

<span class="token comment" spellcheck="true"># 启动websocket服务</span>

node index.js
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2、使用GoEasy的websocket服务</p>
<p>注册GoEasy开发者账号并创建一个应用，获得appkey，复制到本项目相应位置即可。</p>
<p>GoEasy官网：<a href="https://www.goeasy.io" target="_blank" rel="noopener">https://www.goeasy.io</a></p>
<p>无论是使用哪种websocket服务都可以，本项目写了两套代码，只需将不用的那套注释掉即可(默认GoEasy)。</p>
<p>除了websocket服务器之外，还需要两个http服务端，一个是web服务端(提供html、css、js等文件的访问)，一个是视频服务端(提供视频文件访问)。</p>
<p>你可以将web服务部端署到以下位置：</p>
<ul>
<li>具有公网IP的服务器</li>
<li>github-pages或国内的码云提供的静态web服务</li>
<li>localhost(本地服务器)，同一个局域网内的设备访问该服务器内网IP</li>
</ul>
<p>视频文件只需一个视频地址就行，也有以下几种选择：</p>
<ul>
<li>具有公网IP的服务器</li>
<li>localhost(本地服务器)，同一个局域网内的设备访问该服务器内网IP</li>
<li>第三方视频地址</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/09/17/wfntdU.png" alt="wfntdU.png"></p>
<p>使用场景1：云服务器带宽足够大(至少要大于播放视频的码率)，云服务器既可以作为websocket服务端，也可以作为http服务端。上图中所有设备都访问云服务器的ip或域名。</p>
<p>使用场景2：云服务器的带宽很小，这时候它只能作为websocket服务端，这时可以用上图中的PC1和PC2作为http服务端，PC1和PHONE1在一个内网访问PC1的内网IP，PC2和PHONE2在一个内网访问PC2的内网IP，PC3可作为自己的http服务端，PHONE3若是有提供视频文件的服务端，也可以使用。</p>
<p><img src="https://s1.ax1x.com/2020/09/17/wfnYZT.png" alt="wfnYZT.png"></p>
<p>使用场景3：需要使用zerotier或其他VPN工具将异地设备组成一个大局域网，其中任意一台PC均可作为websocket服务端和http服务端(需要上传带宽足够大)。上图中各设备都访问那台PC的内网ip即可。</p>
<p>最简单的使用方法，下载nginx开启一个本地服务器，下载本项目client文件夹放到到nginx根目录里，视频文件也放到里面。注册goeasy开发者账号并创建一个应用，获得appkey，并填入到appkey到代码(<code>script/main.js</code>)相应位置。然后浏览器打开 <code>192.168.3.58/client/</code>，填入你的视频地址<code>192.168.3.58/movie/xxx.mp4</code>或网络视频地址，对方也这样操作一番，即可实现同步播放视频，不过这种方法只能白嫖两个月。</p>
<p>web版本的功能比较简单，而且受限于网络问题，快进之类的操作需要缓冲一段时间。如果你不满足web版功能，对用户体验有更高的要求，如支持更多文件格式、播放高清本地视频文件、外挂字幕等，我也找到了另一种方式来满足你的需求。</p>
<p>那就是DIY一个开源的播放器的源码：SPlayer(射手影音)。</p>
<p>射手影音官网：<a href="https://splayer.org" target="_blank" rel="noopener">https://splayer.org</a></p>
<p>源码地址：<a href="https://github.com/chiflix/splayerx" target="_blank" rel="noopener">https://github.com/chiflix/splayerx</a></p>
<p>在以<strong>electron + 播放器</strong>为关键字一番搜索之后，我找到了这个基于electron实现的开源播放器，并下载了源码来研究。</p>
<p>经过一番研究之后，我找到了控制视频播放、暂停、快进的代码位置，并将控制同步的代码移植了进去，从而也实现了同步功能，并且与web版兼容。</p>
<p>具体方法请看：<a href="https://github.com/liyang5945/sync-player/blob/master/how-to-modify-splayer.md" target="_blank" rel="noopener">修改教程</a></p>
<p>本项目部分图标样式来源于此项目: <a href="https://github.com/Justineo/coplay" target="_blank" rel="noopener">coplay</a> </p>
<p>本项目github地址：<a href="https://github.com/liyang5945/sync-player" target="_blank" rel="noopener">点击前往</a> ，欢迎⭐⭐⭐STAR⭐⭐⭐</p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>websocket</tag>
      </tags>
  </entry>
  <entry>
    <title>使用粘性定位(position:sticky)实现固定表头、固定列的表格组件(Vue、React)</title>
    <url>/2020/08/15/%E5%89%8D%E7%AB%AF/draggable-fixed-header-table/</url>
    <content><![CDATA[<p>最近重构的项目中有这样一个页面，一个固定表头和列的表格，表格列数较多，大概有60多列，200多条数据，而且表格需要实现拖拽滚动功能。<br>原页面的表格是用的一个比较老旧的表格插件实现，拖拽滚动是用iScroll.js实现的，性能很差，即使每页只有二、三十条数据，拖拽起来也严重卡顿。我首先使用了element-ui自带的的table组件实现了拖拽滚动的功能，性能稍微比老页面强了一点，每页50条数据时卡顿不明显，超过100条数据时有才有卡顿感。然而我对这样的性能也不是很满意，就研究了下el-table固定表头和列的实现方式，发现el-table实现固定列的方式比较坑，它是渲染了两个完整的table，然后把固定列的表格宽度写死绝对定位到左侧部分，把另一个表格盖住来实现的。当数据量较多的时候会非常卡顿。<br>后来我又研究了下ant-design里面的table组件固定列的实现方式，发现ant-design的实现方式跟element-ui不一样，它不是渲染两个table，而是基于一个CSS3属性来实现的，那就是 <code>position: sticky</code>。<br>sticky直译是粘性定位，MDN上是这样介绍的：</p>
<p>元素根据正常文档流进行定位，然后相对它的最近滚动祖先（nearest scrolling ancestor）和 containing block (最近块级祖先 nearest block-level ancestor)，包括table-related元素，基于top, right, bottom, 和 left的值进行偏移。偏移值不会影响任何其他元素的位置。</p>
<p>更多介绍请看：<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/CSS/position</a></p>
<p>然后我就尝试着使用原生html的table的结构和这个css属性实现了固定表头和列的表格组件，并添加了拖拽滚动的效果，首先看下效果：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/drag-table2.gif" alt></p>
<p>性能方面，经测试，每页1000条数据+100列的情况下，也比原来页面的50条流畅的多：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/drag-table3.gif" alt></p>
<p>遇到的坑：<br>滚动时固定行和列的左右边框会消失，我采用伪元素模拟右边框和下边框，并且给最外层容器添加左边框和上边框，<br>而且滚动时还有个莫名奇妙的问题，左边的文字竟然在那边框区域1px像素的区域显示出来一点，如图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/20200810_225413.png" alt></p>
<p>采用模拟边框后这个问题也一并解决了。<br>z-index问题，z-index要从左上角至两边递减，左上角的th要把z-index设的最大，否则滚动时右边的的th和下面的td会把第一个th盖住。</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/20200810_224153.png" alt></p>
<p>td和th宽度问题：当列数较多的时候，我发现即使使用行内样式写死th和td的宽度，它们的宽度也不会生效，这个问题非常蛋疼，我后来使用了一个固定宽度的span元素写在td里面才解决这个问题。</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/20200815_103321.png" alt></p>
<p>性能优化：mousemove事件是高频事件，频繁触发也会造成性能问题，这里我使用lodash的throttle方法进行节流，每60毫秒触发一次，实际使用时请先安装<code>loadsh</code>, npm i lodash </p>
<p>兼容性，只支持较新浏览器，不支持IE:</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/20200815_113828.png" alt></p>
<p>附上vue组件源码,FixedTable.vue，里面有原生html结构和el-table(注释部分)两种写法，使用el-table的话，页面数据超过50条已经有明显的卡顿</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list-page-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>query-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table_wrapper<span class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table-wrapper<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name">
      <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">border-top</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#cccccc</span><span class="token punctuation">;</span> <span class="token property">border-left</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#cccccc</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tbody<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixed-table<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixed-column<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">300</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>序号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span>
              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(columnItem,index) in lebelData<span class="token punctuation">"</span></span>
              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
              <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixedPropList.includes(columnItem.prop)?<span class="token punctuation">'</span>fixed-column<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span>
              <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixedPropList.includes(columnItem.prop)?{
                left:index * 100 + 50 + <span class="token punctuation">'</span>px<span class="token punctuation">'</span>,
                width: <span class="token punctuation">'</span>100px<span class="token punctuation">'</span>,
                zIndex: 2 + (200-index)
              }:{}<span class="token punctuation">"</span></span>
            <span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                {{ columnItem.label }}
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(rowItem,index) in tableData<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixed-column<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span><span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">200</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              {{ index+1 }}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span>
              <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(columnItem,cindex) in lebelData<span class="token punctuation">"</span></span>
              <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cindex<span class="token punctuation">"</span></span>
              <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixedPropList.includes(columnItem.prop)?<span class="token punctuation">'</span>fixed-column<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span><span class="token punctuation">"</span></span>
              <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fixedPropList.includes(columnItem.prop)?{
                left: cindex * 100 + 50 + <span class="token punctuation">'</span>px<span class="token punctuation">'</span>,
                width: <span class="token punctuation">'</span>100px<span class="token punctuation">'</span>,
                zIndex: 1 + (100-cindex)
              }:{}<span class="token punctuation">"</span></span>
            <span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                {{ rowItem[columnItem.prop] }}
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>
      <span class="token comment" spellcheck="true">&lt;!--&lt;el-table
        ref="drag_table"
        class="drag-table"
        :data="tableData"
        size="mini"
        border
        :height="tableHeight"
      >
        &lt;el-table-column
          type="index"
          fixed
          align="center"
          label="序号"
          width="50"
        />
        &lt;el-table-column
          v-for="(columnItem,index) in lebelData"
          :key="index"
          align="center"
          :fixed="fixedPropList.includes(columnItem.prop)"
          :prop="columnItem.prop"
          :label="columnItem.label"
          width="90"
        />
      &lt;/el-table>--></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list-page-footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      共{{ tableData.length }}条数据
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">

<span class="token keyword">import</span> <span class="token punctuation">{</span> throttle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span>

<span class="token comment" spellcheck="true">/* 生成表格数据*/</span>
<span class="token keyword">function</span> <span class="token function">generateTableData</span><span class="token punctuation">(</span>listLength<span class="token punctuation">,</span> columnLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> listLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> columnLength<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">[</span><span class="token string">'label'</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'*'</span> <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">/* 生成表格列数据*/</span>
<span class="token keyword">function</span> <span class="token function">generateLabelData</span><span class="token punctuation">(</span>labelLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> labelLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
      label<span class="token punctuation">:</span> <span class="token string">'列'</span> <span class="token operator">+</span> i<span class="token punctuation">,</span>
      prop<span class="token punctuation">:</span> <span class="token string">'label'</span> <span class="token operator">+</span> i
    <span class="token punctuation">}</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'FixedTable'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>

      tableData<span class="token punctuation">:</span> <span class="token function">generateTableData</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      lebelData<span class="token punctuation">:</span> <span class="token function">generateLabelData</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      tableHeight<span class="token punctuation">:</span> <span class="token number">700</span><span class="token punctuation">,</span>
      fixedPropList<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'label1'</span><span class="token punctuation">,</span>
        <span class="token string">'label2'</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 固定列数据</span>
      clickPointX<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 鼠标按下时的坐标</span>
      clickPointY<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 鼠标按下时的坐标</span>
      scrollLeft<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 鼠标按下时容器的滚动距离</span>
      scrollTop<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 鼠标按下时容器的滚动距离</span>
      table_wrapper<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token comment" spellcheck="true">// 滚动容器(表格父元素)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDraggable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>

    <span class="token function">setDraggable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// el-table组件写法</span>
      <span class="token comment" spellcheck="true">// const table = this.$refs.drag_table</span>
      <span class="token comment" spellcheck="true">// const table_wrapper = table.$el.querySelector('.el-table__body-wrapper')</span>
      <span class="token comment" spellcheck="true">// const tbody = table.$el.querySelector('.el-table__body-wrapper tbody')</span>
      <span class="token comment" spellcheck="true">//</span>
      <span class="token comment" spellcheck="true">// 原生table写法</span>
      <span class="token keyword">const</span> tbody <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>tbody
      <span class="token keyword">const</span> table_wrapper <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>table_wrapper

      <span class="token keyword">this</span><span class="token punctuation">.</span>table_wrapper <span class="token operator">=</span> table_wrapper

      tbody<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> evt <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'鼠标按下'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> table_wrapper<span class="token punctuation">.</span>scrollLeft
        <span class="token keyword">this</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> table_wrapper<span class="token punctuation">.</span>scrollTop
        <span class="token keyword">this</span><span class="token punctuation">.</span>clickPointX <span class="token operator">=</span> evt<span class="token punctuation">.</span>x
        <span class="token keyword">this</span><span class="token punctuation">.</span>clickPointY <span class="token operator">=</span> evt<span class="token punctuation">.</span>y
        tbody<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      tbody<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> evt <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        tbody<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      tbody<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> evt <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        tbody<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> moveHandler <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>event <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'鼠标移动'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// 我将表格滚动距离设置为鼠标移动距离的3倍，可根据实际情况设置成别的数值</span>
        <span class="token keyword">const</span> newX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollLeft <span class="token operator">-</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickPointX<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span>
        <span class="token keyword">const</span> newY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollTop <span class="token operator">-</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clickPointY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>table_wrapper<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span>newX<span class="token punctuation">,</span> newY<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>之前看过不少文章说react在性能方面会比vue强不少，我简单学习了下react，用react也顺利实现了这个功能，react源码也一并附上，FixedTable.js:</p>
<pre class="line-numbers language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> throttle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span>

<span class="token keyword">class</span> <span class="token class-name">FixedTable</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fixedColumns <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token string">'label1'</span><span class="token punctuation">,</span>
      <span class="token string">'label2'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      tableData<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">generateTableData</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      labelData<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">generateLabelData</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>table_wrapper <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setDraggable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setDraggable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper_node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>table_wrapper<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    <span class="token keyword">let</span> scrollLeft <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> clickPointX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> clickPointY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    wrapper_node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousedown"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"鼠标按下"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      scrollLeft <span class="token operator">=</span> wrapper_node<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>
      scrollTop <span class="token operator">=</span> wrapper_node<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
      clickPointX <span class="token operator">=</span> evt<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
      clickPointY <span class="token operator">=</span> evt<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
      wrapper_node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    wrapper_node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mouseup"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      wrapper_node<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    wrapper_node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mouseleave"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      wrapper_node<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    wrapper_node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dragend"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      wrapper_node<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> moveHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> moveHandler <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>event <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"moveHandler 触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment" spellcheck="true">// 我将表格滚动距离设置为鼠标移动距离的3倍，可根据实际情况设置成别的数值</span>
      <span class="token keyword">const</span> newX <span class="token operator">=</span> scrollLeft <span class="token operator">-</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>x <span class="token operator">-</span> clickPointX<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newY <span class="token operator">=</span> scrollTop <span class="token operator">-</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>y <span class="token operator">-</span> clickPointY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
      wrapper_node<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span>newX<span class="token punctuation">,</span> newY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">generateTableData</span><span class="token punctuation">(</span>listLength<span class="token punctuation">,</span> columnLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> listLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> columnLength<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">[</span><span class="token string">"label"</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">"*"</span> <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">/* 生成表格列数据*/</span>
  <span class="token function">generateLabelData</span><span class="token punctuation">(</span>labelLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> labelLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        label<span class="token punctuation">:</span> <span class="token string">"列"</span> <span class="token operator">+</span> i<span class="token punctuation">,</span>
        prop<span class="token punctuation">:</span> <span class="token string">"label"</span> <span class="token operator">+</span> i
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token string">"table-wrapper"</span><span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
        maxHeight<span class="token punctuation">:</span> <span class="token string">'800px'</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>table_wrapper<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token string">"fixed-table"</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token string">'fixed-column'</span><span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              zIndex<span class="token punctuation">:</span> <span class="token number">300</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  display<span class="token punctuation">:</span> <span class="token string">'inline-block'</span><span class="token punctuation">,</span>
                  width<span class="token punctuation">:</span> <span class="token string">'50px'</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>序号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
            <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>labelData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>columnItem<span class="token punctuation">,</span> columnItemIndex<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>columnItemIndex<span class="token punctuation">}</span></span>
                  <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fixedColumns<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>columnItem<span class="token punctuation">.</span>prop<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'fixed-column'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span></span>
                  <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fixedColumns<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>columnItem<span class="token punctuation">.</span>prop<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span>
                    left<span class="token punctuation">:</span> columnItemIndex <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>
                    width<span class="token punctuation">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span>
                    zIndex<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">-</span> columnItemIndex<span class="token punctuation">)</span>
                  <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  display<span class="token punctuation">:</span> <span class="token string">'inline-block'</span><span class="token punctuation">,</span>
                  width<span class="token punctuation">:</span> <span class="token string">'100px'</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
                  <span class="token punctuation">{</span>columnItem<span class="token punctuation">.</span>label<span class="token punctuation">}</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>tableData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> itemIndex<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>itemIndex<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token string">'fixed-column'</span><span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                zIndex<span class="token punctuation">:</span> <span class="token number">200</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  display<span class="token punctuation">:</span> <span class="token string">'inline-block'</span><span class="token punctuation">,</span>
                  width<span class="token punctuation">:</span> <span class="token string">'50px'</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>序号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
              <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>labelData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>columnItem<span class="token punctuation">,</span> columnItemIndex<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>columnItemIndex<span class="token punctuation">}</span></span>
                    <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fixedColumns<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>columnItem<span class="token punctuation">.</span>prop<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'fixed-column'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fixedColumns<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>columnItem<span class="token punctuation">.</span>prop<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span>
                      left<span class="token punctuation">:</span> columnItemIndex <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>
                      width<span class="token punctuation">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span>
                      zIndex<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">-</span> columnItemIndex<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                    display<span class="token punctuation">:</span> <span class="token string">'inline-block'</span><span class="token punctuation">,</span>
                    width<span class="token punctuation">:</span> <span class="token string">'100px'</span>
                  <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
                    <span class="token punctuation">{</span>item<span class="token punctuation">[</span>columnItem<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">}</span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
              <span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FixedTable<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面是样式文件,fixed-table.sass:</p>
<pre class="line-numbers language-sass"><code class="language-sass"><span class="token number">.</span><span class="token selector">table-wrapper</span>
<span class="token property-line">    <span class="token property">-webkit-touch-callout</span><span class="token punctuation">:</span> none</span>
<span class="token property-line">    <span class="token property">-webkit-user-select</span><span class="token punctuation">:</span> none</span>
<span class="token property-line">    <span class="token property">-khtml-user-select</span><span class="token punctuation">:</span> none</span>
<span class="token property-line">    <span class="token property">-moz-user-select</span><span class="token punctuation">:</span> none</span>
<span class="token property-line">    <span class="token property">-ms-user-select</span><span class="token punctuation">:</span> none</span>
<span class="token property-line">    <span class="token property">user-select</span><span class="token punctuation">:</span> none</span>
<span class="token property-line">    <span class="token property">max-height</span><span class="token punctuation">:</span> 800px</span>
<span class="token property-line">    <span class="token property">overflow</span><span class="token punctuation">:</span> auto</span>
    <span class="token number">.</span><span class="token selector">fixed-table</span>
<span class="token property-line">        <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse</span>
<span class="token property-line">        <span class="token property">table-layout</span><span class="token punctuation">:</span> fixed</span>
        <span class="token selector">th, td</span>
<span class="token property-line">            <span class="token property">text-align</span><span class="token punctuation">:</span> center</span>
<span class="token property-line">            <span class="token property">font-size</span><span class="token punctuation">:</span> 12px</span>
<span class="token property-line">            <span class="token property">color</span><span class="token punctuation">:</span> #666</span>
<span class="token property-line">            <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0</span>
<span class="token property-line">            <span class="token property">position</span><span class="token punctuation">:</span> relative</span>
<span class="token property-line">            <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token property">after</span></span>
<span class="token property-line">                <span class="token property">content</span><span class="token punctuation">:</span> </span><span class="token string">''</span>
<span class="token property-line">                <span class="token property">display</span><span class="token punctuation">:</span> block</span>
<span class="token property-line">                <span class="token property">width</span><span class="token punctuation">:</span> 1px</span>
<span class="token property-line">                <span class="token property">height</span><span class="token punctuation">:</span> 100<span class="token operator">%</span></span>
<span class="token property-line">                <span class="token property">background-color</span><span class="token punctuation">:</span> #cccccc</span>
<span class="token property-line">                <span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
<span class="token property-line">                <span class="token property">right</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">                <span class="token property">top</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">            <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token property">before</span></span>
<span class="token property-line">                <span class="token property">content</span><span class="token punctuation">:</span> </span><span class="token string">''</span>
<span class="token property-line">                <span class="token property">display</span><span class="token punctuation">:</span> block</span>
<span class="token property-line">                <span class="token property">width</span><span class="token punctuation">:</span> 100<span class="token operator">%</span></span>
<span class="token property-line">                <span class="token property">height</span><span class="token punctuation">:</span> 1px</span>
<span class="token property-line">                <span class="token property">background-color</span><span class="token punctuation">:</span> #cccccc</span>
<span class="token property-line">                <span class="token property">position</span><span class="token punctuation">:</span> absolute</span>
<span class="token property-line">                <span class="token property">left</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">                <span class="token property">bottom</span><span class="token punctuation">:</span> 0</span>
            <span class="token selector">&amp;</span><span class="token number">.</span><span class="token selector">fixed-column</span>
<span class="token property-line">                <span class="token property">position</span><span class="token punctuation">:</span> sticky</span>
<span class="token property-line">                <span class="token property">background-color</span><span class="token punctuation">:</span> #eeeeee</span>
        <span class="token selector">th</span>
<span class="token property-line">            <span class="token property">position</span><span class="token punctuation">:</span> sticky</span>
<span class="token property-line">            <span class="token property">top</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">            <span class="token property">z-index</span><span class="token punctuation">:</span> 3</span>
<span class="token property-line">            <span class="token property">background-color</span><span class="token punctuation">:</span> #eeeeee</span>
<span class="token property-line">            <span class="token property">font-weight</span><span class="token punctuation">:</span> bold</span>
<span class="token property-line">        <span class="token property">th</span><span class="token punctuation">:</span><span class="token property">first-child</span></span>
<span class="token property-line">            <span class="token property">position</span><span class="token punctuation">:</span> sticky</span>
<span class="token property-line">            <span class="token property">left</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">            <span class="token property">top</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">            <span class="token property">z-index</span><span class="token punctuation">:</span> 4</span>
<span class="token property-line">        <span class="token property">td</span><span class="token punctuation">:</span><span class="token property">first-child</span></span>
<span class="token property-line">            <span class="token property">position</span><span class="token punctuation">:</span> sticky</span>
<span class="token property-line">            <span class="token property">left</span><span class="token punctuation">:</span> 0</span>
<span class="token property-line">            <span class="token property">z-index</span><span class="token punctuation">:</span> 3</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>顺便附上一个el-table高度自适应的mixin组件，可以实现窗口变化时也能自适应高度，如下效果：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/fixed-table/resize-table1.gif" alt></p>
<p>ListPageResizeHandler.js</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> throttle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      tableHeight<span class="token punctuation">:</span> <span class="token number">700</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> observeContainer <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>entries <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>entry <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> cr <span class="token operator">=</span> entry<span class="token punctuation">.</span>contentRect
        <span class="token keyword">this</span><span class="token punctuation">.</span>tableHeight <span class="token operator">=</span> cr<span class="token punctuation">.</span>height
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> leading<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResizeObserver</span><span class="token punctuation">(</span>observeContainer<span class="token punctuation">)</span>
    observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>table_wrapper<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$once</span><span class="token punctuation">(</span><span class="token string">'hook:beforeDestroy'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用方法:引入文件并在vue组件里声明 </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
<span class="token comment" spellcheck="true">&lt;!--....--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token punctuation">></span></span><span class="token script language-javascript">

<span class="token keyword">import</span> ListPageResizeHandler <span class="token keyword">from</span> <span class="token string">'@/mixin/ListPageResizeHandler'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token comment" spellcheck="true">//....</span>

mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>ListPageResizeHandler<span class="token punctuation">]</span><span class="token punctuation">,</span>

<span class="token comment" spellcheck="true">//....</span>

<span class="token punctuation">}</span>

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p style="visibility: hidden;">
<span>可拖拽表格</span>
<span>可拖拽的表格</span>
<span>拖拽的表格</span>
<span>拖拽滚动表格</span>
<span>拖拽滚动</span>
<span>表格固定表头</span>
<span>表格固定列</span>
</p>

]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>react</tag>
        <tag>CSS</tag>
        <tag>表格</tag>
      </tags>
  </entry>
  <entry>
    <title>重拾DIY的乐趣，手工打造一台三屏移动工作站</title>
    <url>/2020/05/30/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/</url>
    <content><![CDATA[<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200529_122652.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200529_122159.jpg" alt></p>
<p>首先展示下最终效果图，就是这么个玩意，一台联想笔记本+两台便携显示器，笔记本屏幕为15.6，右边那台稍大的显示器尺寸为17.3。左边的显示器的通过铰链和机身连接，可以不用拆下来与机身一起携带，右边那台配合显示器底座使用，不过也能拆卸下单独携带，拧下几个螺丝即可，也不是很麻烦。</p>
<p>做这个玩意能干啥？作为前端er来说，用单屏开发是一件比较蛋疼的事情，前端在日常开发时，需要同时打开IDE、设计图、浏览器、浏览器调试工具等多个窗口，在写代码时需要实时预览CSS效果或调试JS，单屏开发的话效率非常低，需要频繁的切换窗口而浪费大量时间和精力。我现在的工作是重构一个老项目，需要打开两个单独的浏览器页面，两个调试工具，两个IDE窗口，有时候还需要再开一个浏览器窗口查东西，两个IDE还要对比代码，六七个窗口在一个屏幕上切来切去非常痛苦，所以多屏是很必要的，能大幅提高开发效率。</p>
<p>先来说下这台电脑，这台笔记本型号为联想w520，来源闲鱼，具体配置为CPU i7 2860QM + 12GB RAM + Qurdro 2000M 2G显卡 + 240G SSD，对为一个前端er来说配置完全够用。为什么买这个玩意是嫌弃公司给配的电脑太垃圾，由于4月份刚换了工作，刚入职时公司给配了一台联想t420，用了两天卡的我差点哭出声来……，我一看硬盘简直惊呆了，在0202年我竟然还能用到一块SATA2接口、最快读取速度为30M/s的古董级硬盘，用惯了nvme ssd哪还能受这种苦。然后我就准备买台二手的笔记本先用下，在闲鱼上随便翻了几下就看到这台机器，曾经上万元的旗舰级专业工作站，现在沦落为白菜价，只要￥1500，我跟卖家简单聊了几句就下单了。</p>
<p>收到之后，先给它来个大保健，拆机清灰换硅脂：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200418_090052.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_090125.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_091331.jpg" alt></p>
<p>清灰前后风扇和散热鳍片对比：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_094106.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_094230.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_094546.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_100559.jpg" alt></p>
<p>清灰之后，散热改善很多，之前cpu待机温度60+，动不动飙到90+，清灰后开机温度30+，烤机温度不超过85。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200419_101543.jpg" alt></p>
<p>后来我又了解到联想THINKPAD系列还有一种扩展坞配件，接在机身下面，可以扩展很多接口。然后又在闲鱼上买了个扩展坞，装上之后扩展性媲美台式机：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/%E6%89%A9%E5%B1%95%E5%9D%9E%E6%8E%A5%E5%8F%A3%E5%9B%BE.jpg" alt></p>
<p>下面说说显示器，电脑折腾完毕后我就开始折腾显示器，我最初的想法是给我的p775升级一块144hz屏幕，然后把换下来的屏制成一块便携显示器，后来由于这个方案成本太高只好作罢。15.6的那块屏在是17.3寸的制作完成后才买的，原因是我觉得双屏还不过瘾，就酝酿了一个big plan，再做一台15.6的显示器通过铰链装到机身上，实现便携双屏。</p>
<p>后面就开始物色各种配件，首先是外壳。对于DIY来说，要做一个东西，实现功能是比较简单的，最困难的部分是外壳，因为个人设备有限，很难制出成品级的外壳。我也看了一些淘宝上的便携显示器DIY套件和外壳，大部分都是一种公模的铝合金外壳，如下图，</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/%E5%85%AC%E6%A8%A1%E5%A4%96%E5%A3%B3.jpg" alt></p>
<p>我感觉外观有点土，再加上跑马边框，实在激不起我的购买欲。 而且它们的接口都是在左右两侧，无法达到无缝三屏效果。</p>
<p>后来我想到了一个骚操作，找一款颜值高的笔记本上半身做外壳，经过各种对比之后，最终选择了微星GS65+GS75的外壳，然后在淘宝上购买。</p>
<p>然后是驱动板，此款驱动板也是在闲鱼购买，卖家也是在上海。我p755的屏幕是120hz的，问了卖家后他说不确定能不能点亮120hz。我决定去卖家那里测试一下能不能点亮，在一个周六下午我把笔记本屏幕拆下来拿去卖家那里测试，结果比较失望，并不能点亮。不过我还是买了他一块驱动板，准备再买个60hz普通屏做显示器，原因是120hz的驱动板有点贵，一块都要300+，写个代码用120hz也没什么意义，升级144hz的计划也就此作罢。</p>
<p>这两台显示器的屏幕也均为闲鱼购买，17.3的屏幕为京东方NV173FHM-N4C，15.6寸的屏幕为群创N156HCA-GA3，均为IPS 60HZ 72%NTSC色域，淘这两块屏幕也花费了很多精力和时间。这两块屏都是超薄屏，四角也没有没有固定用的耳朵，可以适配上面两款笔记本的外壳，下面是屏幕参数：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/20200524_112544.png" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/20200524_112656.png" alt></p>
<p>屏幕下单之后，我开始思考怎么让驱动板和外壳固定在一起，后来我在淘宝上看到一种亚克力驱动板外壳，而且可以定制。就决定用亚克力板定制一个盒子，四个角预留开孔用来连接显示器支架，然后粘在显示器后面。在测量过电路板尺寸后，我先在纸上绘制了盒子草图，之后绘制电子版，在淘宝上定制。盒子定制好之后，由于测量精度原因，下面的挡板开口尺寸不是很精确，部分孔位有点偏小。后来通过打磨后解决，不过打磨后变的像狗啃的一样，实际装上后看不出来。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200422_203056.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200427_192920.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200510_201408.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200510_201645.jpg" alt></p>
<p>这个亚克力板的盒子最后还是被我弃用了，因为我发现了一种更好的材料：碳纤维板。后面我又给15.6寸屏的驱动板设计了一种单独使用的小型外壳，见下图，挡板开孔尺寸也修复了，很完美。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200510_115713.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_154534.jpg" alt></p>
<p>下面是两个碳纤维驱动板盒子，有没有一种极客风格？</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_164523.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200527_204922.jpg" alt></p>
<p>又在淘宝上陆续购入一堆螺丝螺母，那几个稍大些的螺丝是给自行车用的，在同家店顺便买的。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200512_213116.jpg" alt></p>
<p>外壳+屏幕都到货后，我简单测试了下，这块屏与我p775自带的屏比起来，颜色没有那么鲜艳，但是对比度和可是角度比前者好。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200428_214332.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200428_214349.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200428_214620.jpg" alt></p>
<p>第二天我就把屏幕装进去拿到公司去用了，因为我实在受不了单屏了，这时候还没买显示器底座和笔记本支架，驱动板外壳也没到，先这样凑合用了几天。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200429_084007.jpg" alt></p>
<p>后面15.6的屏和外壳也到了，测试下type-c一线通功能，完全OJBK：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200512_195213.jpg" alt></p>
<p>为了给笔记本机身钻孔以及后续切割碳纤维板，我又买了一款小型电钻，到手后发现这玩意只能算玩具级别，实际体验非常差，钻孔同心度差，功率也偏小，后面在给碳纤维钻孔时经常会卡住不转，不过最后还是帮我完成了任务。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_103647.jpg" alt></p>
<p>下面说铰链，铰链是我花了最多精力折腾的部件，我先后在淘宝上买了3种铰链，先看前两种：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200523_140232.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200523_145739.jpg" alt></p>
<p>第一种是一些门窗上用的铰链，俗称合页，到货之后发现根本不可用，其实也不是不可用，只是不能通过打孔的方法连接，因为它的孔位宽度太大，超过了显示器边框宽度，这样孔位会在液晶屏下方，而液晶屏下方与外壳是紧密连接没有一丝缝隙的，无法通过螺丝连接，所以这种合页只能通过用胶水粘接的方式连接，稳定性堪忧，而且这种合页是没有阻尼的，所以弃用。</p>
<p>第二种我买了两对，大小各一对。这种是有阻尼的铰链，实际阻尼非常大，小的那对用手是掰不开的，大的那对用手勉强可以掰开。而且连接处面积太小，也只好弃用。</p>
<p>第三种是我自制的铰链，我记得联想yoga这款笔记本可以360度旋转，我仔细研究了它的铰链构造，这种铰链的主要构造是两个转轴，通过两个转轴才能实现360度旋转。我又买了几个下面图中的的转轴，准备自己做两个类似结构的铰链。到手后发现如何把它们连接到一起是一个不小的困难，我最初的设想是中间通过碳纤维板连接，用螺丝固定。后又购入一块200*250mm的碳纤维板，厚度是一毫米，碳纤维板到了之后发现转轴实在太小，而且固定螺丝都也要占很大空间。经过仔细思索之后，最后的方案是焊接，中间用金属片把它们焊接起来。金属片我就地取材用了一片美工刀片，实际焊接中也没有什么困难，刀片和转轴都能顺利上锡。</p>
<p>铰链制作过程:</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_140812.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_141736.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_143439.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200519_210538.jpg" alt></p>
<p>铰链完成，下面就是把屏幕与机身连接到一起了，机身和屏幕都是通过碳纤维板与铰链连接起来的。</p>
<p>连接外壳也花了很大功夫，由于外壳左右两侧边框实在太窄，无法钻孔，只能在顶部和底部钻孔。顶部边框也很窄只有7mm左右，只能用这种注塑螺母连接，我买的这种注塑螺母是4mm高的，没想到由于外壳太薄连4mm都放不下，切掉一半后才能装上：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200517_173950.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200519_195257.jpg" alt></p>
<p>外壳底部钻孔前需要把黑色塑料清理掉，我是用烙铁烫掉的：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_172415.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_174659.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200517_173927.jpg" alt></p>
<p>下面是给笔记本机身钻孔，钻的时候我并没有将A壳单独拆下而是直接钻的。这款机器边框虽然很大，但实际内部空间很有限，有各种排线等，我找了两个比较合适的位置钻孔：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200519_203037.jpg" alt></p>
<p>后面切割碳纤维板是一个脏活，切割过程中会产生大量黑色粉末，一顿操作猛如虎，我的手变成了这样：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200517_155649.jpg" alt></p>
<p>连接成功后，先开机试下效果:</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200518_210813.jpg" alt> </p>
<p>开始我将屏幕接到了右边，不过由于大意，我没有开屏显示就钻孔了，导致两块屏上下没有对齐，差了约有2mm。强迫症表示很难受，于是我又把屏装到了左边，这次终于舒服了，上下丝毫不差，不过蛋疼的是这两块屏色差有点大，这点没办法只能忍了。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_151112.jpg" alt></p>
<p>如果你担心焊锡和碳纤维板的强度不够，下图会证明它的强度，即使是承受2.5Kg的机身重量也是毫无压力。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_081834.jpg" alt></p>
<p>装好后屏幕可以转到笔记本屏幕稍微前面一点，这样可以把铰链隐藏在后面，减少两块屏幕之间的间距。我费尽心思做这个铰链也是为了实现这个目的，屏幕可以使用移动电源供电。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_085955.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_130733.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_130318.jpg" alt></p>
<p>合上后如图，装包携带也毫无压力：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200529_122926.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200524_152922.jpg" alt></p>
<p>上面连接的是15.6的屏，17.3的那块我本来准备接到机身右边的，后来发现该机本身的显示器接口只有两个，DP+VGA，因为我用的这款显示器驱动板只支持mini HDMI或type-c视频输入，DP接口可以转为HDMI，而VGA则不可以，所以不带扩展坞的情况下只能实现单屏扩展。于是就把另一块屏做成了一台正常的显示器。底座我买了两个，第一个底座花费￥35，来源淘宝，不过实际做工不咋地，后面我就拿回家放在家里用了。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200511_113807.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200511_083553.jpg" alt></p>
<p>17寸显示器最终成品，本来我打算在外壳后面钻孔以通过排线，不过最后还是没有忍心下手切割钻孔，就让排线裸漏在外算了，反正放后面也没人看见。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200528_082354.jpg" alt></p>
<p>下面这个显示器底座是闲鱼上买的，花费￥50，是一款惠普显示器底座，可以升降旋转。到手后发现底座处并没有那种10*10cm的开孔。这也难不倒咱，于是我又画了一张连接板孔位图纸，去打印店1：1打印粘在上面，然后在大街上找了个加工门窗的店，让他们帮我钻孔，花费￥15。底座打孔完毕后，我连上PS4试了下，效果还OK，以后可以躺在床上玩PS4了。不过因为显示器重量太轻，抵消不了上下滑轨处的弹簧反作用力(至少需要5Kg才能抵消)，上下调节功能就失效了，不我也想到了一种变通的方法，滑轨最上面塞个东西挡住就行了，我先用按键板凑合下。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_122941.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200516_122915.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200527_171041.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200517_113710.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200517_113756.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200529_121836.jpg" alt></p>
<p>因为此款驱动板的供电接口也是type-c接口，我手头上也没有很长的type-数据线，我之前倒是屯了不少安卓的数据线，都是供电线非常粗壮的那种，就准备把几个安卓数据线改成type-c的。于是又买了几个type-c的接头，制作了几根type-c数据线：</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200522_201121.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200522_201154.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200522_203809.jpg" alt></p>
<p>粗壮的供电线</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200522_205817.jpg" alt></p>
<p>完成后如图。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E4%B8%89%E5%B1%8F%E5%B7%A5%E4%BD%9C%E7%AB%99%E6%8A%98%E8%85%BE%E8%AE%B0/IMG_20200522_213510.jpg" alt></p>
<p>此款驱动板支持5-15V宽电压供电，经过测量，此款驱动板运行在5V电压时电流大概是1-1.6A，一般电脑USB接口最大电流只有0.5A，必须使用5V2A以上电源供电，如果使用5V供电的话需要两个电源适配器，后来我嫌麻烦又买了个qc3.0诱骗器，接到一个24W的qc3.0充电器上，将电压诱骗到12V进行输出，再用一分二USB扩展头，供电问题也完美解决。</p>
<p>结语：一切都折腾完毕，终于可以愉快的写代码了。此次折腾耗时一个多月，这一个多月每天都忙成狗，白天在公司写代码，画图纸切割钻孔这些工作都是在晚上和周末弄的，选购螺丝配件什么的也花了很多精力，不过最后完成的时候也是成就感满满。由于这款笔记本是2011年发布的，年代实在太过久远，实际使用时还偶尔还是会有些卡顿，在使用webstorm时，代码提示有时会反应比较慢。我准备让它服役半年左右，然后买一台AMD锐龙4000系处理器的笔记本当主力开发机，到时候再把这些玩意拆掉弄到新机器上，新的连接方式我脑海里已经有了蓝图，更加方便，不用钻孔，几个月之后再折腾吧。</p>
]]></content>
      <categories>
        <category>其他分享</category>
      </categories>
      <tags>
        <tag>DIY</tag>
        <tag>三屏工作站</tag>
        <tag>便携显示器</tag>
      </tags>
  </entry>
  <entry>
    <title>小米手机刷MIUI国际版折腾记录</title>
    <url>/2020/04/07/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/%E5%B0%8F%E7%B1%B3%E6%89%8B%E6%9C%BA%E5%88%B7MIUI%E5%9B%BD%E9%99%85%E7%89%88%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>本人现在使用的是一部红米NOTE5，配置是高通骁龙636+6G+64G，之前用的系统都是MIUI9，一直都没更新过，最近更新了MIUI11，就准备升级一下，更新了国行的系统之后发现广告太多实在受不了。就刷了个MIUI国际版，记录一下折腾的过程。</p>
<p>MIUI国际版优点：广告较少，带有谷歌服务框架。</p>
<h4 id="解锁bootloader"><a href="#解锁bootloader" class="headerlink" title="解锁bootloader"></a>解锁bootloader</h4><p>具体教程可参官网文章:<a href="https://www.xiaomi.cn/post/17982230" target="_blank" rel="noopener">小米手机解锁 Bootloader 教程和常见问题</a>，新手机的话需要登上小米账号等半个月左右。</p>
<h4 id="刷入TWRP-recovery"><a href="#刷入TWRP-recovery" class="headerlink" title="刷入TWRP recovery"></a>刷入TWRP recovery</h4><p>官网地址<a href="https://twrp.me/" target="_blank" rel="noopener">https://twrp.me/</a>。<br>按手机电源+音量下键进入fastboot模式，使用fastboot刷入recovery。下面是一些fastboot命令：</p>
<pre class="line-numbers language-cmd"><code class="language-cmd">fastboot devices            :列出fastboot设备
fastboot reboot                :重启设备
fastboot reboot-bootloader        :重启到fastboot模式
fastboot flash ^<分区名称^> ^<镜像文件名^>    :刷写分区
fastboot oem reboot-^<模式名称^>         :重启到相应模式
fastboot oem device-info         :查看解锁状态<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>刷入recovery命令为 <code>fastboot flash recovery  XXXX.img</code> ，刷写完成后执行<code>fastboot reboot</code>进行重启，手机黑屏时要快速按住电源键+音量上键，大概3~5秒就进入recovery模式。</p>
<h4 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h4><p>刷机包从官网下载稳定版即可,<a href="http://c.mi.com/miuidownload/index" target="_blank" rel="noopener">国际版MIUI下载地址</a>，这里有个坑就是MIUI11的安卓版本是9，安卓9的data分区是启用强制加密的，再次进入recovery时就会提示解锁data分区，让输入密码，并且密码也不是锁屏密码，这个坑后来导致我手机资料全清，如何取消强制加密后面会说。</p>
<p>刷完机还有个坑就是官方系统会在重启时将第三方recovery替换掉，等下系统初始化完成后，再刷一遍TWRP recovery，重启时会有禁止恢复官方recovery的选项。</p>
<h4 id="ROOT系统"><a href="#ROOT系统" class="headerlink" title="ROOT系统"></a>ROOT系统</h4><p>最新的安卓ROOT工具是Magisk: <a href="https://github.com/topjohnwu/Magisk/releases" target="_blank" rel="noopener">Magisk gitHub发布地址</a>，下载zip安装包，跟刷机一样，用recovery刷入，刷完后手机里会出现Magisk Manager APP(ROOT权限管理工具)。</p>
<h4 id="安装edxposed框架"><a href="#安装edxposed框架" class="headerlink" title="安装edxposed框架"></a>安装edxposed框架</h4><p>这里要安装两个插件：Riru-core和Riru-EdXposed。可以在Magisk Manager里面搜索下载安装，也可以手动下载zip包用Magisk Manager安装。Riru-EdXposed一般选择YAHFA版本(稳定版)。</p>
<p><a href="https://github.com/RikkaApps/Riru/releases" target="_blank" rel="noopener">Riru-Core github发布地址</a><br><a href="https://github.com/ElderDrivers/EdXposed/releases" target="_blank" rel="noopener">Riru-EdXposed github发布地址</a></p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/MIUI%E5%9B%BD%E9%99%85%E7%89%88%E6%8A%98%E8%85%BE/1.jpg" alt></p>
<p>然后安装EdXposed Manager APP：<a href="https://github.com/ElderDrivers/EdXposedManager/releases" target="_blank" rel="noopener">github发布地址</a>。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/MIUI%E5%9B%BD%E9%99%85%E7%89%88%E6%8A%98%E8%85%BE/2.jpg" alt></p>
<p>安装好之后就能可以在里面下载你想要的xposed模块了,这里要注意要装完edxposed框架再安装EdXposed Manager。</p>
<h4 id="卸载内置软件"><a href="#卸载内置软件" class="headerlink" title="卸载内置软件"></a>卸载内置软件</h4><p>卸载内置软件方法有多种，这里我在PC端使用adb命令进行卸载：</p>
<p>首先启用手机开发者模式并连接电脑，启用USB调试，执行<code>adb shell</code>进入shell模式，执行<code>pm list packages</code>命令查看所有软件包名，可使用grep过滤包名，比如<code>pm list packages | grep miui</code>，过滤包名中含有<code>miui</code>的。如果分不清包名与软件对应关系，就到系统的应用管理里面查看详情（应用详情右上角的叹号图标）。得到软件包名后然后执行 <code>pm unistall --user 0</code> +包名进行卸载，可批量复制多条一起卸载，注意不要卸载系统更新，会导致开不了机。</p>
<p>下面是我卸载的软件包名，用不到的都删了。</p>
<pre class="line-numbers language-cmd"><code class="language-cmd">pm uninstall --user 0 com.xiaomi.midrop
pm uninstall --user 0 com.google.android.apps.docs
pm uninstall --user 0 com.xiaomi.joyose
pm uninstall --user 0 com.google.android.inputmethod.latin
pm uninstall --user 0 com.miui.msa.global
pm uninstall --user 0 com.google.android.apps.maps
pm uninstall --user 0 com.google.android.apps.youtube
pm uninstall --user 0 com.google.android.gm
pm uninstall --user 0 com.android.email
pm uninstall --user 0 com.miui.yellowpage
pm uninstall --user 0 com.miui.android.fashiongallery
pm uninstall --user 0 com.miui.videoplayer
pm uninstall --user 0 com.google.android.apps.photos
pm uninstall --user 0 com.facebook.services
pm uninstall --user 0 com.facebook.system
pm uninstall --user 0 com.xiaomi.glgm
pm uninstall --user 0 com.google.android.marvin.talkback
pm uninstall --user 0 com.google.android.apps.tachyon
pm uninstall --user 0 com.miui.screenrecorder<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="其他选项：主题、字体、显示农历等"><a href="#其他选项：主题、字体、显示农历等" class="headerlink" title="其他选项：主题、字体、显示农历等"></a>其他选项：主题、字体、显示农历等</h4><p>主题&amp;字体相关：国际版的主题里面不能换字体，而且里面是主题还老是下载失败。修改字体的话需要一个第三方软件<code>MUI custom font installer</code>，在play商店里面可以搜到。下载失败这个问题暂时没找到解决办法，只能在国行的系统里面下载，然后在国际版里导入主题。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/MIUI%E5%9B%BD%E9%99%85%E7%89%88%E6%8A%98%E8%85%BE/4.jpg" alt></p>
<p>这里推荐一个我一直用的字体：方正中等线，这个字体是Windows Phone系统的默认中文字体，感觉很舒服。国行主题商店里有这个字体下载，是要收费的，不过在方正字库的官网可以免费下载到。</p>
<p><img src="https://images.liyangzone.com/article_img/%E5%85%B6%E4%BB%96%E5%88%86%E4%BA%AB/MIUI%E5%9B%BD%E9%99%85%E7%89%88%E6%8A%98%E8%85%BE/3.jpg" alt></p>
<p>国际版日历显示农历<br>system/build.prop 文件里加上一行代码即可，我在网上找的其他教程写的是把language和region等选项改为CN，不过实测之后发现会卡米,只加上这一条则不会。</p>
<pre class="line-numbers language-cmd"><code class="language-cmd">
ro.miui.mcc=9454
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>禁用加密：刷完系统后不要重启，使用recovery挂载vendor分区，然后把vendor/etc目录下的<code>fstab.qcom</code>文件复制出来修改，这里我是复制到一张sd卡上然后在电脑上修改。把里面的<code>forceencrypt</code>(强制加密)替换为<code>encryptable</code>(可选加密)，修改完成后替换原文件即可，这里建议与上面的build.prop文件一起修改并替换，替换完成后重启等待进入系统。</p>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p>国际版rom第一次进入系统后需要连接谷歌服务器进行更新，没有梯子的话是连接不上的。你需要带梯子的路由器或用电脑共享，电脑端梯子软件选择允许来自局域网的连接，手机和电脑连接同一个wifi（确保在一个局域网内），手机端在wifi热点的代理选项处配置pc端的局域网ip和端口即可，比如192.168.1.103，端口一般为1080。</p>
]]></content>
      <categories>
        <category>其他分享</category>
      </categories>
      <tags>
        <tag>MIUI国际版</tag>
      </tags>
  </entry>
  <entry>
    <title>一个js数组分类求和算法</title>
    <url>/2020/02/28/%E5%89%8D%E7%AB%AF/%E4%B8%80%E4%B8%AAjs%E6%95%B0%E7%BB%84%E5%88%86%E7%B1%BB%E6%B1%82%E5%92%8C%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>需求详情：一个数组内有N个元素，元素有类型、名称、数量1、数量2等属性，计算出各类型元素的数量、数量1、数量2的和。</p>
<p>实际需求就是做出下图这样一个表格，各类型的合计信息用红色字体显示：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%85%B1%E7%94%A8/20200228_152031js%E5%88%86%E7%B1%BB%E6%B1%82%E5%92%8C%E7%AE%97%E6%B3%95.png" alt></p>
<p>原始数据格式如下：</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> rawData <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称1'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称2'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称3'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称4'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称5'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称6'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称7'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">35</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'名称8'</span><span class="token punctuation">,</span> count1<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> count2<span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> count3<span class="token punctuation">:</span> <span class="token number">35</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>算法思路：遍历该数组，按类型生成一个二维数组，再遍历该二级数组及其子元素，每遍历完一个类型的子元素后求和，并创建一个新的元素存储该类型元素的和，最后生成一个包含各类型元素数量的新数组，实现代码如下:</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">calcSum</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        newArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>newItem<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>newArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">===</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            k <span class="token operator">=</span> j<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          newArr<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> tempArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          tempArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tempArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      newArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>subArr <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> sum_name <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> sum_count1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> sum_count2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> sum_count3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        subArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>subItem <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          sum_name <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          sum_count1 <span class="token operator">+</span><span class="token operator">=</span> subItem<span class="token punctuation">.</span>count1<span class="token punctuation">;</span>
          sum_count2 <span class="token operator">+</span><span class="token operator">=</span> subItem<span class="token punctuation">.</span>count2<span class="token punctuation">;</span>
          sum_count3 <span class="token operator">+</span><span class="token operator">=</span> subItem<span class="token punctuation">.</span>count3<span class="token punctuation">;</span>
          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>subItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> subArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">,</span>
           name<span class="token punctuation">:</span> sum_name<span class="token punctuation">,</span>
           count1<span class="token punctuation">:</span> sum_count1<span class="token punctuation">,</span>
           count2<span class="token punctuation">:</span> sum_count2<span class="token punctuation">,</span>
           count3<span class="token punctuation">:</span> sum_count3<span class="token punctuation">,</span>
           isSumRow<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">//该属性标记为求和行</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生产的二维数组格式如下：</p>
<pre class="line-numbers language-js"><code class="language-js"> newArr <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称1'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称2'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称3'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称4'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称5'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称6'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称7'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">35</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称8'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">35</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>最终数据格式如下,为了与普通的数据区分开，给求和的数据加上了一个isSumRow属性，用来生成一个className来标红：</p>
<pre class="line-numbers language-js"><code class="language-js"> result <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称1'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称2'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称3'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型A'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">39</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token string">'isSumRow'</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称4'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称5'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称6'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型B'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token string">'isSumRow'</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称7'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">35</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'名称8'</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">35</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">'类型C'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'count1'</span><span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'count2'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">'count3'</span><span class="token punctuation">:</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">'isSumRow'</span><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
          <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>使用js-xlsx插件导出多级表头excel</title>
    <url>/2020/02/27/%E5%89%8D%E7%AB%AF/%E4%BD%BF%E7%94%A8js-xlsx%E6%8F%92%E4%BB%B6%E5%AF%BC%E5%87%BA%E5%A4%9A%E7%BA%A7%E8%A1%A8%E5%A4%B4excel/</url>
    <content><![CDATA[<p>最近项目里有这么一个需求，把一个多级表头的table导出为excel格式。然后在网上找到一篇文章：<a href="https://www.jianshu.com/p/9a465d7d1448" target="_blank" rel="noopener">js-xlsx导出自定义合并列头实现思路</a>，我按照他的教程操作之后发现比较繁琐，这篇文章的思路就是就是新建一个excel，然后用js来读取它的多级表头数据，再把json格式的表头数据复制到项目中使用。核心就是这个json格式的多级表头数据，这样一个多级表头导出来是这个样子的:</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%AF%BC%E5%87%BA%E5%A4%9A%E7%BA%A7%E8%A1%A8%E5%A4%B4excel/20200227_101309.png" alt></p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"!ref"</span><span class="token operator">:</span> <span class="token string">"A1:F3"</span><span class="token punctuation">,</span> <span class="token property">"A1"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"日期"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"日期"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"日期"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"日期"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"B1"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"配送信息"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"配送信息"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"配送信息"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"配送信息"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"B2"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"姓名"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"姓名"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"姓名"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"姓名"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"C2"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"C3"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"省份"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"省份"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"省份"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"省份"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"D3"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"市区"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"市区"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"市区"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"市区"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"E3"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"地址"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"F3"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"t"</span><span class="token operator">:</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token property">"v"</span><span class="token operator">:</span> <span class="token string">"邮编"</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token string">"邮编"</span><span class="token punctuation">,</span> <span class="token property">"h"</span><span class="token operator">:</span> <span class="token string">"邮编"</span><span class="token punctuation">,</span> <span class="token property">"w"</span><span class="token operator">:</span> <span class="token string">"邮编"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"!margins"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"left"</span><span class="token operator">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token property">"right"</span><span class="token operator">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token property">"top"</span><span class="token operator">:</span> <span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token property">"bottom"</span><span class="token operator">:</span> <span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token property">"header"</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token property">"footer"</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"!merges"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">"s"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">"e"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token property">"s"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">"e"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">"s"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">"e"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">"s"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">"e"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"c"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token property">"r"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我暂时没看出来这种格式的规律是什么，如果想要修改表头格式的化就感觉比较麻烦，需要修改excel再导出一次。</p>
<p>后来在开源项目<a href="https://panjiachen.gitee.io/vue-element-admin/" target="_blank" rel="noopener">vue-element-admin</a>上也找到了这个功能，使用方法比较简单。</p>
<h3 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h3><p>使用npm安装<code>xlsx</code>和<code>file-saver</code>插件</p>
<pre class="line-numbers language-shell"><code class="language-shell">npm install xlsx --save
npm install file-saver --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>下载Export2Excel.js文件，放到<code>src/vendor</code>目录下，下载地址：<a href="https://raw.githubusercontent.com/PanJiaChen/vue-element-admin/master/src/vendor/Export2Excel.js" target="_blank" rel="noopener">Export2Excel.js</a>(github地址，打不开请科学上网）</p>
<p>然后提取合并的表头数据，这种格式的表头数据比上面那种浅显易懂，如何合并可参考下面的图片，把蓝色部分合并单元格的坐标提取出来即可，下图的表头数据为：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%AF%BC%E5%87%BA%E5%A4%9A%E7%BA%A7%E8%A1%A8%E5%A4%B4excel/20200227_111320.png" alt></p>
<pre class="line-numbers language-js"><code class="language-js">
<span class="token keyword">const</span> multiHeader <span class="token operator">=</span>
                   <span class="token punctuation">[</span>
                     <span class="token punctuation">[</span><span class="token string">'日期'</span><span class="token punctuation">,</span> <span class="token string">'配送信息'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                     <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'地址'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span>
                   <span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 前两行的表头数据，二维数组，不够的用空白补全</span>
<span class="token keyword">const</span> header <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'省份'</span><span class="token punctuation">,</span> <span class="token string">'市区'</span><span class="token punctuation">,</span> <span class="token string">'地址'</span><span class="token punctuation">,</span> <span class="token string">'邮编'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 最后一行的表头数据，合并过的也要用空白补全</span>
<span class="token keyword">const</span> merges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A1:A3'</span><span class="token punctuation">,</span> <span class="token string">'B1:F1'</span><span class="token punctuation">,</span> <span class="token string">'B2:B3'</span><span class="token punctuation">,</span> <span class="token string">'C2:F2'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">//合并单元格的数据</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>vue文件源码：</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">20</span>px <span class="token number">0</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleDownload<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>导出EXCEl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center-table<span class="token punctuation">"</span></span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tableData<span class="token punctuation">"</span></span>
      <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>日期<span class="token punctuation">"</span></span>
        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span>
      <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>配送信息<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
          <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span>
          <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span>
          <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span>
        <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>地址<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
            <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>province<span class="token punctuation">"</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>省份<span class="token punctuation">"</span></span>
            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span>
          <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
            <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>市区<span class="token punctuation">"</span></span>
            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span>
          <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
            <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>地址<span class="token punctuation">"</span></span>
          <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
            <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>zip<span class="token punctuation">"</span></span>
            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>邮编<span class="token punctuation">"</span></span>
            <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span>
          <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'MergeHeader'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      tableData<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-03'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-08'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-06'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        date<span class="token punctuation">:</span> <span class="token string">'2016-05-07'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        province<span class="token punctuation">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        city<span class="token punctuation">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        address<span class="token punctuation">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        zip<span class="token punctuation">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleDownload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/vendor/Export2Excel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>excel <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> multiHeader <span class="token operator">=</span>
                            <span class="token punctuation">[</span>
                              <span class="token punctuation">[</span><span class="token string">'日期'</span><span class="token punctuation">,</span> <span class="token string">'配送信息'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//第一行</span>
                              <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'地址'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">//第二行</span>
                            <span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 前两行的表头数据，二维数组，不够的用空白补全</span>
          <span class="token keyword">const</span> header <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'省份'</span><span class="token punctuation">,</span> <span class="token string">'市区'</span><span class="token punctuation">,</span> <span class="token string">'地址'</span><span class="token punctuation">,</span> <span class="token string">'邮编'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 最后一行的表头数据</span>
          <span class="token keyword">const</span> filterVal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'province'</span><span class="token punctuation">,</span> <span class="token string">'city'</span><span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token string">'zip'</span><span class="token punctuation">]</span>
          <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tableData
          <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatJson</span><span class="token punctuation">(</span>filterVal<span class="token punctuation">,</span> list<span class="token punctuation">)</span>
          <span class="token keyword">const</span> merges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A1:A3'</span><span class="token punctuation">,</span> <span class="token string">'B1:F1'</span><span class="token punctuation">,</span> <span class="token string">'B2:B3'</span><span class="token punctuation">,</span> <span class="token string">'C2:F2'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 合并单元格的数据，如何合并参考上面图片的蓝色背景部分</span>
          excel<span class="token punctuation">.</span><span class="token function">export_json_to_excel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            multiHeader<span class="token punctuation">,</span>
            header<span class="token punctuation">,</span>
            merges<span class="token punctuation">,</span>
            data
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">formatJson</span><span class="token punctuation">(</span>filterVal<span class="token punctuation">,</span> jsonData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> jsonData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> filterVal<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>j <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> v<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">
    <span class="token selector"><span class="token class">.center-table</span> td, <span class="token class">.center-table</span> th </span><span class="token punctuation">{</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>界面如图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%AF%BC%E5%87%BA%E5%A4%9A%E7%BA%A7%E8%A1%A8%E5%A4%B4excel/20200227_111142.png" alt></p>
<p>导出来的excel如图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%AF%BC%E5%87%BA%E5%A4%9A%E7%BA%A7%E8%A1%A8%E5%A4%B4excel/20200227_111833.png" alt></p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>excel</tag>
        <tag>多级表头</tag>
      </tags>
  </entry>
  <entry>
    <title>vue项目watch内的函数重复触发问题</title>
    <url>/2020/02/20/%E5%89%8D%E7%AB%AF/vue%E9%A1%B9%E7%9B%AEwatch%E5%86%85%E7%9A%84%E5%87%BD%E6%95%B0%E9%87%8D%E5%A4%8D%E8%A7%A6%E5%8F%91%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h4 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h4><p>有两个页面A和B，每个页面里都有一个<code>getList()</code>方法。这个两个方法都需要传一个相同的参数C，参数C的选择过程又比较麻烦。为了避免在切换A、B两个界面重复选择参数C的问题，我将参数C存入vuex中，然后在两个页面里都使用watch监听参数C来执行<code>getList()</code>方法。然后发现一个问题，从A页面进入B页面后，在B页面重新选择参数C，A页面的<code>getList()</code>方法竟然也会被执行，反之亦然，从B页面到A页面后，在A页面改变参数C也会执行B页面的<code>getList()</code>方法。</p>
<p>后来发现是使用了因为使用了keep-alive所致，keep-alive会将Vue实例始终保持在内存中，因此该Vue实例始终存续，相应的watchers始终生效，查找相关资料后，发现许多人也遇到了这个问题，最后找到以下两种解决方案：</p>
<h4 id="解决方法1"><a href="#解决方法1" class="headerlink" title="解决方法1"></a>解决方法1</h4><p>通过router路径来判断是否执行<code>getList()</code></p>
<pre class="line-numbers language-js"><code class="language-js">watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">someValue</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>fullPath <span class="token operator">===</span> <span class="token string">'A页面路由路径'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">// do something</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="解决方法2"><a href="#解决方法2" class="headerlink" title="解决方法2"></a>解决方法2</h4><p>添加一个flag参数来判断页面是否是active状态，使用keep-alive缓存的组件只会触发<code>activated</code>和<code>deactivated</code>事件，所以就在这两个事件触发时把flag置为true和false，只有在flag为true的时候才执行<code>getList()</code></p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token punctuation">{</span>
  data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      activatedFlag<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'someValue'</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activatedFlag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  activated <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>activatedFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  deactivated <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>activatedFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果页面比较多，而且各页面里的函数名称不一致的话，可以把上面代码的watch部分去掉写成一个mixin，在需要的页面引入即可</p>
<pre class="line-numbers language-js"><code class="language-js">  <span class="token keyword">import</span> activeFlag <span class="token keyword">from</span> <span class="token string">"@/mixin/activeFlag"</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>activeFlag<span class="token punctuation">]</span><span class="token punctuation">,</span>
    watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'someValue'</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activatedFlag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getlistA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getlistB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>bug</tag>
      </tags>
  </entry>
  <entry>
    <title>使用Travis-CI部署hexo博客到腾讯cos&amp;github-pages</title>
    <url>/2020/01/16/deploy-hexo-blog-with-travis-ci/</url>
    <content><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>以前我的博客静态文件是放在一个带宽1Mbps的腾讯云主机上，文章里的图片也是放在云主机上的，当有些文章图片较多的时候，加载就会变得很慢。后来我将静态文件和图片全部迁移到腾讯对象存储(cos)里，并配置了CDN加速，从此加载速度不再是瓶颈，可以做到基本秒开。</p>
<p>具体方案是将静态文件和图片文件分别放到两个存储桶里，放静态文件的存储桶CDN设置博客主域名，放图片的存储桶CDN设置二级域名，比如我设置了图片CDN二级域名为<code>images.liyangzone.com</code>，写文章的时候先上传图片到存储桶，然后在文章里就可以直接引用图片了。比如我在存储桶根目录上传了一张名为<code>test.jpg</code>的图片，它的地址就是<code>images.liyangzone.com/test.jpg</code>，而且支持多级目录，比一些图床什么的要方便很多，有些图床虽然免费，但是它的文件名一般是一个无规律的字符串，类似这种<code>https://i.loli.net/2020/01/17/Mb1fywFLrJ8khUS.png</code>，当你传了很多图片时可能会一脸懵逼，分不清哪张是什么内容了，不利于维护。</p>
<p>而博客静态文件呢，我们可以用<code>hexo-deployer-cos</code>这个插件来替我们完成，具体配置教程可参考此文章：<a href="https://cloud.tencent.com/developer/article/1185253" target="_blank" rel="noopener">如何在腾讯云COS部署HEXO博客</a>。<br>配置完了cos各种参数后，执行<code>hexo d</code>命令就会将本地文件上传至cos了，可是这种方式需要本地安装nodejs和hexo，如果想在别的电脑上写文章就不方便了，有没有一种更加便捷的部署方式呢？答案是有的，那就是——<strong>持续集成</strong>。</p>
<h3 id="什么是持续集成"><a href="#什么是持续集成" class="headerlink" title="什么是持续集成"></a>什么是持续集成</h3><p>持续集成（Continuous Integration）是一种软件开发实践。 在持续集成中，团队成员频繁集成他们的工作成果，一般每人每天至少集成一次，也可以多次。 每次集成会经过自动构建（包括自动测试）的检验，以尽快发现集成错误。</p>
<h3 id="什么是Travis-CI"><a href="#什么是Travis-CI" class="headerlink" title="什么是Travis CI"></a>什么是Travis CI</h3><p>Travis CI 是目前新兴的开源持续集成构建项目，它与 jenkins，GO 的很明显的特别在于采用 yaml 格式，同时它是在线的服务，不像 jenkins 需要你本地搭建服务器，简洁清新独树一帜。目前大多数的 Github 项目都已经移入到 Travis CI 的构建队列中，据说Travis CI 每天运行超过 4000 次完整构建。对于做开源项目或者 Github 的使用者，如果你的项目还没有加入 Travis CI 构建队列，那么我真的想对你说 OUT 了。</p>
<h3 id="为什么选择Travis-CI"><a href="#为什么选择Travis-CI" class="headerlink" title="为什么选择Travis CI"></a>为什么选择Travis CI</h3><p>为什么我们要选择 Travis 呢，因为它和 Github 集成的程度非常高，对于 Github 上的开源项目，可以免费在 Travis 上构建（为免费的互联网精神干杯🍻），而非开源的私有项目想在 Travis 上构建价格还是非常感人的。</p>
<h3 id="折腾Travis-CI后有能达到什么效果？"><a href="#折腾Travis-CI后有能达到什么效果？" class="headerlink" title="折腾Travis CI后有能达到什么效果？"></a>折腾Travis CI后有能达到什么效果？</h3><ol>
<li><p>直接在线编辑文件，立即生效：<br>假设你已经发表了一篇文章，过了几天你在朋友机器上浏览发现有几个明显的错别字，对于有强迫症的，这是不能容忍的。 但你手头又没有完整的hexo+nodejs+git的开发环境，重新下载git，node，hexo配置会花费不少时间，特别不划算。</p>
<p>如果按照这篇完整折腾完，你可以直接用浏览器访问github个人项目仓库，直接编辑那篇post的原md文件，前后2分钟改完。 稍等片刻，你的博客就自动更新了。</p>
</li>
<li><p>自动部署，同时部署到多个地方：<br>hexo在部署的时候可以设置部署到多端，只需在博客配置文件里设置多个deploy即可，本篇文章暂时只写两种，gh-pages和cos。部署到更多地方也是支持的，比如gitlab，国内的coding等。</p>
</li>
<li><p>部署快捷方便：<br>手动deploy需要推送public整个folder到github上，当后期网站文章、图片较多时候，对于天朝的网络，有时候连接github 就是不顺畅，经常要傻等不少上传时间。<br>有了CI，你可以只提交post文件里单独的md文件即可，很快很爽，谁用谁知道。</p>
</li>
</ol>
<h3 id="Travis自动构建原理"><a href="#Travis自动构建原理" class="headerlink" title="Travis自动构建原理"></a>Travis自动构建原理</h3><ol>
<li>每当我们在本地写好了博文之后，push到博客仓库的<code>blog-source</code>分支。</li>
<li>Travis上可以对这个项目的<code>blog-source</code>分支设置钩子，每当检测到 push 的时候就去仓库 clone 源代码到Travis的云服务器上。</li>
<li>Travis云服务器按顺序执行一系列构建脚本，比如 <code>npm install</code>、<code>hexo g</code> 、<code>hexo d</code>等。</li>
</ol>
<h3 id="如何操作"><a href="#如何操作" class="headerlink" title="如何操作"></a>如何操作</h3><h4 id="1-配置hexo多端部署"><a href="#1-配置hexo多端部署" class="headerlink" title="1. 配置hexo多端部署"></a>1. 配置hexo多端部署</h4><p>修改博客根目录配置文件<code>_config.yml</code>，参考<a href="https://hexo.io/zh-cn/docs/one-command-deployment" target="_blank" rel="noopener">hexo官方文档-部署</a>，我这里只设置了两个，github-pages和cos，下面的写法是travis-ci部署到github-pages和腾讯cos</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#deploy:</span>
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git
  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
  <span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gh_token@github.com/liyang5945/liyang5945.github.io.git
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cos
  <span class="token key atrule">appId</span><span class="token punctuation">:</span> cos_appId
  <span class="token key atrule">secretId</span><span class="token punctuation">:</span> cos_secretId
  <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> cos_secretKey
  <span class="token key atrule">bucket</span><span class="token punctuation">:</span> cos_bucket
  <span class="token key atrule">region</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>shanghai<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果你感觉travis太麻烦，下面的写法是本地部署到github-pages和腾讯cos，注意不要把真实的secretId等值提交到github上面，腾讯云会检测到并打电话提示你有安全风险（不要问我我咋知道的），建议本地部署的时候复制进去，部署完删除即可。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git
    <span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/liyang5945/liyang5945.github.io
  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cos
    <span class="token key atrule">appId</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true">#你的appId</span>
    <span class="token key atrule">secretId</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true">#你的secretId</span>
    <span class="token key atrule">secretKey</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true">#你的secretKey</span>
    <span class="token key atrule">bucket</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true">#此项格式为存储桶名称+appId</span>
    <span class="token key atrule">region</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>shanghai
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="2-注册travis账号，配置环境变量"><a href="#2-注册travis账号，配置环境变量" class="headerlink" title="2. 注册travis账号，配置环境变量"></a>2. 注册travis账号，配置环境变量</h4><p>注册travis-ci账号，新建项目等操作参考此贴：<a href="https://www.jianshu.com/p/e22c13d85659" target="_blank" rel="noopener">手把手教你使用Travis CI自动部署你的Hexo博客到Github上</a>，这里不再细说。</p>
<p>接下来要做的就是要把github的token和cos的appId等添加到travis的环境变量里，这样travis云服务器才能帮你部署到github和cos，设置好后如下图所示：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/travis-ci/20200118_103156.png" alt></p>
<h4 id="3-配置travis执行脚本"><a href="#3-配置travis执行脚本" class="headerlink" title="3. 配置travis执行脚本"></a>3. 配置travis执行脚本</h4><p>最后还需要新建一个travis配置文件<code>.travis.yml</code>，放到博客根目录下，我的配置文件如下：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">language</span><span class="token punctuation">:</span> node_js

<span class="token key atrule">node_js</span><span class="token punctuation">:</span> stable  <span class="token comment" spellcheck="true"># 要安装的node版本为当前的稳定版</span>

<span class="token key atrule">before_install</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> export TZ='Asia/Shanghai' <span class="token comment" spellcheck="true"># 更改时区</span>
<span class="token key atrule">install</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> npm install

<span class="token key atrule">script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> hexo g

<span class="token key atrule">after_script</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true"># 最后执行的命令</span>

  <span class="token punctuation">-</span> sed <span class="token punctuation">-</span>i "s/cos_appId/$<span class="token punctuation">{</span>cos_appId<span class="token punctuation">}</span>/g" _config.yml
  <span class="token punctuation">-</span> sed <span class="token punctuation">-</span>i "s/cos_secretId/$<span class="token punctuation">{</span>cos_secretId<span class="token punctuation">}</span>/g" _config.yml
  <span class="token punctuation">-</span> sed <span class="token punctuation">-</span>i "s/cos_secretKey/$<span class="token punctuation">{</span>cos_secretKey<span class="token punctuation">}</span>/g" _config.yml
  <span class="token punctuation">-</span> sed <span class="token punctuation">-</span>i "s/cos_bucket/$<span class="token punctuation">{</span>cos_bucket<span class="token punctuation">}</span>/g" _config.yml
  <span class="token punctuation">-</span> sed <span class="token punctuation">-</span>i "s/gh_token/$<span class="token punctuation">{</span>Travis_Token<span class="token punctuation">}</span>/g" _config.yml
  <span class="token punctuation">-</span> hexo deploy

<span class="token key atrule">branches</span><span class="token punctuation">:</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> blog<span class="token punctuation">-</span>source <span class="token comment" spellcheck="true"># 触发持续集成的分支</span>

<span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">global</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">GH_REF</span><span class="token punctuation">:</span> github.com/liyang5945/liyang5945.github.io.git <span class="token comment" spellcheck="true"># 就是你github上存放静态博客最终文件的仓库地址末尾加上.git</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>后面的那几条<code>sed</code>语句的作用就是从我们配置的环境变量里读取真实的cos_appId等参数替换本地（travis云服务器本地）的<code>_config.yml</code>里的形参。<br>替换成真实值之后，再执行<code>hexo -d</code>命令，部署到gh-pages和cos。</p>
<p>如果你只需要部署到gh-pages，下面的部署命令还可以写出下面这样，你可以手动设置commit信息。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">after_script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> cd ./public
  <span class="token punctuation">-</span> git init
  <span class="token punctuation">-</span> git config user.name "your name"
  <span class="token punctuation">-</span> git config user.email "your email"
  <span class="token punctuation">-</span> git add .
  <span class="token punctuation">-</span> git commit <span class="token punctuation">-</span>m "Update docs"
  <span class="token punctuation">-</span> git push <span class="token punctuation">-</span><span class="token punctuation">-</span>force <span class="token punctuation">-</span><span class="token punctuation">-</span>quiet "https<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>GH_TOKEN<span class="token punctuation">}</span>@$<span class="token punctuation">{</span>GH_REF<span class="token punctuation">}</span>" master<span class="token punctuation">:</span>master

<span class="token key atrule">branches</span><span class="token punctuation">:</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> blog<span class="token punctuation">-</span>source <span class="token comment" spellcheck="true"># 触发持续集成的分支</span>

<span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">global</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">GH_REF</span><span class="token punctuation">:</span> github.com/liyang5945/liyang5945.github.io.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是这样会有一个问题，那就是commit记录只有一条，如果你在意这个问题，那就使用下面的写法，先拉取到本地再push：</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">after_script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> git clone https<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>GH_REF<span class="token punctuation">}</span> .deploy_git  <span class="token comment" spellcheck="true"># GH_REF是最下面配置的仓库地址</span>
  <span class="token punctuation">-</span> cd .deploy_git
  <span class="token punctuation">-</span> git checkout master
  <span class="token punctuation">-</span> cd ../
  <span class="token punctuation">-</span> mv .deploy_git/.git/ ./public/   <span class="token comment" spellcheck="true"># 这一步之前的操作是为了保留master分支的提交记录，不然每次git init的话只有1条commit</span>
  <span class="token punctuation">-</span> cd ./public
  <span class="token punctuation">-</span> git config user.name "your name"  
  <span class="token punctuation">-</span> git config user.email "your email"  
  <span class="token punctuation">-</span> git add .
  <span class="token punctuation">-</span> git commit <span class="token punctuation">-</span>m "Travis CI Auto Builder at `date +"%Y<span class="token punctuation">-</span>%m<span class="token punctuation">-</span>%d %H<span class="token punctuation">:</span>%M"`"  <span class="token comment" spellcheck="true"># 提交记录包含时间 跟上面更改时区配合</span>
  <span class="token punctuation">-</span> git push <span class="token punctuation">-</span><span class="token punctuation">-</span>force <span class="token punctuation">-</span><span class="token punctuation">-</span>quiet "https<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>Travis_Token<span class="token punctuation">}</span>@$<span class="token punctuation">{</span>GH_REF<span class="token punctuation">}</span>" master<span class="token punctuation">:</span>master  <span class="token comment" spellcheck="true">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="4-测试是否成功"><a href="#4-测试是否成功" class="headerlink" title="4. 测试是否成功"></a>4. 测试是否成功</h4><p>改动本地文件然后commit，并push到github，不出意外的话可以看到travis云服务器执行命令的过程：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/travis-ci/20200118_115731.png" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/travis-ci/20200118_115632.png" alt></p>
<p>我们再去github和腾讯cos里看一下，可以看到commit记录和文件上传日期都是最新的。</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/travis-ci/20200118_115141.png" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/travis-ci/20200118_115525.png" alt></p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Travis-CI</tag>
        <tag>教程</tag>
      </tags>
  </entry>
  <entry>
    <title>使用FLEX实现一种上下高度不固定的自适应布局</title>
    <url>/2019/12/22/%E5%89%8D%E7%AB%AF/%E4%BD%BF%E7%94%A8FLEX%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E4%B8%8A%E4%B8%8B%E9%AB%98%E5%BA%A6%E4%B8%8D%E5%9B%BA%E5%AE%9A%E7%9A%84%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<p>此布局的需求是：头部高度不固定，由子元素撑高，中间内容高度不固定，自动填满父容器剩余高度，底部高度固定。<br><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/FLEX%E4%B8%8A%E4%B8%8B%E5%B8%83%E5%B1%80/20191221_103338.png" alt></p>
<p>这种布局是下面这种布局的变种：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/FLEX%E4%B8%8A%E4%B8%8B%E5%B8%83%E5%B1%80/20191221_101238.png" alt></p>
<p>头部和中间内容都变成了不固定的，一般用于后台管理系统，上部分是一些查询条件和操作按钮，查询条件个数不固定，中间部分是表格内容，底部一般用于分页，固定高度。</p>
<p>此种布局用flex可以很容易的实现：父容器设置高度为100%，flex-direction设置为column(主轴设置为竖向)，上部flex-shrink设置0，下部flex-grow设置1，底部flex-shrink设置0。</p>
<p>CSS部分：</p>
<pre class="line-numbers language-css"><code class="language-css">    <span class="token selector">* </span><span class="token punctuation">{</span>
        <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">html, body </span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token class">.wrapper</span> </span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token class">.head</span> </span><span class="token punctuation">{</span>
        <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid red<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">15</span>px<span class="token punctuation">;</span>
        <span class="token property">flex-shrink</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token class">.content</span> </span><span class="token punctuation">{</span>
        <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid blue<span class="token punctuation">;</span>
        <span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">15</span>px<span class="token punctuation">;</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>
        <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> //此行是关键 
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token class">.foot</span> </span><span class="token punctuation">{</span>
        <span class="token property">flex-shrink</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid green<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HTML部分：</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>head<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>子元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>子元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>子元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>子元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>foot<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>底部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/FLEX%E4%B8%8A%E4%B8%8B%E5%B8%83%E5%B1%80/20191221_105339.png" alt></p>
<p>中间的内容用来放element-ui的表格，表格高度设置为100%，可以达到固定表头内容滚动的效果，一切看起来都很美好。</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/FLEX%E4%B8%8A%E4%B8%8B%E5%B8%83%E5%B1%80/20191221_110422.png" alt></p>
<p>然而最近我重装了一次系统然后把chrome升级到79版本后，发现一个蛋疼的事情，这种方式居然失效了，出现了下面的情况：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/FLEX%E4%B8%8A%E4%B8%8B%E5%B8%83%E5%B1%80/20191221_135805.png" alt></p>
<p>中间的内容高度设置失效了，也变成了由子元素撑高。起初我怀疑是element-ui的锅，然后换了不同版本的element-ui后还是如此，然后我又怀疑可能是node版本的问题，因为我重装系统后把node由v8换成了v10,当我切换成v8后还是如此。后来我在同事的电脑上查看，他们居然没有出现这种情况，问题到底出现在了哪里？经过仔细排查后，这个锅最终落在了chrome头上，当我把chrome装回78版本后，一切又变得正常了。</p>
<p>然后我发现这个问题也在firefox上面出现了，这种布局似乎只能在chrome78及以下生效(IE11也生效)。然而我不能阻止用户把chrome升级到79版本或使用firefox浏览器，所以这个问题的根源也不在chrome或firefox,一定是别的什么地方出现了问题。</p>
<p>最终问题定位到了BFC(块格式化上下文,Block Formatting Context)上面，关于BFC的概念你可以前往<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">MDN</a>查看。</p>
<p>问题的关键就是要为page-body为这个div创建BFC，让它里面的元素不会影响到外面的元素，下列方式会创建块格式化上下文：</p>
<pre><code>根元素(&lt;html&gt;)
浮动元素（元素的 float 不是 none）
绝对定位元素（元素的 position 为 absolute 或 fixed）
行内块元素（元素的 display 为 inline-block）
表格单元格（元素的 display为 table-cell，HTML表格单元格默认为该值）
表格标题（元素的 display 为 table-caption，HTML表格标题默认为该值）
匿名表格单元格元素（元素的 display为 table、table-row、 table-row-group、table-header-group、table-footer-group（分别是HTML table、row、tbody、thead、tfoot的默认属性）或 inline-table）
overflow 值不为 visible 的块元素
display 值为 flow-root 的元素
contain 值为 layout、content或 paint 的元素
弹性元素（display为 flex 或 inline-flex元素的直接子元素）
网格元素（display为 grid 或 inline-grid 元素的直接子元素）
多列容器（元素的 column-count 或 column-width 不为 auto，包括 column-count 为 1）
column-span 为 all 的元素始终会创建一个新的BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）。</code></pre><p>不过我试了多种方式，都没有生效，只有设置 <code>overflow: auto</code> 之后才生效。</p>
<p>这个问题的根本原因就是浏览器创建BFC的规则不一致，chrome78以下版本和IE11会为<code>display</code>为<code>flex</code>的直接子元素创建BFC，不管这个子元素的overflow值为什么(默认值为visible)， chrome79版本及firefox则不会，只有设置 了<code>overflow: auto</code>之后才会创建BFC，不确定这是chrome79的feature还是bug。</p>
<p>原生HTML+CSS源码地址:<a href="https://codepen.io/liyang5945/pen/povvVbe" target="_blank" rel="noopener">点击前往</a>。<br>vue + element-ui版源码地址：<a href="https://codepen.io/liyang5945/pen/abzJybY" target="_blank" rel="noopener">点击前往</a>。</p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>FLEX布局</tag>
      </tags>
  </entry>
  <entry>
    <title>使用nginx和LiveReload搭建简单的热更新web开发环境</title>
    <url>/2019/11/21/%E5%89%8D%E7%AB%AF/%E7%83%AD%E6%9B%B4%E6%96%B0web%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<p>如今web前端开发已经进入工程化、模块化的时代，各种框架、工具层出不穷。在工程化开发中，热更新已经由webpack、gulp等工具替我们实现了，不过有时候我们要调试一些比较简单的东西，比如测试一个css效果或js插件，使用这些工具的话却又显得有些笨重（要安装一堆npm插件），有没有更简单的实现热更新的方法呢，我们可以借助liveReload插件来实现。</p>
<p>LiveReload插件原理，LiveReload是基于WebSocket协议实现（WebSocket协议可以向主动向客户端发送消息，HTTP协议不能），在本地开启一个WebSocket服务，并且检测文件变化，浏览器打开一个页面时候，引入固定的LiveReload.js（chrome插件会帮忙加上）会建立WebSocket连接，当检测到文件变化，则自动推送消息给浏览器，实现刷新。</p>
<p>LiveReload安装：LiveReload需要客户端与浏览器插件配合才能实现，进入<a href="http://livereload.com/" target="_blank" rel="noopener">livereload.com</a>下载客户端并安装（MAC，windows，linux全平台都有）。下图为windows客户端界面，打开后本地WebSocket服务就会立即启动，然后把相关文件夹添加进去即可。</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/20191111_174217.png" alt></p>
<p>然后安装浏览器插件，这里我已FireFox浏览器为例（Chrome浏览器访问插件商店需要梯子，也可以在第三方网站下载然后手动安装），搜索liveReload即可，注意是这个图标，别装错了：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/20191111_174100.png" alt></p>
<p>nginx相关：nginx是一个高性能的HTTP和反向代理web服务器，在这里我们仅仅用它来搭建一个本地服务器来预览效果，有点大材小用的感觉。在windows下的安装也比较简单，从官网下载对应系统的zip包解压后，运行nginx.exe程序即可。运行之前最好改一下配置文件，配置文件为<code>conf/nginx.conf</code>,我们主要修改根目录和端口，我作了如下修改，端口号改为8088、根目录改为<code>D:/develop/nginx_root</code>。</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/nginx-config.png" alt></p>
<p>访问地址有三种，localhost:8088、127.0.0.1:8088、和局域网ip地址，类似这种：192.168.XX.XX:8088，局域网地址也可以在同一个内网的其他设备上访问（需关闭本机防火墙），比如手机或其他PC设备。<br>启动liveReload客户端，再打开浏览器，点击插件图标，即可启用liveReload，效果如图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/livedemo1.gif" alt></p>
<p>插件会在页面上插入一个script标签，这个js文件的作用就是与客户端的WebSocket服务建立连接，当文件发生改动的时候，WebSocket服务器就会向浏览器发送通知，从而实现热更新，效果如图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/livedemo.gif" alt></p>
<p>以上功能也能用其他工具实现，nginx也可以用其他http服务替代，比如：比如.net系的IIS，JAVA系的tomcat，npm插件http-server，使用nodejs/python也能开启一个简单的http服务。liveReload客户端可以用npm插件livereload来实现（他们的作用都是开启本地WebSocket服务并监听文件）。<br>npm安装http-server：npm install http-server -g  启动本地http服务：在所在文件夹打开命令行，输入：http-serve即可，可在后面加参数 -p + 端口号，例如： http-serve -p 8888。<br>npm安装livereload: npm install livereload -g 启动本地WebSocket服务：在所在文件夹打开命令行，输入：livereload即可。<br>缺点就是需要打开两个命令行，不如直接打开客户端来得方便。<br><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/20191121_203144.png" alt></p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>nginx</tag>
        <tag>LiveReload</tag>
        <tag>热更新</tag>
      </tags>
  </entry>
  <entry>
    <title>2019国庆骑游记</title>
    <url>/2019/10/08/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E6%B8%B8%E8%AE%B0/</url>
    <content><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>9月份偶然看到一个骑行路书，路线为上海-千岛湖-黄山-皖南318，心里就被种草了，准备国庆假期骑一下这个路线。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/Screenshot_2019-09-14-16-31-57-103_im.xingzhe.jpg" alt></p>
<p>然而计划赶不上变化，十一前两天刮台风，就推迟到了3号才出发，因为少了两天，黄山我就不准备去了，只去千岛湖，计划是骑着去，坐火车或大巴回上海。</p>
<p>这是出发时的装备，上次为骑青海湖准备的尾包派上了用场，我又买了一个挂在车把上的车前包，容量6L，为了骑长途更加舒适，我在车把上又装了一个休息把。</p>
<p>物品清单：</p>
<p>车身装备：拆车&amp;修车工具、扎带若干（装车用）、打气筒、折叠外胎、内胎×2、行者码表&amp;踏频器、手电筒&amp;备用电池一节<br>人身装备：头盔、骑行眼镜、骑行头巾×2、全指手套、袖套x2、腿套、心率臂带、骑行服×2套、短袖×2、外套&amp;长裤x1<br>其他物品：水壶、移动电源、充电器x2、数据线x4、大号垃圾袋x2（装车用）、眼罩&amp;隔音耳塞、手机x2（一个为备用机、导航用）<br>补给品：SIS电解质泡腾片、葡萄糖粉一袋(400g)、蛋白粉3份（90g），葡萄糖吸收很快，可以快速补充体力，和泡腾片是绝佳的组合。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_085148_1.jpg" alt></p>
<h3 id="DAY1-上海→杭州-180Km"><a href="#DAY1-上海→杭州-180Km" class="headerlink" title="DAY1 上海→杭州 180Km"></a>DAY1 上海→杭州 180Km</h3><p>10月3号上午9点，从上海出发，补给品就带了一瓶水，快出上海的时候在一个水果店买了几根香蕉，又在一个便利店买了两瓶水，车包已经装不下这些东西了，我就把香蕉和水挂在了车把两旁，在此后的几天里，我右边车把上始终挂着一个塑料袋，里面装着一两瓶水。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_114828_1.jpg" alt></p>
<p>出了上海拍的一些照片：</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_114846_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_120634_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_120641_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_121529_1.jpg" alt></p>
<p>下午一点时，碰到一个骑长途的小哥，他是从上海出发骑到广东，我分了根香蕉给他吃，然后我们一起骑了一段路程。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_130315.jpg" alt></p>
<p>下午两点，路过一个加油站，到这时我还没有吃饭，就在加油站里买了桶泡面吃，后来一直骑到晚上8点多到杭州都没再吃东西。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_142029.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_141916.jpg" alt></p>
<p>骑到4点多时，一股难以抵挡的困意袭来，因为昨天只睡了6个小时，正好经过一条小河时，看到旁边有片草地，我就拿出来当装车袋的垃圾袋铺在草地上睡了半个小时，尽管路上车辆经过的噪音很大，也难以阻挡我入睡，睡完过后，神清气爽，满血复活，继续踏上征程。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_161613.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_162308.jpg" alt></p>
<p>后来骑到6点多时，路上遇到一位四五十岁的大叔，他也是上海出发去千岛湖，此时距杭州还有40公里左右，有部分段路没有路灯，我拿出手电筒骑在后面给大叔照路，一起骑了半小时左右，后来大叔不骑了去找地方住，我继续往前骑。</p>
<p>一直骑到8点多，到达杭州，在一个朋友那蹭饭蹭住。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_192908.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191003_212325.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_082601.jpg" alt></p>
<h3 id="DAY2-杭州→淳安县-156Km"><a href="#DAY2-杭州→淳安县-156Km" class="headerlink" title="DAY2 杭州→淳安县 156Km"></a>DAY2 杭州→淳安县 156Km</h3><p>4号早上9点从杭州出发，前往淳安县。</p>
<p>下午一点，在富阳区吃了午饭<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_130922.jpg" alt></p>
<p>骑到3点时，困意又袭来了，就在一个树荫下休息了半小时。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_145625.jpg" alt></p>
<p>经过分水江时，看到有游客在玩漂流</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_162715_1.jpg" alt></p>
<p>此后就进入山区，有不少隧道，第一次骑行经过隧道</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_162949_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_163013.jpg" alt></p>
<p>骑到6点多时，天已经完全黑透，有部分路段没有路灯，我拿出手电筒继续骑</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_184918.jpg" alt></p>
<p>7点10分时，忽然下起了大雨，还好这段路不是人烟稀少的路段，我就到路边的一户人家屋檐下避雨</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_191627.jpg" alt></p>
<p>然后雨小了点，我又继续上路，没想到一会又下大了，经过一个隧道时，我就在隧道尽头的路沿上避雨，等了约40分钟雨才完全停下。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_193318.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_193438_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_193413.jpg" alt></p>
<p>骑到快10点了才到达淳安县城，我先订好了住的地方，才去吃饭。后来发现那个宾馆很坑爹，热水都没有，无奈当晚只好洗了凉水澡，还好没有感冒。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191004_221104.jpg" alt></p>
<h3 id="DAY3-淳安县-环千岛湖骑行-146Km"><a href="#DAY3-淳安县-环千岛湖骑行-146Km" class="headerlink" title="DAY3 淳安县-环千岛湖骑行 146Km"></a>DAY3 淳安县-环千岛湖骑行 146Km</h3><p>5号早上在淳安县吃了早餐，8点开始环湖，湖边景色很好，有一条骑行绿道，骑行环湖的游人也很多</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_074914.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_085022.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_085024.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_085302.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_085414.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_085421.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_105608.jpg" alt></p>
<p>上午遇到一个骑闪电公路车的老哥，他也是从上海来的，后来我们俩就结伴而骑，一直到环湖结束。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/mmexport1570459428543.jpg" alt></p>
<p>中午12点多，我们在一个小镇上吃了午饭。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_122154.jpg" alt></p>
<p>之后有不少上坡路段，再加上逆风，骑的很吃力。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_150711.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_161543.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_161546_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191005_161548_1.jpg" alt></p>
<p>由于今天出发较早，骑到5点多时就回到了淳安县，我们加了微信就分别了。这老哥准备开共享汽车回上海，我的计划是6号从千岛湖客运中心坐大巴回上海，然后发现6号的票已经售完，就准备6号再骑一天回杭州，然后从杭州坐火车回上海。我又在网上订了一个千岛湖客运中心附近的民宿，距离县城约10公里，我又继续骑了10公里到千岛湖客运中心。客运中心附近有很多民宿，价格和环境都不错，比昨天在县城住的好太多了。在县城一个床位都要80，在这里一个标间也才138.</p>
<h3 id="DAY4-淳安县-建德市-杭州-165Km"><a href="#DAY4-淳安县-建德市-杭州-165Km" class="headerlink" title="DAY4 淳安县-建德市-杭州 165Km"></a>DAY4 淳安县-建德市-杭州 165Km</h3><p>6号早上在民宿附近吃了早餐，8点出发，骑向杭州，这次我选择了另一条去杭州的路线，途中经过建德市。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_073931.jpg" alt></p>
<p>这条路线前半段都是上坡，骑的非常艰难，最高海拔260+，不过后来的路基本都是下坡了。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/Screenshot_2019-10-09-17-38-30-519_im.xingzhe.png" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_081457.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_081502.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_081510.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_092600.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_092604.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_092952.jpg" alt></p>
<p>由于冷空气袭来，6号天气很阴，气温也很低，随时要下雨的样子，我经过建德市的时候在一个超市里买了件雨衣，负重又加了2斤，不过到最后也没有下雨。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_102107.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_102103.jpg" alt></p>
<p>12点时，看到一家老乡开的饭店，就进去吃了晚烩面</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_115905.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_121128.jpg" alt></p>
<p>骑到2点又开始犯困了，就在一个公交站点躺了十几分钟</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_140059.jpg" alt></p>
<p>晚上7点到达杭州，继续去朋友那蹭住，然后订了一张7号中午杭州东站到上海南站的火车票。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191006_181457.jpg" alt></p>
<h3 id="DAY5-乘火车杭州——上海"><a href="#DAY5-乘火车杭州——上海" class="headerlink" title="DAY5 乘火车杭州——上海"></a>DAY5 乘火车杭州——上海</h3><p>7号早上9点多从朋友那出发，10点到达杭州东站，在车站前面的桥底下拆车，前后轮+前叉全拆，进一步减小体积，然后套上一个大号垃圾袋。在众目睽睽之下，我像提着两个垃圾袋，走进了杭州东站。顺利通过安检+上车，上车后我把车子放到了一个不常开的车门旁边。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191007_103219_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191007_103605.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191007_114014.jpg" alt></p>
<p>下午一点半到达上海南站，我就在车站前面的空地上装车，耗时约20分钟，然后继续骑回家。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/IMG_20191007_140337.jpg" alt></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这一路骑下来，也是比较顺利，全程无扎胎和事故。以前总想着来一趟长途骑行，这次假期总算如愿以偿，骑了个够。因为我每天骑行时间较长，平均8小时左右，即使穿了骑行裤屁股上还是磨出了几个泡，腿和膝盖反而没什么感觉。第一天骑的里程也破了我的单日里程记录，感觉还能继续骑，再骑20公里达到单日200也完全没问题。</p>
<p>骑行数据：</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/20191009_215500.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/2019%E5%9B%BD%E5%BA%86%E9%AA%91%E8%A1%8C/20191009_215433.jpg" alt></p>
]]></content>
      <categories>
        <category>生活记录</category>
      </categories>
      <tags>
        <tag>骑行</tag>
        <tag>游记</tag>
      </tags>
  </entry>
  <entry>
    <title>个人常用软件推荐</title>
    <url>/2019/08/28/%E4%B8%AA%E4%BA%BA%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/</url>
    <content><![CDATA[<h3 id="windows企业长期服务版"><a href="#windows企业长期服务版" class="headerlink" title="windows企业长期服务版"></a>windows企业长期服务版</h3><p>首先是windows，可能你会问，windows有啥好推荐的，现在大家用的不都是win10吗？ 没错，都是win10，可是不同的版本，体验也是不一样的，一般人用的都是win10专业版或家庭版，现在最新的win10专业版安装好后，系统自带的商店会安装一些推广软件，本人对电脑有深度洁癖，这种行为是绝对不能容忍的。我这里推荐的是windows LTSB版本，LTSB就是长期支持更新分支（Long Time Service Branch），这个版本专门给一些企业用户的，相比一般版本会缺少很多新功能，例如没有应用商店、没有Edge浏览器，没有cortana，大家可以把Win10 TLSB看成是Windows10企业版的精简版本。LTSB是英语Long Term Servicing Branch的首字母缩写，汉语一般翻译成长期服务分支。LTSB分支是专门面向企业版的，Win10企业版LTSB分支支持周期长达10年，但只会获取安全更新(应该也可以获取热补丁更新)，而不获取功能更新，即不会增加任何新功能。这也是Win10企业版LTSB分支和Win10企业版最根本性的区别。 </p>
<p>Win10企业版和LTSB分支Win10企业版的区别：</p>
<ul>
<li>1、Win10企业版LTSB分支不会有Edge浏览器</li>
<li>2、在系统更新方面，用户能完全手动控制更新，选择和决定自己要的更新和驱动，更新内容和更新时间可以随意控制，但不能无限期推迟。</li>
<li>3、无Cortana</li>
<li>4、无任何系统自带磁贴程序</li>
<li>5、无应用商店</li>
</ul>
<p>现在最新的版本是2019 LTSC版，不过我个人还在用2016 LTSB版，从16年起到现在，期间换过几个电脑，我就在用这个版本，一直觉得这个版本是最好用最稳定的版本，工作电脑也是用的这个版本。</p>
<p>下载链接：<a href="http://msdn.itellyou.cn/" target="_blank" rel="noopener">msdn.itellyou.cn</a>,搜索 <code>win ltsb</code> 或 <code>win ltsc</code> 下载你需要的版本。这个网站上下载的都是官方原版ISO文件，未经任何第三方修改。</p>
<h3 id="本人常用的软件推荐"><a href="#本人常用的软件推荐" class="headerlink" title="本人常用的软件推荐"></a>本人常用的软件推荐</h3><ul>
<li>聊天软件：<a href="https://office.qq.com/" target="_blank" rel="noopener">TIM</a> QQ企业版，没有垃圾广告</li>
<li>浏览器：<a href="https://www.google.cn/chrome/" target="_blank" rel="noopener">chrome</a> <a href="http://www.firefox.com.cn/" target="_blank" rel="noopener">firefox</a>  Chrome为开发使用，日常使用firefox，注意firefox不要下载到国内版本的firefox，会有广告，而且账号与国际版不通用。推荐使用firefox esr版本（长期支持版本，Extended Support Release，简称“ESR”），下载地址：<a href="https://www.mozilla.org/en-US/firefox/enterprise/" target="_blank" rel="noopener">https://www.mozilla.org/en-US/firefox/enterprise/</a></li>
<li>输入法：<a href="https://shurufa.baidu.com/" target="_blank" rel="noopener">百度输入法</a> 虽然大家一直在骂百度，不过他的输入法还是不错的，没有广告啥的</li>
<li>视频播放器：<a href="https://daumpotplayer.com/download/" target="_blank" rel="noopener">PotPlayer</a> 看电影我都是下到本地观看，一直在用这个播放器</li>
<li>下载工具：μTorrent 和 迅雷去广告版 以前用过μTorrent，发现下载不动资源，其实是使用的姿势不对，设置一下tracker，速度飞起，<a href>前往设置教程(待写)</a></li>
<li>截图软件：<a href="https://picpick.app/zh/" target="_blank" rel="noopener">PicPick</a> 不错的截图软件</li>
<li>压缩软件 <a href="https://www.7-zip.org/" target="_blank" rel="noopener">7zip</a> 优秀的开源压缩软件，我用了七八年了</li>
</ul>
<h3 id="chrome浏览器插件推荐"><a href="#chrome浏览器插件推荐" class="headerlink" title="chrome浏览器插件推荐"></a>chrome浏览器插件推荐</h3><ul>
<li>Adblock Plus 广告屏蔽插件，可屏蔽大部分网页广告，从chrome商店里安装（需要梯子)</li>
<li>Proxy SwitchyOmega 浏览器切换代理插件，科学上网必备</li>
<li><a href="https://addoncrop.com/youtube_video_downloader/" target="_blank" rel="noopener">YouTube Video Downloader</a> YouTube视频下载工具，第三方chrome插件，不在chrome商店里，本地下载安装</li>
</ul>
<h3 id="工作相关软件"><a href="#工作相关软件" class="headerlink" title="工作相关软件"></a>工作相关软件</h3><ul>
<li>编辑器：WebStorm &amp; VS Code 主力WebStorm,VS Code备用</li>
<li>图像处理：PhotoShop 2017 </li>
<li>PhotoShop插件：AssistorPS 一款PS插件，处理一些icon时很有用</li>
<li>PDF阅读器：Foxit Reader(福昕阅读器) 绿色小巧的PDF阅读器，功能也很强大</li>
<li>办公软件：Office 2013 </li>
</ul>
<h3 id="Android-软件推荐"><a href="#Android-软件推荐" class="headerlink" title="Android 软件推荐"></a>Android 软件推荐</h3><ul>
<li>看图软件：快图浏览 我用的是旧版本v4.5.3，无广告</li>
<li>视频播放： MX Player Pro 功能丰富的播放器，可以手动添加字幕，设置字幕样式</li>
<li>文件相关：Root Explorer &amp; ES文件浏览器</li>
<li>系统相关：绿色守护 MyAndroidTools Pro 制裁一些国产软件的流氓行为</li>
<li>电池监控：Battery Monitor Widget Pro 这个软件可以监测电池电流，还能根据充电电流计算当前电池容量</li>
<li>骑行记录：行者 &amp; relive relive是国外软件，可生成一个炫酷的3D运动轨迹视频，国产手机安装较为麻烦，需安装google套件</li>
<li>ROOT管理：Magisk 新版miui root管理好像只能用这个</li>
</ul>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>软件</tag>
        <tag>windows</tag>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>青海湖骑行记</title>
    <url>/2019/08/22/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/</url>
    <content><![CDATA[<p>青海湖，也就是青色的海，是由蒙语“库库淖尔”和藏语“错温布”意译而来，是中国最大的湖泊，也是著名的内陆咸水湖。</p>
<p>青海湖，湖面海拔3196米，位于青海湖盆地内，三面环山；其中，北面、东南面、南面分别环绕祁连山脉、日月山脉、南山山脉。不仅有丰富的高原风景，又集草原与山峰于一身，还是著名的候鸟栖息地。</p>
<p>环湖公路一周大约360公里，沿途风景有草原、湖泊、沙漠、山峦、查卡盐湖、油菜花、牛羊和鸟群等丰富的景观。</p>
<p>“环青海湖国际公路自行车赛”更是使得这一骑行圣地，广为人知，再加上青藏公路和青藏铁路沿湖而过，每年都吸引着很多骑行者慕名前往。</p>
<p>近年来，随着青海湖环湖旅行的知名度提高，旅游产业的发展也越来越成熟，环湖骑行的设备租赁和食宿都日臻完善。青海湖环湖公路本身是完全开放的，但有几个景点是需要收费的。</p>
<h3 id="自行车托运-amp-装备相关"><a href="#自行车托运-amp-装备相关" class="headerlink" title="自行车托运&amp;装备相关"></a>自行车托运&amp;装备相关</h3><p>环青海湖骑行已经是非常成熟和商业化的路线，环湖起点西海镇有很多提供自行车出租的驿站。但我还是选择带自己的车去，一是骑自己的车比较有意义，二是骑自己的车会更舒适。交通方式我选择火车，当然也可以选择高铁or飞机。</p>
<p>自带的装备：头盔、骑行眼镜、全指手套、袖套、腿套、打气筒、拆车&amp;修车工具、扎带×100条、折叠外胎、内胎×2、梁包、骑行服×2、骑行头巾×2、保鲜袋×20、手电筒、吹风机、移动电源（10000mAh)×2、充电器&amp;数据线、个人生活用品等。</p>
<p>补给品：葡萄糖粉一袋(300g)、电解质泡腾片20片、蛋白粉3份（90g）、红景天胶囊20粒。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/20190823_115950.jpg" alt></p>
<p>开始我没准备租驿站的货架，买了一个这样的车尾包，后来发现这个尾包装不下这么多东西，就问驿站老板有没有快拆的货架，得到肯定的回答后，就没用这个尾包。后来有点后悔带这么多东西，有些东西基本上没用到，还增加了骑行的难度。</p>
<p>在驿站租的装备：货架、驼包、雨衣。</p>
<p>为预防高反，我提前一周买了红景天胶囊吃，不过感觉好像没什么用。</p>
<h3 id="路线相关"><a href="#路线相关" class="headerlink" title="路线相关"></a>路线相关</h3><p>首先我在网上找了一个四天环湖线路图，如下</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/wKgBZ1mIBEKAOR2cAACo4yoZXUM70.jpeg" alt></p>
<p>实际我的行程如下，标签为住宿点。</p>
<p>DAY1 11:00-19:30  西海镇→江西沟→黑马河 145km<br>DAY2 8:00-13:30 茶卡盐湖 15:00-18:00  黑马河→鸟岛 50km<br>DAY3 8:00-19:30  鸟岛→泉吉乡→刚察县→沙岛 120km<br>DAY4 9:00-11:30  沙岛→西海镇 45km </p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/20190823_144819.jpg" alt></p>
<h3 id="START-上海→西宁"><a href="#START-上海→西宁" class="headerlink" title="START 上海→西宁"></a>START 上海→西宁</h3><p>因为车票比较难抢，我买的是8月13日K2816车次卧铺，上海11:03出发，14日晚上才到，全程34个小时。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190812_112248.jpg" alt></p>
<p>拆车+装包，前后轮、前叉全拆，尽量减小体积，然后乘公交至火车站。后来有点后悔用了这个车包，因为是在是太重了，车包重7斤，车重20斤，背上还有个15斤的背包，从出门→公交站→火车这段路程非常的累，让我分分钟想把它扔了。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190813_103816.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190813_113451.jpg" alt></p>
<p>顺利上车，一开始我把车放在了洗漱台那个位置，后来列车员不让放，我就塞到了床底下。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190814_214601.jpg" alt></p>
<p>经过34个小时漫长的旅程，14日晚到达西宁，随便找了个青旅住下。</p>
<p>8月15号早上乘大巴→西海镇，车程2个小时左右，早7点半出发，9点半点左右到达西海镇。</p>
<h3 id="DAY1-西海镇→江西沟→黑马河"><a href="#DAY1-西海镇→江西沟→黑马河" class="headerlink" title="DAY1 西海镇→江西沟→黑马河"></a>DAY1 西海镇→江西沟→黑马河</h3><p>到达西海镇汽车站后，打了个车去飞登青海湖驿站，到驿站后开始装车。装好后驿站的几个小哥都试骑了我的车，来环湖的一般是山地车，公路车也有，骑着死飞来环湖的，他们也是第一次见。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_095730.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_103416.jpg" alt></p>
<p>装好货架和驼包，整装待发，然后我去附近的超市买了点香蕉和几瓶水，吃了两根香蕉就出发了。 </p>
<p>刚骑了10分钟左右，我想起有一些修车工具忘在驿站那里了，打电话给驿站小哥，驿站小哥骑了一辆电动助力山地车给我送了过来。</p>
<p>小哥送来工具后已经快11点了，我又重新踏上旅程。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_110717.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_115303.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/Screenshot_2019-08-16-06-37-30-859_im.xingzhe.png" alt></p>
<p>开始前15公里有两段连续几公里的上坡，是整段路程难度都比较大的一段。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_120258_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_123417.jpg" alt></p>
<p>爬完坡，已经12点多，后面是一段沙漠的路段。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_130358_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_125636.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_125514.jpg" alt></p>
<p>下午1点左右，看到路边有个小卖部，碰到一队骑友在这里休息和补给，我进去吃了一个士力架、两根香蕉、两根香肠。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_135131_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_135303.jpg" alt></p>
<p>吃完东西，重新上路，没多久我就超过了这队骑友。下午2点左右，到达一处可通向湖边的地方，有藏民在入口处收费，每人10元。我也进去拍了几张照。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_141620.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_143817.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_145145.jpg" alt></p>
<p>路上又遇到一队骑友，此时路边还有盛开的油菜花，进去拍照也是要收费的，里面的马也是可以骑的。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_155708.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_155942.jpg" alt></p>
<p>下午4点左右，到达二郎剑景区。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_164634_1.jpg" alt></p>
<p>下午5点左右，到达江西沟乡，江西沟乡是大多数人第一天的终点，里程约98Km。我看天色尚早，体力还比较充足，决定继续往前骑。</p>
<p>路上碰到两个骑马的藏民跟我喊：“扎西德勒”，我也向他们喊“扎西德勒”</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_170929.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_175018.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_182100.jpg" alt></p>
<p>出了江西沟乡，湖边也变成了牧场。然后遇到了一位骑友，他车后面挂着个实习的贴纸，我便和他边骑边聊，原来是个骑青藏线的大佬，他还有个队友在后面。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_195845.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_194352.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_204224.jpg" alt></p>
<p>下午7点多，到达黑马河乡，我们找了个旅馆住下，然后一起去吃了晚餐。这两个老哥带的装备很多，有帐篷睡袋等，还带了个无人机。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_204224.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_204224.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190815_204224.jpg" alt></p>
<h3 id="DAY2-茶卡盐湖-黑马河→鸟岛"><a href="#DAY2-茶卡盐湖-黑马河→鸟岛" class="headerlink" title="DAY2 茶卡盐湖 黑马河→鸟岛"></a>DAY2 茶卡盐湖 黑马河→鸟岛</h3><p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/20190822_212753.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_061800.jpg" alt></p>
<p>8月16号早上6点我就起床了，准备去湖边看日出。最佳观日点在黑马河乡东北方向，有一条小路通向湖边，距离黑马河乡两公里多，不收费。路上有载客的当地人，工具有摩托车和马，我当然是骑着车过去了。早上气温很低，温度不超过10℃，我只穿了一件薄外套，感觉较冷，湖边还有提供军大衣出租的当地人。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_061123.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_061139.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_063332.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_063044.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_064103.jpg" alt></p>
<p>因天气不佳，未看到日出，稍有些遗憾。</p>
<p>回到旅馆，买了点早餐吃。准备前往茶卡盐湖，从黑马河乡到茶卡盐湖距离约80公里，中间有一座橡皮山海拔很高，骑车前往难度很大，我决定包车前往，旅馆老板帮我联系了一个司机。那两位老哥骑青藏线也要经过茶卡盐湖，我们早上就此分别。出发前，我加了两位老哥的微信。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_085107.jpg" alt></p>
<p>前往茶卡盐湖的途中，曲折的山路。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_112744_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_102959.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_112949.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_111231_1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_110856.jpg" alt></p>
<p>上午10点左右到达茶卡盐湖，司机说等我们两个小时，12点钟在景区门口会合。与我同行的还有一个小哥，与他聊天得知他是徒步来环青海湖的，也是个狠人。我赤脚下水让小哥帮我拍了几张照。因为当天天气不是很好，拍出的照片不是很满意。盐湖的盐层像冰层一样，有的地方还有空洞。</p>
<p>不一会就到了12点，司机已经在景区门口等我们了。回到黑马河我让小哥在黑马河租个自行车骑，小哥最后还是没有租。我们一起吃了午饭，加了微信，就此分别。</p>
<p>我回到旅馆，睡了个午觉，下午3点，收拾行装，重新出发。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_152838.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_153935.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190816_163017_1.jpg" alt></p>
<p>出了黑马河乡，进入环湖西路，又重新回到了湖边，这段路程景色极佳，中途有一个令人绝望的上坡。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_080807.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_080649.jpg" alt><br>下午6点左右，到达鸟岛，找了个青旅住下。吃过晚饭，然后去超市买了第二天的早餐。在青旅遇到了一位骑友小陈，他还是在校学生，趁着暑假从成都骑过来的，我们决定第二天结伴前行。此时距离西海镇还有160km左右，我们准备第二天一口气骑完。</p>
<h3 id="DAY3-鸟岛→泉吉乡→刚察县→沙岛"><a href="#DAY3-鸟岛→泉吉乡→刚察县→沙岛" class="headerlink" title="DAY3 鸟岛→泉吉乡→刚察县→沙岛"></a>DAY3 鸟岛→泉吉乡→刚察县→沙岛</h3><p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_081501.jpg" alt></p>
<p>17日早上，我继续早起准备去看日出，因天气原因，还是未能如愿。到7点半，我喊小陈起床，一起吃了早餐，然后就出发了。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_082548.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_082607.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_084959.jpg" alt></p>
<p>路上遇到一位骑马的藏民，还问我们骑不骑马。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_090606_1.jpg" alt></p>
<p>还有一些骑友在举办一个业余赛事。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_090843.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_090859.jpg" alt></p>
<p>鸟岛九号露营地，有很多房车。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_091218_1.jpg" alt></p>
<p>青藏铁路。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_093729_1.jpg" alt></p>
<p>小陈没我骑的快，我经常停下等他一会。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_103444.jpg" alt></p>
<p>10点半到达泉吉乡，感觉肚子有点饿，在一个超吃买了点东西吃。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_105554.jpg" alt><br>出了泉吉乡，途径一条小河，河水很清澈，有很多鱼。出了泉吉乡，就基本上看不到湖面了。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_115247.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_123346.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_124646.jpg" alt></p>
<p>12点半到达刚察县，在刚察县吃午饭。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_133000.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_132919.jpg" alt></p>
<p>刚察县一个装修很豪华的厕所，我戏称为五星级厕所。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_133714.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_134036_1.jpg" alt></p>
<p>出了刚察县，就有一个很长的上坡教做人，好在上坡之后就是下坡，下坡时不用脚踩就能飙到三四十码。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_184525.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_183144.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_182541.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_182631.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_182106.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190817_182338.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/20190823_105131.jpg" alt></p>
<p>下午6点左右，我们发现有一条小路可通向湖边，就去湖边玩了一会。湖水也很清澈，我用舌头尝了一下湖水，也是咸的，但没有海水那么咸。后来看地图发现这只是一个小湖，叫尕海。<br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_091518.jpg" alt></p>
<p>下午7点多，到达沙岛景区附近，此时逆风很大，骑着很费劲。我们现在景区附近的餐馆吃了晚饭，吃完发现风刮的更大了，基本骑不动了。此时距离西海镇还有40公里左右，小陈打算夜骑被我劝住了，我们就在景区的宾馆住宿。</p>
<h3 id="DAY4-沙岛→西海镇-原子城纪念馆"><a href="#DAY4-沙岛→西海镇-原子城纪念馆" class="headerlink" title="DAY4 沙岛→西海镇 原子城纪念馆"></a>DAY4 沙岛→西海镇 原子城纪念馆</h3><p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_091855.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_091528.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_102508.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_103557.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_105158.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_105741.jpg" alt></p>
<p>早上我们在宾馆吃了泡面当早餐，9点多出发。途中又有几个上坡，但难度不是很大，上坡过后就基本都是下坡路了。11点到达西海镇，在一个小卖部吃了一盒牦牛酸奶。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_113655.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190823_112444.jpg" alt></p>
<p>到达西海镇后，我们去了镇上的原子城纪念馆。纪念馆主要介绍了我国核武器的发展历程，馆内展品禁止拍照。出口处有一个出售纪念品的商店，小陈买了一个纪念币，我买了一个指尖陀螺。</p>
<p><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_140546.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/IMG_20190818_152906.jpg" alt></p>
<p>参观结束后，我们一起吃了个散伙饭。 然后回到驿站，把车拆了，下午乘大巴回西宁，第二天乘火车返回上海。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>总的来说，本次骑行还是比较成功的，人和车一路上都没有意外发生，爬坡的路段我也是全程骑上去的，没有下来推车。有点后悔的就是东西带的太多，稍微增大了骑行难度，那个车包也后悔用了，下次出行我会买个手拉车，把车放在上面，就不会那么累了。可能你会好奇，死飞没有变速，爬坡是什么感受？ 感受就是虽然累，但还没有到爬不动的地步，我的车以前的齿比是48:17，来之前我换了一个飞轮，把齿比换成了48:19，稍微减小了齿比。另外爬坡的时候死飞是两只脚都能发力（前脚踩，后脚拉），所以效率反而比普通自行车要高。<br>比较遗憾的是没看到青海湖的日出，去茶卡盐湖玩的时候天气也不是很好。</p>
<p>更多照片请查看相册： <a href="/galleries/生活相关/青海湖骑行记">青海湖骑行记</a></p>
<h3 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h3><p>使用relive APP生成的运动轨迹视频，因免费版只能生成12小时以内的运动轨迹，所以后面少了一小段。</p>
<div style="width:100%;height:480px;">
<iframe style="width:100%;height:100%;" src="//player.bilibili.com/player.html?aid=65020156&cid=112856448&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
</div>



]]></content>
      <categories>
        <category>生活记录</category>
      </categories>
      <tags>
        <tag>骑行</tag>
        <tag>游记</tag>
      </tags>
  </entry>
  <entry>
    <title>使用AES算法加密Hexo相册</title>
    <url>/2019/07/30/%E4%BD%BF%E7%94%A8AES%E7%AE%97%E6%B3%95%E5%8A%A0%E5%AF%86Hexo%E7%9B%B8%E5%86%8C/</url>
    <content><![CDATA[<p>本教程承接上篇<a href="/2019/07/22/hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB%E7%9B%B8%E5%86%8C/">Hexo博客添加一级分类相册</a>。</p>
<p>在上篇教程中，我们已经实现了hexo的分类相册功能。然后我发现那个大佬的相册竟然还有加密的功能（点击进入<a href="http://www.rayblog.cn/album/" target="_blank" rel="noopener">大佬的相册</a>），在大佬的这篇<a href="http://www.rayblog.cn/posts/uncategorized/2017-07-05-establish-blog.html" target="_blank" rel="noopener">教程</a>下面，还有一个参考资料：使用AES算法加密hexo文章，可惜的是链接已经失效了，不过也没有关系，在网上查找相关资料后，我也把它实现了，本篇教程就来实现相册加密功能。</p>
<p>先来科普一下AES加密算法：高级加密标准（英语：Advanced Encryption Standard，缩写：AES），在密码学中又称Rijndael加密法，是美国联邦政府采用的一种区块加密标准。这个标准用来替代原先的DES，已经被多方分析且广为全世界所使用。经过五年的甄选流程，高级加密标准由美国国家标准与技术研究院（NIST）于2001年11月26日发布于FIPS PUB 197，并在2002年5月26日成为有效的标准。2006年，高级加密标准已然成为对称密钥加密中最流行的算法之一。</p>
<h4 id="1、主题自带的加密"><a href="#1、主题自带的加密" class="headerlink" title="1、主题自带的加密"></a>1、主题自带的加密</h4><p>首先我发现本主题自带一个加密功能：如下图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_120352.png" alt></p>
<p>它的实现效果是这样的：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_120754.png" alt></p>
<p>在进入界面的时候就要求输入密码，不输或输入错误都会跳转到首页。</p>
<p>在我看了源码之后发现是这样实现的，如果文章配置了加密就在页面里加上一段js代码，源码在<code>post.ejs</code>文件里，如下图；</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_121113.png" alt></p>
<p>页面内生成的js代码呢，是这样的：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_121325.png" alt></p>
<p>我们可以看到密码是直接写在页面内的，主题作者是采用<code>SHA256</code>再加密一遍密码，再用这个值当密码，防止别人识破。然而这种方式是伪加密的，查看网页的源代码就可以看到文章的内容。这种方式可以阻挡99%的人，但是对付懂行的人就不行了，有心人费点心思就能破解。</p>
<h4 id="2、Hexo插件加密"><a href="#2、Hexo插件加密" class="headerlink" title="2、Hexo插件加密"></a>2、Hexo插件加密</h4><p>然后我以<code>hexo 加密</code>为关键字搜索相关教程，得到的结果如下：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_115324.png" alt></p>
<p>里面的内容大同小异，不外乎两个hexo的插件：一个是<code>hexo-blog-encrypt</code>，另一个是<code>hexo-encrypt</code>。在我把两个插件都尝试过了之后，发现这两个插件只能加密<code>文章</code>，也就是hexo从md文件里读取到的文章内容。而我们的相册呢，是根据配置文件自动生成的，并没有在md文件里写着，实现不了加密。</p>
<p>好吧，那我就研究一下这两个插件的原理，看它们是如何实现文章加密的。</p>
<p>先使用<code>hexo-blog-encrypt</code>插件，给<a href>hello world</a>这篇文章加密试试：<br>首先启用该插件，在根目录的_config.yml中启用该插件，添加以下代码:</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># Security  </span>
  <span class="token key atrule">encrypt</span><span class="token punctuation">:</span> 
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>然后设置文章的密码，在文章头部加上<code>password</code>字段,密码为2233:</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">
<span class="token hr punctuation">---</span>
title: Hello，world！
date: 2019-07-15 17:25:30
password: 2233
tags: 
<span class="token list punctuation">-</span> hello world
categories:
<span class="token list punctuation">-</span> 日志  
<span class="token hr punctuation">---</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后<code>hexo-blog-encrypt</code>插件就会把文章加密了，如下图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_131238.png" alt></p>
<p>页面结构如下：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_131459.png" alt></p>
<p>文章的内容被加密成了这么一坨字符串，解密后变成了这样：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_131813.png" alt></p>
<p>文章的内容，就是两个P标签。</p>
<h4 id="3、插件的加密过程"><a href="#3、插件的加密过程" class="headerlink" title="3、插件的加密过程"></a>3、插件的加密过程</h4><p>那一坨字符串是怎么变成两个P标签的呢，我仔细研究后发现解密的功能在<code>blog-encrypt.js</code>这个文件里，在知道正确密码的情况下，执行了四步转换才将那个字符串解密，源码如下：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_133345.png" alt></p>
<p>那么这四步都干了什么呢，我把上面加密后的一坨字符串和相关js都放到一个html里在浏览器控制台调试一下，看看究竟是怎么解密的：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_133720.png" alt></p>
<p>控制台输出如下：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_133817.png" alt></p>
<p>我们可以看到，在第四步输出了解密后的HTML标签。</p>
<p>解密步骤如下：</p>
<p>1、根据密码使用AES算法将密文解密，解密的代码为：</p>
<pre class="line-numbers language-js"><code class="language-js">  <span class="token keyword">let</span> content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>AES<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>encriptHtmlStr<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解密出来的内容是一个JS对象，里面有一个words数组，展开后如下图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_135141.png" alt></p>
<p>2、将上面那个JS对象转换为utf-8码，转换后为成为一个base64字符串。</p>
<p>3、解码base64字符串，解码后是一个经过js转码(escape)的字符串。</p>
<p>4、解码(unescape)上面的字符串，最终结果为HTML标签。</p>
<p>既然知道了解密的过程，那么可以推断加密过程就是上述步骤的逆操作，在查看<code>hexo-blog-encrypt</code>的源码之后（在<code>node_modules</code>目录下），果不其然，找到如下代码：</p>
<pre class="line-numbers language-js"><code class="language-js">data<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>AES<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>content<span class="token punctuation">,</span> <span class="token function">String</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>CryptoJS是引入的<code>npm</code>插件<code>crypto-js</code></p>
<pre class="line-numbers language-js"><code class="language-js">
<span class="token keyword">const</span> CryptoJS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto-js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>那么我们也能写一个加密函数，在生成HTML字符串的时候加密它，然后把加密后的字符串渲染出来。</p>
<h4 id="4、加密辅助函数"><a href="#4、加密辅助函数" class="headerlink" title="4、加密辅助函数"></a>4、加密辅助函数</h4><p>然而在实际操作的时候我发现在ejs文件里面用常规的方法引入<code>npm</code>插件是不行的，无论是<code>import &#39;crypto-js&#39;</code>还是 <code>require(&#39;crypto-js&#39;)</code>都是不行的。那么如何在ejs里面调用外部函数呢？ </p>
<p>在查看<a href="https://hexo.io/zh-cn/api/helper.html" target="_blank" rel="noopener">官方文档</a>之后发现需要自己写一个辅助函数（helper），才能在ejs里调用它：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_192430.png" alt></p>
<p>然后我们在主题根目录下新建以下目录和文件<code>scripts/helpers/encrypt.js</code>，<code>encrypt.js</code>内代码如下：</p>
<pre class="line-numbers language-js"><code class="language-js">
<span class="token comment" spellcheck="true">/* global hexo */</span>


<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CryptoJS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto-js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>helper<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'aes'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">{</span>

  content <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  content <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>AES<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token function">String</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注册一个名为<code>aes</code>的辅助函数，这样才能在ejs文件里使用它。</p>
<p>然后将<code>gallery.ejs</code>文件内中间的HTML部分改成如下代码：</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>photo-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">if</span> <span class="token attr-name">(page.password</span> <span class="token attr-name">)</span> <span class="token attr-name">{</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/crypto-js.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/js/gallery-encrypt.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hbe-security<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hbe-input-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hbe-form-control<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pass<span class="token punctuation">"</span></span>  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>请输入密码查看内容<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn-decrypt<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn_decrypt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>解密<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mygallery<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>waterfall<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>encrypt-blog<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%-</span> <span class="token attr-name">aes(imageStr,</span> <span class="token attr-name">page.password)</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">}</span> <span class="token attr-name">else</span> <span class="token attr-name">{</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>waterfall<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>encrypt-blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%-</span> <span class="token attr-name">imageStr</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">}</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>初始化<code>justifiedGallery</code>插件的那句代码修改成下面的，就是改了一个id</p>
<pre class="line-numbers language-js"><code class="language-js">  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#encrypt-blog"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>margins<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> rowHeight<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这段代码的作用就是判断相册是否有密码，有则加密，没有则正常渲染，密码也是写在md文件的头部，加密后页面样式和HTML结构如下：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_220409.png" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E5%8A%A0%E5%AF%86%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190730_211445.png" alt></p>
<p>可以看到内容已经被加密成了一坨乱码，在这里，我手动加了一个<code>解密</code>按钮，原来插件是没有的，然后写点css美化一下，我是加到了<code>my.css</code>里面</p>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector"><span class="token class">.hbe-input-container</span>  <span class="token class">.btn-decrypt</span></span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">120</span>px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">32</span>px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">16</span>px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#ffffff</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#3f90ff</span><span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">-webkit-border-radius</span><span class="token punctuation">:</span> <span class="token number">3</span>px<span class="token punctuation">;</span>
  <span class="token property">-moz-border-radius</span><span class="token punctuation">:</span> <span class="token number">3</span>px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">3</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="5、修改解密js文件"><a href="#5、修改解密js文件" class="headerlink" title="5、修改解密js文件"></a>5、修改解密js文件</h4><p>因为和文章的加密有点区别，而且插件的解密操作会在id为<code>encrypt-blog</code>的div上加上一些样式，会导致<code>justifiedGallery</code>样式错乱，所以是不能直接用文章的解密js文件（<code>/lib/blog-encrypt.js</code>）的。此文件在发布后才会生成，在<code>hexo-blog-encrypt</code>插件的目录（<code>node_modules/hexo-blog-encrypt</code>）下也能找到，需要做些修改才能解密相册，找到该文件后复制一份，重命名为<code>gallery-encrypt.js</code>,放到主题目录<code>source/js</code>下，替换文件尾部<code>$(document).ready()</code>里面的代码如下：</p>
<pre class="line-numbers language-js"><code class="language-js">
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> password <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token function">GenerateCookieName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Get password from Cookie:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>password <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">decryptAES</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// Delete cookie</span>
        <span class="token function">setCookie</span><span class="token punctuation">(</span>COOKIE_NAME<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'encrypt-blog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#encrypt-blog"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>margins<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> rowHeight<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>onkeypress <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>keyPressEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      password <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>keyPressEvent<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">decryptAES</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'encrypt-blog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#encrypt-blog"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>margins<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> rowHeight<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token function">GenerateCookieName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btn_decrypt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      password <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">decryptAES</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'encrypt-blog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#encrypt-blog"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>margins<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> rowHeight<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token function">GenerateCookieName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这段代码的作用就是在解密后清除id为<code>encrypt-blog</code>这个div的样式，然后再初始化 <code>justifiedGallery</code>插件，解决图片错乱的问题，还有给按钮绑定解密的操作。</p>
<p>至此，相册的加密功能也已经实现了。你可以前往<a href="/galleries/private/">体验一下</a>，看你能不能破解。</p>
<h4 id="6、注意事项"><a href="#6、注意事项" class="headerlink" title="6、注意事项"></a>6、注意事项</h4><p>需要注意的是上面HTML里引入的<code>crypto-js.js</code>这个文件，只有安装了<code>hexo-blog-encrypt</code>插件发布后才会生成，如果你不想安装这个插件，则需要手动安装<code>crypto-js</code>: <code>npm i crypto-js</code>, 然后在插件目录下找到<code>crypto-js.js</code>文件，复制出来放到<code>source/js</code>下，引用路径也要改一下。</p>
<p>博客源码已上传至github: <a href="https://github.com/liyang5945/liyang5945.github.io" target="_blank" rel="noopener">点击前往</a>,觉得不错的可以给个STAR支持一下。</p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>教程</tag>
        <tag>相册</tag>
        <tag>加密</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo博客添加一级分类相册功能</title>
    <url>/2019/07/22/hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB%E7%9B%B8%E5%86%8C/</url>
    <content><![CDATA[<p>最近在折腾自己的博客，在折腾的过程中也参观了许多大牛的博客，发现不少博主都有个相册页面，我也想在自己的博客上面加个相册功能。但是我现在用的这个主题呢，虽然有个相册的功能，但是我感觉有点简陋，点击照片是个弹出的轮播图，照片多了的话还要一张一张的翻。如下图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-01.jpg" alt></p>
<a id="more"></a>

<p>后来在网上找了不少教程，可是实现的结果大部分都是这种：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/%E4%B8%8D%E5%B8%A6%E5%88%86%E7%B1%BB%E7%9A%84%E7%9B%B8%E5%86%8C.jpg" alt></p>
<p>虽然有了分类的功能，但是所有照片都是在一个页面上，图片多了会影响页面加载速度，页面也会变得很长，移动端会浪费大量流量，用户体验不是很好。</p>
<p>该博客地址：<a href="http://lawlite.me/photos/" target="_blank" rel="noopener">http://lawlite.me/photos</a></p>
<p>而我想要的呢，是个类似<code>QQ空间</code>的相册，要有个相册目录界面，然后可以从目录页跳转至相册列表界面。 然后我翻遍了整个互联网终于找到了一个有相册分类功能的博客，该博客的相册界面是这样的：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/%E5%88%86%E7%B1%BB%E7%9B%B8%E5%86%8C1.jpg" alt><br><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190722-153547.jpg" alt></p>
<p>该博客地址：<a href="http://www.rayblog.cn/album/" target="_blank" rel="noopener">http://www.rayblog.cn/album</a></p>
<p>好吧，这就是我想要的效果，而且博客下面还有教程，我研究了半天，把代码都拷到本机运行了之后，发现他这个教程也只是实现了相册的列表界面，至于目录界面是怎么弄出来的只是一笔带过。并没有实现的细节。我个人猜测他的目录界面是一个<code>album/index.md</code>文件，然后md文件里手动写的HTML代码。 </p>
<p>虽然这种方式我也能实现，但我并不想这么做，因为我感觉在markdown文件里面写HTML和js不是很优雅，也有些繁琐，假如要添加一个相册的话还要手动修改里面的HTML代码，添加对应的链接。</p>
<p>后来我仔细研究了这个主题的源码，发现这个主题的<code>友情链接</code>界面实现的方式是这样的，读取<code>sources/_data/friends.json</code>文件,该文件内容如下：</p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"码酱"</span><span class="token punctuation">,</span>
  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"我不是大佬，只是在追寻大佬的脚步"</span><span class="token punctuation">,</span>
  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://luokangyuan.com/"</span><span class="token punctuation">,</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/4027734.jpeg"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"闪烁之狐"</span><span class="token punctuation">,</span>
  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"编程界大佬，技术牛，人还特别好，不懂的都可以请教大佬"</span><span class="token punctuation">,</span>
  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://blinkfox.github.io/"</span><span class="token punctuation">,</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/avatar.jpg"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ja_rome"</span><span class="token punctuation">,</span>
  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"平凡的脚步也可以走出伟大的行程"</span><span class="token punctuation">,</span>
  <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"ttps://me.csdn.net/jlh912008548"</span><span class="token punctuation">,</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>该文件包含每个友链的头像、名字、介绍、地址、标题信息，然后hexo会按照friends.ejs模板文件里的结构渲染出来列表，实现的效果就是这样的:<br><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-02.jpg" alt></p>
<p>就是三个a标签，里面包含头像、地址等信息，点击后跳到对应的地址。</p>
<p>那么我们也能自定义一个相册的配置文件和模板文件，然后hexo读取这个配置文件，自动生成目录界面和列表界面，这样的话，只需要修改这个配置文件就能完成对相册的各种操作（增删改）。</p>
<p>好吧，有了思路，就已经成功一半了，至于代码实现呢，就只是时间问题了。花了一个周末的时间我终于把它实现了。下面是具体实现过程:</p>
<h4 id="1、添加【相册】菜单"><a href="#1、添加【相册】菜单" class="headerlink" title="1、添加【相册】菜单"></a>1、添加【相册】菜单</h4><p>这里要修改几个文件：</p>
<p>该主题的配置文件<code>_config.yml</code> ，不要跟站点根目录下的同名文件搞混了，在<code>menu</code>下添加以下代码:</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">Galleries</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries
    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fa<span class="token punctuation">-</span>photo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>该主题的语言配置文件目录 <code>languages</code>下的 <code>default.yml</code>和<code>zh-CN.yml</code>，分别是英文和中文的配置文件，分别添加以下内容，</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">galleries</span><span class="token punctuation">:</span> galleries

<span class="token key atrule">galleries</span><span class="token punctuation">:</span> 相册<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>该主题目录下<code>layout/_partial/navigation.ejs</code>和<code>layout/_partial/mobile-nav.ejs</code>文件里添加</p>
<pre class="line-numbers language-js"><code class="language-js">    menuMap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">"Galleries"</span><span class="token punctuation">,</span> <span class="token string">"相册"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>至于添加到什么位置，你打开文件就知道了，里面会有类似格式的代码，很容易找到的。</p>
<p>做完以上操作后，你就会发现<code>相册</code>的菜单已经出现了：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-03.jpg" alt></p>
<p>点击就能跳转到<code>galleries</code>下，然而浏览器会提示你：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-04.jpg" alt></p>
<p>因为站点下并没有<code>galleries/index.html</code>这个文件，如何生成这个文件呢?<br>在站点根目录<code>source</code>下新建<code>galleries</code>目录，然后在该目录下新建<code>index.md</code>，就会生成<code>index.html</code>文件了，然而却是这个效果：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-05.jpg" alt></p>
<h4 id="2、生成相册目录和相册列表"><a href="#2、生成相册目录和相册列表" class="headerlink" title="2、生成相册目录和相册列表"></a>2、生成相册目录和相册列表</h4><p>这是为什么呢？因为hexo把这个文件当成一个普通的文章来渲染了，而我们需要自定义样式，不能让它渲染成普通的文章。要让它渲染成一个<code>layout</code>,也就是我们自定义的模板。需要以下操作：<br>在<code>index.md</code>文件里添加以下内容，注意，那几个中划线也不要少了。</p>
<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">title</span><span class="token punctuation">:</span> 相册
<span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"galleries"</span>
<span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>首先添加自定义CSS样式文件，该<code>主题</code>目录下的<code>source/css</code>里新建<code>gallery.css</code>文件，复制以下css样式进去：</p>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector"><span class="token class">.gallery-wrapper</span></span><span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> <span class="token number">30</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.gallery-wrapper</span> <span class="token class">.gallery-box</span></span><span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span>px <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.gallery-wrapper</span> <span class="token class">.gallery-item</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">5</span>px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">-moz-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">3</span>px <span class="token number">0</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">3</span>px <span class="token number">0</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">3</span>px <span class="token number">0</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.gallery-cover-box</span></span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> <span class="token number">60%</span><span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> center center no-repeat<span class="token punctuation">;</span>
  <span class="token property">-webkit-background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.gallery-cover-box</span> <span class="token class">.gallery-cover-img</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-<span class="token number">50%</span>,-<span class="token number">50%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.gallery-item</span> <span class="token class">.gallery-name</span></span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">24</span>px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#666</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.waterfall</span> </span><span class="token punctuation">{</span>
  <span class="token property">column-count</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token property">column-gap</span><span class="token punctuation">:</span> <span class="token number">1</span>em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.photo-wrapper</span></span><span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.photo-item</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">-moz-page-break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span>
  <span class="token property">-webkit-column-break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span>
  <span class="token property">break-inside</span><span class="token punctuation">:</span> avoid<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">-moz-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">3</span>px <span class="token number">0</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">3</span>px <span class="token number">0</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">3</span>px <span class="token number">0</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.photo-item</span> img </span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">.photo-item</span> <span class="token class">.photo-name</span></span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">30</span>px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
  <span class="token property">border-top</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#dddddd</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*适配移动端布局*/</span>
<span class="token atrule"><span class="token rule">@media</span> only screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 601px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector"><span class="token class">.waterfall</span> </span><span class="token punctuation">{</span>
    <span class="token property">column-count</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token property">column-gap</span><span class="token punctuation">:</span> <span class="token number">1</span>em<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在该主题<code>layout</code>目录下新建<code>galleries.ejs</code>文件，添加以下代码：</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/css/gallery.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

&lt;%- partial('_partial/bg-cover') %>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">if</span> <span class="token attr-name">(site.data</span> <span class="token attr-name">&amp;&amp;</span> <span class="token attr-name">site.data.galleries)</span> <span class="token attr-name">{</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
        &lt;% var galleries = site.data.galleries; %>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gallery-wrapper row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            &lt;% for (var i = 0, len = galleries.length; i &lt; len; i++) { %>
            &lt;% var gallery = galleries[i]; %>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col s6 m4 l4 xl3 gallery-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./&lt;%- gallery.name %<span class="token punctuation">></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gallery-item<span class="token punctuation">"</span></span> <span class="token attr-name">data-aos</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>zoom-in-up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gallery-cover-box<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(http://图片地址.com/&lt;%- gallery.cover%>)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gallery-name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%-</span> <span class="token attr-name">gallery.name</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">}</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">}</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>


<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>同目录下新建<code>gallery.ejs</code>，添加以下代码：</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/css/gallery.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/libs/fancybox/jquery.fancybox.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/libs/justifiedGallery/justifiedGallery.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

&lt;%- partial('_partial/post-cover') %>
&lt;%
let galleries = [];
if (site.data &amp;&amp; site.data.galleries) {
    galleries = site.data.galleries;
}
var pageTitle = page.title;
function getCurrentGallery(galleries, pageTitle) {
    for (let i = 0; i &lt; galleries.length; i++) {
        if (galleries[i]['name'] == pageTitle) {
            return galleries[i];
        }
    }
}
var currentGallery = getCurrentGallery(galleries, pageTitle)

var photos = currentGallery.photos;

let imageStr = ''

for (var i = 0, len = photos.length; i &lt; len; i++) {
    var photo = photos[i];

    imageStr += "&lt;a href=\"http://图片地址.com/" + photo + "\"" +
            "     class=\"photo-item\" rel=\"example_group\"" +
            "     data-fancybox=\"images\">" +
            "      &lt;img src=\"http://图片地址.com/" + photo + "\"" +
            "       alt=" + photo + ">\n" +
            "    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>"

}
%>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>photo-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>waterfall<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mygallery<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%-</span> <span class="token attr-name">imageStr</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/libs/fancybox/fancybox.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/libs/justifiedGallery/justifiedGallery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">

  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"a[rel=example_group]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fancybox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#mygallery"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>margins<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> rowHeight<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>以上代码实现的功能呢，就是读取相册配置文件并把相册目录和相册列表都渲染成HTML，用<code>&lt;% %&gt;</code>包起来的代码是<code>ejs</code>语法，调试的话是在本地控制台输出的而不是浏览器，就是你输入<code>hexo s</code>的地方，我这里用的是WebStorm自带的终端，看下图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-06.jpg" alt></p>
<p>另外上面代码里引用了两个<code>jquery插件</code>，分别是<code>fancybox</code>和<code>justifiedGallery</code>, 一个是点击弹出的轮播插件，一个是自动调整图片布局的插件，需要自行下载并放到相应目录，当然，你也可以用浏览器调试工具直接在我的博客上下载，在sources里找到对应的文件，另存为就行。</p>
<h4 id="3、制作相册配置文件"><a href="#3、制作相册配置文件" class="headerlink" title="3、制作相册配置文件"></a>3、制作相册配置文件</h4><p>在<code>站点</code>目录<code>sources/_data/</code>下新建一个<code>galleries.json</code>的文件，模板如下：</p>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"2017"</span><span class="token punctuation">,</span>
    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"2017/IMG_20171109_124516.jpg"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"2017年记录"</span><span class="token punctuation">,</span>
    <span class="token property">"photos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"2017/IMG_20170924_110224.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2017/IMG_20170924_113412.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2017/IMG_20171109_124516.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2017/IMG_20171125_125304.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2017/IMG_20171126_181605.jpg"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"2018"</span><span class="token punctuation">,</span>
    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"2018/IMG_20181124_125818.jpg"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"2018年记录"</span><span class="token punctuation">,</span>
    <span class="token property">"photos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"2018/IMG_20180204_113055.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2018/IMG_20180204_113302.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2018/IMG_20180204_113442.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2018/IMG_20180208_083336.jpg"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"2019"</span><span class="token punctuation">,</span>
    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"2019/IMG_20190331_165713_1.jpg"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"2019年记录"</span><span class="token punctuation">,</span>
    <span class="token property">"photos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"2019/IMG_20190118_200104.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2019/IMG_20190118_200120.jpg"</span><span class="token punctuation">,</span>
      <span class="token string">"2019/IMG_20190118_200456.jpg"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>就是一个包含多个相册的列表JSON，每个相册有以下字段，<code>name</code>是相册标题，<code>cover</code>是封面图片，从相册里随便选一个就行，<code>description</code>是相册介绍，<code>photos</code>是图片列表。图片较少的话手动复制进去就行，如果你图片较多的话推荐使用脚本之类的东西自动生成，我是使用了上面博客里的js文件生成的。我这里使用了七牛对象存储做为图床，需要在代码里加上七牛的地址才能正常显示。</p>
<p>配置文件建好了之后还没完，只剩最后一个步骤了，在<code>galleries</code>下建立对应的相册名称目录和文件，比如我这三个相册需要建 2017 2018 2019三个目录，然后下面再分别新建<code>index.md</code>文件，文件内容为:</p>
<pre class="line-numbers language-html"><code class="language-html">---
title: 2017
layout: "gallery"
---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>建好相应目录和文件之后，如果你的图片路径也没有错的话，相册目录和列表就都会渲染出来了，如下所示：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/2019-07-22-07.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190722_161044.jpg" alt></p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190722_160930.jpg" alt></p>
<h4 id="4、照片列表的布局选择"><a href="#4、照片列表的布局选择" class="headerlink" title="4、照片列表的布局选择"></a>4、照片列表的布局选择</h4><p>上面的博客用的布局都比较简单粗暴，都是固定的大小和宽高比。但是不同的图片有不同的宽高比，用这种模式的话图片有两种显示方式，一是强制缩放到固定的宽高，二是裁切只显示一部分，但是都有缺点，第一个会图片会变形，第二个图片显示不全。那么有没有两全齐美的办法呢？答案是肯定的。首先我选用的是瀑布流布局，用CCS3的新特性实现的，这种模式的特点是等宽布局，固定列数，图片高度自适应，如下图：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190115114259.jpg" alt></p>
<p>看起来似乎没什么问题，高端大气上档次，然而做好了我发现图片的排列顺序是这个样子的，是按列竖向排列的，不太符合阅读习惯，PASS。</p>
<p>另外一种布局呢是等高布局，如图；<br><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190723_110706.jpg" alt></p>
<p>这种布局是等高布局，图片高度一致，宽度自适应，图片托管网站flickr就是用的这种模式，但是用CSS方法是实现不了的，因为每一行最后张图片不一定能正好撑满这一行，需要用js动态设置图片的宽高来实现，上面引用的<code>justifiedGallery</code>插件就是来完成这个的。<br>下面代码的功能就是初始化这个插件，间距是5px，每一行的高度是150px。</p>
<pre class="line-numbers language-js"><code class="language-js">  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#mygallery"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifiedGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>margins<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> rowHeight<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这两种布局呢，上面的代码里都是包含了的。是可以手动切换的。只需要把上面那句代码注释掉就会切换到瀑布流布局，效果如下图：<br><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190723_134939.jpg" alt></p>
<p>当然，你要是对我写的样式不满意的话也可以自己修改代码，边框和文件名都是可以去掉的。</p>
<h4 id="5、图床相关事项"><a href="#5、图床相关事项" class="headerlink" title="5、图床相关事项"></a>5、图床相关事项</h4><p>2019-08-28更新:</p>
<p>最初我是采用的七牛对象存储当为图床，但是我发现一个问题，在相册列表界面下，相册图片较多或图片体积很大的情况下加载速度会很慢，也会浪费大量的流量。七牛CDN免费流量只有10G，然而我还作死的把几个图片的链接地址放到了某论坛上，图片也没有做任何处理，一个图片为几MB大小，在我放出外链几个小时之后，CDN流量就爆了，超出了约60G：</p>
<p><img src="https://images.liyangzone.com/article_img/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E6%95%99%E7%A8%8B/20190828_223502.jpg" alt></p>
<p>为了防止类似的事情发生，以及减少CDN流量消耗，可以使用以下两种方案：</p>
<p>一是手动生成图片的缩略图到另外一个新目录，保持与原相册目录结构一致。比如我一个图片路径为 /gallery/2017/XXX.jpg,缩略图结构应为/gallery-tiny/2017/XXX.jpg。</p>
<p>在相册列表界面应使用缩略图而不是使用原图。上面代码中 <code>a标签</code>里的地址是大图地址，点击弹出的时候才会加载，<code>img</code>标签里的地址是缩略图地址。</p>
<p>缩略图大小我调整为600px宽度，这样每个图片体积可减少到100KB以下。这样一个100张图片的相册，缩略图也不超过10MB。缩略图我使用 <code>Light Image Resizer</code> 软件批量生成。</p>
<p>上面对应的代码需要改为:</p>
<pre class="line-numbers language-js"><code class="language-js">
 imageStr <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">"&lt;a href=\"http://imgs.liyangzone.com/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\""</span> <span class="token operator">+</span>
            <span class="token string">"     class=\"photo-item\" rel=\"example_group\""</span> <span class="token operator">+</span>
            <span class="token string">"     data-fancybox=\"images\">"</span> <span class="token operator">+</span>
            <span class="token string">"      &lt;img src=\"http://imgs.liyangzone.com/gallery-tiny/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"\""</span> <span class="token operator">+</span>
            <span class="token string">"       alt="</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">">"</span> <span class="token operator">+</span>
            <span class="token string">"    &lt;/a>"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>二是使用七牛自带的<code>图片样式</code>功能，该功能提供简单快捷的图片格式转换、缩略、剪裁功能。只需要填写几个参数，即可对图片进行缩略操作，生成各种缩略图。比如我建立了一个名为 <code>w33</code> 的图片样式，该样式的功能就是生成原图33%大小的缩略图。假如一个100×100的图片，在图片地址后面加上这个样式后就变成33×33大小的了。对应代码需改为：</p>
<pre class="line-numbers language-js"><code class="language-js">
 imageStr <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">"&lt;a href=\"http://imgs.liyangzone.com/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"!w95\""</span> <span class="token operator">+</span>
            <span class="token string">"     class=\"photo-item\" rel=\"example_group\""</span> <span class="token operator">+</span>
            <span class="token string">"     data-fancybox=\"images\">"</span> <span class="token operator">+</span>
            <span class="token string">"      &lt;img src=\"http://imgs.liyangzone.com/"</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">"!w33\""</span> <span class="token operator">+</span>
            <span class="token string">"       alt="</span> <span class="token operator">+</span> photo <span class="token operator">+</span> <span class="token string">">"</span> <span class="token operator">+</span>
            <span class="token string">"    &lt;/a>"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>列表页使用33%大小的样式，查看大图使用95%大小的。上面的叹号是样式分隔符，七牛默认的分隔符有四个:</p>
<pre class="line-numbers language-html"><code class="language-html">- _ ! /<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>也可以改成下面的：</p>
<pre class="line-numbers language-html"><code class="language-html">~ ` @ $ ^ &amp; * ( ) + = { } [ ] | : ; " ' &lt; >
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>生成的图片地址是这样的,你可以复制到地址栏查看效果：</p>
<pre class="line-numbers language-html"><code class="language-html">http://imgs.liyangzone.com/2017/IMG_20170508_163002.jpg!w33
http://imgs.liyangzone.com/2017/IMG_20170508_163002.jpg!w75<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>另外建议开启七牛的原图保护功能并配置Referer防盗链，防止被恶意刷流量。</p>
<p>我目前使用的是第一种方案，只是把缩略图放到腾讯CDN了，不想麻烦的可以使用第二种。</p>
<p>博客源码已上传至github: <a href="https://github.com/liyang5945/liyang5945.github.io" target="_blank" rel="noopener">点击前往</a>,觉得不错的可以给个STAR支持一下。</p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>教程</tag>
        <tag>相册</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown使用指南</title>
    <url>/2019/07/17/markdown%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<h3 id="1-Markdown是什么？"><a href="#1-Markdown是什么？" class="headerlink" title="1. Markdown是什么？"></a>1. Markdown<em>是什么</em>？</h3><p><strong>Markdown</strong>是一种轻量级<strong>标记语言</strong>，它以纯文本形式(<em>易读、易写、易更改</em>)编写文档，并最终以HTML格式发布。<br><strong>Markdown</strong>也可以理解为将以MARKDOWN语法编写的语言转换成HTML内容的工具。    </p>
<h3 id="2-谁创造了它？"><a href="#2-谁创造了它？" class="headerlink" title="2. 谁创造了它？"></a>2. <em>谁</em>创造了它？</h3><p>它由<a href="http://www.aaronsw.com/" target="_blank" rel="noopener"><strong>Aaron Swartz</strong></a>和<strong>John Gruber</strong>共同设计，<strong>Aaron Swartz</strong>是一位有着<strong>开挂</strong>一般人生经历的程序员。维基百科对他的<a href="http://zh.wikipedia.org/wiki/%E4%BA%9A%E4%BC%A6%C2%B7%E6%96%AF%E6%B2%83%E8%8C%A8" target="_blank" rel="noopener">介绍</a>是：<strong>软件工程师、作家、政治组织者、互联网活动家、维基百科人</strong>。    </p>
<p>他有着足以让你跪拜的人生经历：    </p>
<ul>
<li><strong>14岁</strong>参与RSS 1.0规格标准的制订。     </li>
<li><strong>2004</strong>年入读<strong>斯坦福</strong>，之后退学。   </li>
<li><strong>2005</strong>年创建<a href="http://infogami.org/" target="_blank" rel="noopener">Infogami</a>，之后与<a href="http://www.reddit.com/" target="_blank" rel="noopener">Reddit</a>合并成为其合伙人。   </li>
<li><strong>2010</strong>年创立求进会（Demand Progress），积极参与禁止网络盗版法案（SOPA）活动，最终该提案被撤回。   </li>
<li><strong>2011</strong>年7月19日，因被控从MIT和JSTOR下载480万篇学术论文并以免费形式上传于网络被捕。     </li>
<li><strong>2013</strong>年1月自杀身亡。    <a id="more"></a>

</li>
</ul>
<p><img src="https://github.com/younghz/Markdown/raw/master/resource/Aaron_Swartz.jpg" alt="Aaron Swartz"></p>
<p>天才都有早逝的归途。</p>
<h3 id="3-为什么要使用它？"><a href="#3-为什么要使用它？" class="headerlink" title="3. 为什么要使用它？"></a>3. <em>为什么</em>要使用它？</h3><ul>
<li>它是易读（看起来舒服）、易写（语法简单）、易更改<strong>纯文本</strong>。处处体现着<strong>极简主义</strong>的影子。</li>
<li>兼容HTML，可以转换为HTML格式发布。</li>
<li>跨平台使用。</li>
<li>越来越多的网站支持Markdown。</li>
<li>更方便清晰地组织你的电子邮件。（Markdown-here, Airmail）</li>
<li>摆脱Word（我不是认真的）。</li>
</ul>
<h3 id="4-谁在用？"><a href="#4-谁在用？" class="headerlink" title="4. 谁在用？"></a>4. <em>谁</em>在用？</h3><p>Markdown的使用者：</p>
<ul>
<li>GitHub</li>
<li>简书</li>
<li>Stack Overflow</li>
<li>Apollo</li>
<li>Moodle</li>
<li>Reddit</li>
<li>等等</li>
</ul>
<h3 id="5-尝试一下"><a href="#5-尝试一下" class="headerlink" title="5. 尝试一下"></a>5. 尝试一下</h3><hr>
<h4 id="1-斜体和粗体"><a href="#1-斜体和粗体" class="headerlink" title="1. 斜体和粗体"></a>1. 斜体和粗体</h4><pre><code>*斜体*或_斜体_
**粗体**
***加粗斜体***
~~删除线~~</code></pre><p>view</p>
<p><em>斜体</em>或<em>斜体</em></p>
<p><strong>粗体</strong></p>
<p><strong><em>加粗斜体</em></strong></p>
<p><del>删除线</del></p>
<hr>
<h4 id="2-分级标题"><a href="#2-分级标题" class="headerlink" title="2. 分级标题"></a>2. 分级标题</h4><pre><code># 一级标题
## 二级标题
### 三级标题
#### 四级标题
##### 五级标题
###### 六级标题</code></pre><p>由于用了[TOC]标记编辑器会把所有标题写到目录大纲中，在这里写的演示标题也会列进去，所以就不演示了。同学们自己在编辑器中观察，很简单，一级标题字号最大，依级递减。</p>
<hr>
<h4 id="3-超链接"><a href="#3-超链接" class="headerlink" title="3. 超链接"></a>3. 超链接</h4><p>Markdown 支持两种形式的链接语法： 行内式和参考式两种形式，行内式一般使用较多。</p>
<h5 id="3-1-行内式"><a href="#3-1-行内式" class="headerlink" title="3.1. 行内式"></a>3.1. 行内式</h5><p>语法说明：</p>
<p>[]里写链接文字，()里写链接地址, ()中的”“中可以为链接指定title属性，title属性可加可不加。title属性的效果是鼠标悬停在链接上会出现指定的 title文字。链接地址与链接标题前有一个空格。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">欢迎来到<span class="token url">[liyang's blog](https://liyangzone.com)</span>

欢迎来到<span class="token url">[liyang's blog](https://liyangzone.com <span class="token string">"liyang's blog"</span>)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<p>欢迎来到<a href="https://liyangzone.com" target="_blank" rel="noopener">liyang’s blog</a></p>
<p>欢迎来到<a href="https://liyangzone.com" title="liyang&#39;s blog" target="_blank" rel="noopener">liyang’s blog</a></p>
<h5 id="3-2-参考式"><a href="#3-2-参考式" class="headerlink" title="3.2. 参考式"></a>3.2. 参考式</h5><p>参考式超链接一般用在学术论文上面，或者另一种情况，如果某一个链接在文章中多处使用，那么使用引用 的方式创建链接将非常好，它可以让你对链接进行统一的管理。</p>
<p>语法说明：<br>参考式链接分为两部分，文中的写法 [链接文字][链接标记]，在文本的任意位置添加[链接标记]:链接地址 “链接标题”，链接地址与链接标题前有一个空格。</p>
<p>如果链接文字本身可以做为链接标记，你也可以写成[链接文字][]<br>[链接文字]：链接地址的形式，见代码的最后一行。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">我经常去的几个网站<span class="token url">[Google][<span class="token variable">1</span>]</span>,<span class="token url">[YouTube][<span class="token variable">2</span>]</span>,<span class="token url">[YouTube][]</span>。

[1]:http://www.google.com
[2]:https://www.youtube.com "YouTube"
[YouTube]:https://www.youtube.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我经常去的几个网站<a href="http://www.google.com" target="_blank" rel="noopener">Google</a>,<a href="https://www.youtube.com" title="YouTube" target="_blank" rel="noopener">YouTube</a>,<a href="https://www.youtube.com" target="_blank" rel="noopener">YouTube</a>。</p>
<h5 id="3-3-自动链接"><a href="#3-3-自动链接" class="headerlink" title="3.3. 自动链接"></a>3.3. 自动链接</h5><p>语法说明：<br>Markdown 支持以比较简短的自动链接形式来处理网址和电子邮件信箱，只要是用&lt;&gt;包起来， Markdown 就会自动把它转成链接。一般网址的链接文字就和链接地址一样，例如：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">&lt;http://example.com/>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address@example.com</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>view</p>
<p><a href="http://example.com/" target="_blank" rel="noopener">http://example.com/</a><br><a href="mailto:&#x61;&#100;&#x64;&#x72;&#x65;&#x73;&#x73;&#64;&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#101;&#46;&#99;&#x6f;&#109;" target="_blank" rel="noopener">&#x61;&#100;&#x64;&#x72;&#x65;&#x73;&#x73;&#64;&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#101;&#46;&#99;&#x6f;&#109;</a></p>
<hr>
<h4 id="4-锚点"><a href="#4-锚点" class="headerlink" title="4. 锚点"></a>4. 锚点</h4><p>网页中，锚点其实就是页内超链接，也就是链接本文档内部的某些元素，实现当前页面中的跳转。比如我这里写下一个锚点，点击回到目录，就能跳转到目录。 在目录中点击这一节，就能跳过来。还有下一节的注脚。这些根本上都是用锚点来实现的。</p>
<p>注意： </p>
<ol>
<li>Markdown Extra 只支持在标题后插入锚点，其它地方无效。 </li>
<li>Leanote 编辑器右侧显示效果区域暂时不支持锚点跳转，所以点来点去发现没有跳转不必惊慌，但是你发布成笔记或博文后是支持跳转的。</li>
</ol>
<pre class="line-numbers language-markdown"><code class="language-markdown"> 跳转测试{#toc-heading-18}
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>跳转到<a href="#toc-heading-18">页尾</a>，这个有点问题，会跳转到新标签页的页尾，因为hexo会在生成的a标签上加上<code>target=&quot;_blank&quot;</code>这个属性，暂时无法解决。</p>
<hr>
<h4 id="5-列表"><a href="#5-列表" class="headerlink" title="5. 列表"></a>5. 列表</h4><h5 id="5-1-无序列表"><a href="#5-1-无序列表" class="headerlink" title="5.1. 无序列表"></a>5.1. 无序列表</h5><p>使用 *，+，- 表示无序列表。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token list punctuation">-</span> 无序列表项 一
<span class="token list punctuation">-</span> 无序列表项 二
<span class="token list punctuation">-</span> 无序列表项 三<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<ul>
<li>无序列表项 一</li>
<li>无序列表项 二</li>
<li>无序列表项 三</li>
</ul>
<h5 id="5-2-有序列表"><a href="#5-2-有序列表" class="headerlink" title="5.2. 有序列表"></a>5.2. 有序列表</h5><p>有序列表则使用数字接着一个英文句点。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token list punctuation">1.</span> 有序列表项 一
<span class="token list punctuation">2.</span> 有序列表项 二
<span class="token list punctuation">3.</span> 有序列表项 三<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<ol>
<li>有序列表项 一</li>
<li>有序列表项 二</li>
<li>有序列表项 三</li>
</ol>
<h5 id="5-3-定义型列表"><a href="#5-3-定义型列表" class="headerlink" title="5.3. 定义型列表"></a>5.3. 定义型列表</h5><p>语法说明：</p>
<p>定义型列表由名词和解释组成。一行写上定义，紧跟一行写上解释。解释的写法:紧跟一个缩进(Tab)</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">代码块 1 Markdown
:    轻量级文本标记语言，可以转换成html，pdf等格式（左侧有一个可见的冒号和四个不可见的空格）

代码块 2
:   这是代码块的定义（左侧有一个可见的冒号和四个不可见的空格）

<span class="token code keyword">        代码块（左侧有八个不可见的空格）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<dl><dt>代码块 1 Markdown</dt><dd>轻量级文本标记语言，可以转换成html，pdf等格式（左侧有一个可见的冒号和四个不可见的空格）</dd></dl><dl><dt>代码块 2</dt><dd>这是代码块的定义（左侧有一个可见的冒号和四个不可见的空格）</dd></dl><pre><code>    代码块（左侧有八个不可见的空格）</code></pre><h5 id="5-3-列表缩进"><a href="#5-3-列表缩进" class="headerlink" title="5.3. 列表缩进"></a>5.3. 列表缩进</h5><p>语法说明：</p>
<p>列表项目标记通常是放在最左边，但是其实也可以缩进，最多 3 个空格，项目标记后面则一定要接着至少一个空格或制表符。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token list punctuation">*</span>   轻轻的我走了， 正如我轻轻的来； 我轻轻的招手， 作别西天的云彩。
那河畔的金柳， 是夕阳中的新娘； 波光里的艳影， 在我的心头荡漾。 
软泥上的青荇， 油油的在水底招摇； 在康河的柔波里， 我甘心做一条水草！ 
<span class="token list punctuation">*</span>   那榆荫下的一潭， 不是清泉， 是天上虹； 揉碎在浮藻间， 沉淀着彩虹似的梦。 
寻梦？撑一支长篙， 向青草更青处漫溯； 满载一船星辉， 在星辉斑斓里放歌。 
但我不能放歌， 悄悄是别离的笙箫； 夏虫也为我沉默， 沉默是今晚的康桥！ 
悄悄的我走了， 正如我悄悄的来； 我挥一挥衣袖， 不带走一片云彩。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<ul>
<li>轻轻的我走了， 正如我轻轻的来； 我轻轻的招手， 作别西天的云彩。<br>那河畔的金柳， 是夕阳中的新娘； 波光里的艳影， 在我的心头荡漾。<br>软泥上的青荇， 油油的在水底招摇； 在康河的柔波里， 我甘心做一条水草！ </li>
<li>那榆荫下的一潭， 不是清泉， 是天上虹； 揉碎在浮藻间， 沉淀着彩虹似的梦。<br>寻梦？撑一支长篙， 向青草更青处漫溯； 满载一船星辉， 在星辉斑斓里放歌。<br>但我不能放歌， 悄悄是别离的笙箫； 夏虫也为我沉默， 沉默是今晚的康桥！<br>悄悄的我走了， 正如我悄悄的来； 我挥一挥衣袖， 不带走一片云彩。</li>
</ul>
<h5 id="5-4-包含段落的列表"><a href="#5-4-包含段落的列表" class="headerlink" title="5.4. 包含段落的列表"></a>5.4. 包含段落的列表</h5><p>语法说明：</p>
<p>列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符（显示效果与代码一致）：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token list punctuation">*</span>   轻轻的我走了， 正如我轻轻的来； 我轻轻的招手， 作别西天的云彩。
那河畔的金柳， 是夕阳中的新娘； 波光里的艳影， 在我的心头荡漾。 
软泥上的青荇， 油油的在水底招摇； 在康河的柔波里， 我甘心做一条水草！

<span class="token code keyword">     那榆荫下的一潭， 不是清泉， 是天上虹； 揉碎在浮藻间， 沉淀着彩虹似的梦。 </span>
寻梦？撑一支长篙， 向青草更青处漫溯； 满载一船星辉， 在星辉斑斓里放歌。 
但我不能放歌， 悄悄是别离的笙箫； 夏虫也为我沉默， 沉默是今晚的康桥！

<span class="token list punctuation">*</span>    悄悄的我走了， 正如我悄悄的来； 我挥一挥衣袖， 不带走一片云彩。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<ul>
<li><p>轻轻的我走了， 正如我轻轻的来； 我轻轻的招手， 作别西天的云彩。<br>那河畔的金柳， 是夕阳中的新娘； 波光里的艳影， 在我的心头荡漾。<br>软泥上的青荇， 油油的在水底招摇； 在康河的柔波里， 我甘心做一条水草！</p>
<p> 那榆荫下的一潭， 不是清泉， 是天上虹； 揉碎在浮藻间， 沉淀着彩虹似的梦。<br>寻梦？撑一支长篙， 向青草更青处漫溯； 满载一船星辉， 在星辉斑斓里放歌。<br>但我不能放歌， 悄悄是别离的笙箫； 夏虫也为我沉默， 沉默是今晚的康桥！ </p>
</li>
<li><p>悄悄的我走了， 正如我悄悄的来； 我挥一挥衣袖， 不带走一片云彩。</p>
</li>
</ul>
<h5 id="5-5-包含引用的列表"><a href="#5-5-包含引用的列表" class="headerlink" title="5.5. 包含引用的列表"></a>5.5. 包含引用的列表</h5><p>语法说明：</p>
<p>如果要在列表项目内放进引用，那 &gt; 就需要缩进：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token list punctuation">*</span>   阅读的方法:
<span class="token code keyword">    > 打开书本。</span>
<span class="token code keyword">    > 打开电灯。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<ul>
<li>阅读的方法:<blockquote>
<p>打开书本。<br>打开电灯。</p>
</blockquote>
</li>
</ul>
<h5 id="5-6-包含代码区块的引用"><a href="#5-6-包含代码区块的引用" class="headerlink" title="5.6. 包含代码区块的引用"></a>5.6. 包含代码区块的引用</h5><p>语法说明：<br>如果要放代码区块的话，该区块就需要缩进两次，也就是 8 个空格或是 2 个制表符：</p>
<h5 id="5-7-一个特殊情况"><a href="#5-7-一个特殊情况" class="headerlink" title="5.7. 一个特殊情况"></a>5.7. 一个特殊情况</h5><p>在特殊情况下，项目列表很可能会不小心产生，像是下面这样的写法：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token list punctuation">1986.</span> What a great season.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>会显示成：</p>
<ol start="1986">
<li>What a great season.</li>
</ol>
<p>换句话说，也就是在行首出现数字-句点-空白，要避免这样的状况，你可以在句点前面加上反斜杠：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">1986\. What a great season.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>才会正常显示成：</p>
<p>1986. What a great season.</p>
<hr>
<h4 id="6-引用"><a href="#6-引用" class="headerlink" title="6. 引用"></a>6. 引用</h4><p>语法说明：</p>
<p>引用需要在被引用的文本前加上&gt;符号。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span> 这是一个有两段文字的引用,
无意义的占行文字1.
无意义的占行文字2.

<span class="token blockquote punctuation">></span> 无意义的占行文字3.
无意义的占行文字4.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<blockquote>
<p>这是一个有两段文字的引用,<br>无意义的占行文字1.<br>无意义的占行文字2.</p>
</blockquote>
<blockquote>
<p>无意义的占行文字3.<br>无意义的占行文字4.</p>
</blockquote>
<h5 id="6-1-引用的多层嵌套"><a href="#6-1-引用的多层嵌套" class="headerlink" title="6.1. 引用的多层嵌套"></a>6.1. 引用的多层嵌套</h5><p>区块引用可以嵌套（例如：引用内的引用），只要根据层次加上不同数量的 &gt; ：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token blockquote punctuation">>>></span> 请问 Markdwon 怎么用？ - 小白

<span class="token blockquote punctuation">>></span> 自己看教程！ - 愤青

<span class="token blockquote punctuation">></span> 教程在哪？ - 小白<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<blockquote>
<blockquote>
<p>请问 Markdwon 怎么用？ - 小白</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>自己看教程！ - 愤青</p>
</blockquote>
</blockquote>
<blockquote>
<p>教程在哪？ - 小白</p>
</blockquote>
<h5 id="6-2-引用其它要素"><a href="#6-2-引用其它要素" class="headerlink" title="6.2. 引用其它要素"></a>6.2. 引用其它要素</h5><p>引用的区块内也可以使用其他的 Markdown 语法，包括标题、列表、代码区块等：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span> <span class="token list punctuation">1.</span>   这是第一行列表项。
<span class="token blockquote punctuation">></span> <span class="token list punctuation">2.</span>   这是第二行列表项。
<span class="token blockquote punctuation">></span> 
<span class="token blockquote punctuation">></span> 给出一些例子代码：
<span class="token blockquote punctuation">></span> 
<span class="token blockquote punctuation">></span><span class="token code keyword">     return shell_exec("echo $input | $markdown_script");</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<ol>
<li>这是第一行列表项。</li>
<li>这是第二行列表项。</li>
</ol>
<p>给出一些例子代码：</p>
<pre><code>return shell_exec(&quot;echo $input | $markdown_script&quot;);</code></pre></blockquote>
<hr>
<h4 id="7-插入图像"><a href="#7-插入图像" class="headerlink" title="7. 插入图像"></a>7. 插入图像</h4><p>图片的创建方式与超链接相似，而且和超链接一样也有两种写法，行内式和参考式写法。</p>
<p>语法中图片Alt的意思是如果图片因为某些原因不能显示，就用定义的图片Alt文字来代替图片。 图片Title则和链接中的Title一样，表示鼠标悬停与图片上时出现的文字。 Alt 和 Title 都不是必须的，可以省略，但建议写上。</p>
<h5 id="7-1-行内式"><a href="#7-1-行内式" class="headerlink" title="7.1. 行内式"></a>7.1. 行内式</h5><p>语法说明：![图片Alt](图片地址 “图片Title”)</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">美丽风景： 
<span class="token url">![美丽风景](https://yuhongjun.github.io/assets/media/scenery.jpeg <span class="token string">"美丽风景"</span>)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>view<br>美丽风景：<br><img src="https://yuhongjun.github.io/assets/media/scenery.jpeg" alt="美丽风景" title="美丽风景"></p>
<p>7.2. 参考式</p>
<p>语法说明：</p>
<p>在文档要插入图片的地方写![图片Alt][标记]</p>
<p>在文档的最后写上[标记]:图片地址 “Title”</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token url">![美丽风景](https://yuhongjun.github.io/assets/media/scenery.jpeg <span class="token string">"美丽风景"</span>)</span>

[scenery]:https://yuhongjun.github.io/assets/media/scenery.jpeg "美丽风景"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>view<br><img src="https://yuhongjun.github.io/assets/media/scenery.jpeg" alt="美丽风景" title="美丽风景"></p>
<hr>
<h4 id="8-内容目录"><a href="#8-内容目录" class="headerlink" title="8. 内容目录"></a>8. 内容目录</h4><p>在段落中填写 [TOC] 以显示全文内容的目录结构。</p>
<p>效果参见最上方的目录</p>
<hr>
<h4 id="9-注脚"><a href="#9-注脚" class="headerlink" title="9. 注脚"></a>9. 注脚</h4><p>语法说明：</p>
<p>在需要添加注脚的文字后加上脚注名字[^注脚名字],称为加注。 然后在文本的任意位置(一般在最后)添加脚注，脚注前必须有对应的脚注名字。</p>
<p>注意：经测试注脚与注脚之间必须空一行，不然会失效。成功后会发现，即使你没有把注脚写在文末，经Markdown转换后，也会自动归类到文章的最后。</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">使用 Markdown[^1]可以效率的书写文档, 直接转换成 HTML[^2], 你可以使用 Leanote[^Le] 编辑器进行书写。

[^1]:Markdown是一种纯文本标记语言

[^2]:HyperText Markup Language 超文本标记语言

[^Le]:开源笔记平台，支持Markdown和笔记直接发为博文<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<p>使用 Markdown<a href="Markdown是一种纯文本标记语言">^1</a>可以效率的书写文档, 直接转换成 HTML[^2], 你可以使用 Leanote<a href="开源笔记平台，支持Markdown和笔记直接发为博文">^Le</a> 编辑器进行书写。</p>
<p>[^2]:HyperText Markup Language 超文本标记语言</p>
<p>注：脚注自动被搬运到最后面，请到文章末尾查看，并且脚注后方的链接可以直接跳转回到加注的地方。</p>
<hr>
<h4 id="10-LaTeX-公式"><a href="#10-LaTeX-公式" class="headerlink" title="10. LaTeX 公式"></a>10. LaTeX 公式</h4><h5 id="10-1-表示行内公式："><a href="#10-1-表示行内公式：" class="headerlink" title="10.1. $ 表示行内公式："></a>10.1. $ 表示行内公式：</h5><pre class="line-numbers language-markdown"><code class="language-markdown">质能守恒方程可以用一个很简洁的方程式 $E=mc^2$ 来表达。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>view<br>质能守恒方程可以用一个很简洁的方程式 $E=mc^2$ 来表达。</p>
<h5 id="10-2-表示整行公式："><a href="#10-2-表示整行公式：" class="headerlink" title="10.2 $$ 表示整行公式："></a>10.2 $$ 表示整行公式：</h5><pre class="line-numbers language-markdown"><code class="language-markdown">$$\sum<span class="token italic"><span class="token punctuation">_</span>{i=1}^n a<span class="token punctuation">_</span></span>i=0$$
$$f(x<span class="token italic"><span class="token punctuation">_</span>1,x<span class="token punctuation">_</span></span>x,\ldots,x<span class="token italic"><span class="token punctuation">_</span>n) = x<span class="token punctuation">_</span></span>1^2 + x<span class="token italic"><span class="token punctuation">_</span>2^2 + \cdots + x<span class="token punctuation">_</span></span>n^2 $$
$$\sum^{j-1}<span class="token italic"><span class="token punctuation">_</span>{k=0}{\widehat{\gamma}<span class="token punctuation">_</span></span>{kj} z_k}$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>访问 <a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" title="MathJax basic tutorial and quick reference" target="_blank" rel="noopener">MathJax</a> 参考更多使用方法。</p>
<hr>
<hr>
<h4 id="11-表格"><a href="#11-表格" class="headerlink" title="11 .表格"></a>11 .表格</h4><p>语法说明：</p>
<p>不管是哪种方式，第一行为表头，第二行分隔表头和主体部分，第三行开始每一行为一个表格行。<br>列于列之间用管道符|隔开。原生方式的表格每一行的两边也要有管道符。<br>第二行还可以为不同的列指定对齐方向。默认为左对齐，在-右边加上:就右对齐。</p>
<ol>
<li>简单方式写表格：</li>
</ol>
<pre class="line-numbers language-markdown"><code class="language-markdown">学号|姓名|分数
-|-|-
小明|男|75
小红|女|79
小陆|男|92<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2.原生方式写表格：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">|学号|姓名|分数|
|-|-|-|
|小明|男|75|
|小红|女|79|
|小陆|男|92|<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3.为表格第二列指定方向：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown">产品|价格
-|-:
Leanote 高级账号|60元/年
Leanote 超级账号|120元/年<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<ol>
<li>简单方式写表格：</li>
</ol>
<table>
<thead>
<tr>
<th>学号</th>
<th>姓名</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>小明</td>
<td>男</td>
<td>75</td>
</tr>
<tr>
<td>小红</td>
<td>女</td>
<td>79</td>
</tr>
<tr>
<td>小陆</td>
<td>男</td>
<td>92</td>
</tr>
</tbody></table>
<p>2.原生方式写表格：</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>姓名</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>小明</td>
<td>男</td>
<td>75</td>
</tr>
<tr>
<td>小红</td>
<td>女</td>
<td>79</td>
</tr>
<tr>
<td>小陆</td>
<td>男</td>
<td>92</td>
</tr>
</tbody></table>
<p>3.为表格第二列指定方向：</p>
<table>
<thead>
<tr>
<th>产品</th>
<th align="right">价格</th>
</tr>
</thead>
<tbody><tr>
<td>Leanote 高级账号</td>
<td align="right">60元/年</td>
</tr>
<tr>
<td>Leanote 超级账号</td>
<td align="right">120元/年</td>
</tr>
</tbody></table>
<hr>
<h4 id="12-分隔线"><a href="#12-分隔线" class="headerlink" title="12. 分隔线"></a>12. 分隔线</h4><p>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。下面每种写法都可以建立分隔线：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token hr punctuation">* * *</span>

<span class="token hr punctuation">***</span>

<span class="token hr punctuation">*****</span>

<span class="token hr punctuation">- - -</span>

<span class="token hr punctuation">---------------------------------------</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>显示效果都一样</p>
<hr>
<h4 id="13-代码"><a href="#13-代码" class="headerlink" title="13. 代码"></a>13. 代码</h4><p>对于程序员来说这个功能是必不可少的，插入程序代码的方式有两种，一种是利用缩进(Tab), 另一种是利用”`”符号（一般在ESC键下方）包裹代码。</p>
<p>语法说明：</p>
<ol>
<li>插入行内代码，即插入一个单词或者一句代码的情况，使用<code>code</code>这样的形式插入。</li>
<li>插入多行代码，可以使用缩进或者“<code>code “</code>,具体看示例。</li>
</ol>
<p><strong>注意： 缩进式插入前方必须有空行</strong></p>
<h5 id="13-1-行内式"><a href="#13-1-行内式" class="headerlink" title="13.1. 行内式"></a>13.1. 行内式</h5><pre class="line-numbers language-markdown"><code class="language-markdown">C语言里的函数 <span class="token code keyword">`scanf()`</span> 怎么使用？<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>view<br>C语言里的函数 <code>scanf()</code> 怎么使用？</p>
<h5 id="13-2-缩进式多行代码"><a href="#13-2-缩进式多行代码" class="headerlink" title="13.2. 缩进式多行代码"></a>13.2. 缩进式多行代码</h5><p>缩进 4 个空格或是 1 个制表符</p>
<p>一个代码区块会一直持续到没有缩进的那一行（或是文件结尾）。</p>
<pre><code>    #include &lt;stdio.h&gt;
    int main(void)
    {
        printf(&quot;Hello world&quot;);
    }</code></pre><p>view</p>
<pre class="line-numbers language-c"><code class="language-c">    <span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
    <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="13-3-用六个-包裹多行代码"><a href="#13-3-用六个-包裹多行代码" class="headerlink" title="13.3. 用六个`包裹多行代码"></a>13.3. 用六个`包裹多行代码</h5><pre class="line-numbers language-j"><code class="language-j"><span class="token conjunction variable">`</span> <span class="token conjunction variable">`</span> <span class="token conjunction variable">`</span>
<span class="token verb keyword">#</span>include <span class="token verb keyword">&lt;</span>stdi<span class="token verb keyword">o.</span>h<span class="token verb keyword">></span>
int main<span class="token punctuation">(</span>void<span class="token punctuation">)</span>
<span class="token verb keyword">{</span>
    printf<span class="token punctuation">(</span><span class="token conjunction variable">"</span>Hello world<span class="token conjunction variable">"</span><span class="token punctuation">)</span><span class="token verb keyword">;</span>
<span class="token adverb builtin">}</span>
<span class="token conjunction variable">`</span> <span class="token conjunction variable">`</span> <span class="token conjunction variable">`</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>另外说明一下，第一个 ```后可以加上代码的类型，js代码就加上js,css就加上css，渲染出来的样式会有区别。比如下面这段，虽然内容基本差不多，第一个是js，第二个是json，渲染出来就是不一样的。如果不加的话文字都是白色的。</p>
<pre class="line-numbers language-js"><code class="language-js">
<span class="token keyword">var</span> object <span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token string">"avatar"</span><span class="token punctuation">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"码酱"</span><span class="token punctuation">,</span>
  <span class="token string">"introduction"</span><span class="token punctuation">:</span> <span class="token string">"我不是大佬，只是在追寻大佬的脚步"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"码酱"</span><span class="token punctuation">,</span>
  <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"我不是大佬，只是在追寻大佬的脚步"</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>
var object ={
  &quot;avatar&quot;: &quot;http://image.luokangyuan.com/1_qq_27922023.jpg&quot;,
  &quot;name&quot;: &quot;码酱&quot;,
  &quot;introduction&quot;: &quot;我不是大佬，只是在追寻大佬的脚步&quot;,
}</code></pre><h5 id="13-5-HTML-原始码"><a href="#13-5-HTML-原始码" class="headerlink" title="13.5. HTML 原始码"></a>13.5. HTML 原始码</h5><p>在代码区块里面， &amp; 、 &lt; 和 &gt; 会自动转成 HTML 实体，这样的方式让你非常容易使用 Markdown 插入范例用的 HTML 原始码，只需要复制贴上，剩下的 Markdown 都会帮你处理，例如：</p>
<p>第一个例子：</p>
<pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
   © 2018 <span class="token italic"><span class="token punctuation">*</span><span class="token punctuation">*</span><span class="token punctuation">*</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>view</p>
<div class="footer">
   © 2018 ***
</div>

<hr>
<p> 还有一个流程图，hexo暂时渲染不出来，一般人也用不到，就去掉了。</p>
]]></content>
      <categories>
        <category>技术分享</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello，world！</title>
    <url>/2019/07/15/hello-world/</url>
    <content><![CDATA[<p>博客问世，hello world!</p>
]]></content>
      <categories>
        <category>生活记录</category>
      </categories>
      <tags>
        <tag>hello world</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/googlee322b95c7bae36a8.html</url>
    <content><![CDATA[google-site-verification: googlee322b95c7bae36a8.html]]></content>
  </entry>
  <entry>
    <title>关于</title>
    <url>/about/index.html</url>
    <content><![CDATA[<p>关于我：<br>90后，一名前端开发者，现居上海。</p>
<p>技术宅一枚，喜欢折腾各种电子产品、钻研各种技术。也喜欢骑行、健身等运动。</p>
<p>关于博客:</p>
<p>写这个博客的目的就是分享一些软件技巧、折腾经历、学习记录、日常等。                   </p>
]]></content>
  </entry>
  <entry>
    <title>分类</title>
    <url>/categories/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>友情链接</title>
    <url>/friends/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>相册</title>
    <url>/galleries/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>标签</title>
    <url>/tags/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>2017</title>
    <url>/galleries/2017/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>2019</title>
    <url>/galleries/2019/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>private</title>
    <url>/galleries/private/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>青海湖骑行记</title>
    <url>/galleries/%E9%9D%92%E6%B5%B7%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>环太湖骑行记</title>
    <url>/galleries/%E7%8E%AF%E5%A4%AA%E6%B9%96%E9%AA%91%E8%A1%8C%E8%AE%B0/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>2018</title>
    <url>/galleries/2018/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
